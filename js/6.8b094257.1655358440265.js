"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[6],{90006:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container container--remove-liquidity"},[i("generic-page-header",{attrs:{"has-button-back":"",title:e.t("removeLiquidity.title"),tooltip:e.t("removeLiquidity.description")},on:{back:e.handleBack}}),i("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[i("s-float-input",{ref:"removePart",class:["s-input--token-value","s-input--remove-part",e.removePartCharClass],attrs:{size:"medium",value:String(e.removePartInput),decimals:0,max:100},on:{input:e.handleRemovePartChange,focus:function(t){return e.setFocusedField("removePart")},blur:e.resetFocusedField}},[i("div",{staticClass:"amount",attrs:{slot:"top"},slot:"top"},[e._v(e._s(e.t("removeLiquidity.amount")))]),i("div",{attrs:{slot:"right"},slot:"right"},[i("span",{staticClass:"percent"},[e._v("%")])]),i("s-slider",{staticClass:"slider-container",attrs:{slot:"bottom",value:e.removePartInput,showTooltip:!1},on:{change:e.handleRemovePartChange},slot:"bottom"})],1),i("s-icon",{staticClass:"icon-divider",attrs:{name:"arrows-arrow-bottom-24"}}),i("s-float-input",{ref:"firstTokenAmount",staticClass:"s-input--token-value",attrs:{size:"medium",value:e.firstTokenAmount,decimals:(e.firstToken||{}).decimals,"has-locale-string":"",delimiters:e.delimiters,max:e.getTokenMaxAmount(e.firstTokenBalance)},on:{input:function(t){return e.handleTokenChange(t,e.setFirstTokenAmount)},focus:function(t){return e.setFocusedField("firstTokenAmount")},blur:e.resetFocusedField}},[i("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"input-title"},[i("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(e._s(e.t("removeLiquidity.output")))])]),e.liquidity?i("div",{staticClass:"input-title"},[e._v("-")]):e._e()]),i("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[i("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.firstToken}})],1),i("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.firstToken?i("token-address",{staticClass:"input-value",attrs:{name:e.firstToken.name,symbol:e.firstToken.symbol,address:e.firstToken.address}}):e._e()],1)]),i("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}),i("s-float-input",{ref:"secondTokenAmount",staticClass:"s-input--token-value",attrs:{size:"medium",value:e.secondTokenAmount,decimals:(e.secondToken||{}).decimals,"has-locale-string":"",delimiters:e.delimiters,max:e.getTokenMaxAmount(e.secondTokenBalance)},on:{input:function(t){return e.handleTokenChange(t,e.setSecondTokenAmount)},focus:function(t){return e.setFocusedField("secondTokenAmount")},blur:e.resetFocusedField}},[i("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"input-title"},[i("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(e._s(e.t("removeLiquidity.output")))])]),e.liquidity?i("div",{staticClass:"input-title"},[e._v("-")]):e._e()]),i("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[i("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.secondToken}})],1),i("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.secondToken?i("token-address",{staticClass:"input-value",attrs:{name:e.secondToken.name,symbol:e.secondToken.symbol,address:e.secondToken.address}}):e._e()],1)]),i("slippage-tolerance",{staticClass:"slippage-tolerance-settings"}),i("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary","border-radius":"small",disabled:e.isEmptyAmount||e.isInsufficientBalance||e.isInsufficientXorForFee},on:{click:e.handleRemoveLiquidity}},[e.isEmptyAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.t("removeLiquidity.liquidity")}))+" ")]:e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.XOR_SYMBOL}))+" ")]:[e._v(" "+e._s(e.t("removeLiquidity.remove"))+" ")]],2),e.price||e.priceReversed||e.networkFee||e.shareOfPool?i("remove-liquidity-transaction-details",{staticClass:"info-line-container",attrs:{"info-only":!1}}):e._e()],1),i("confirm-remove-liquidity",{attrs:{visible:e.showConfirmDialog,"parent-loading":e.parentLoading},on:{"update:visible":function(t){e.showConfirmDialog=t},confirm:e.handleConfirmRemoveLiquidity}}),i("network-fee-warning-dialog",{attrs:{visible:e.showWarningFeeDialog,fee:e.formattedFee},on:{"update:visible":function(t){e.showWarningFeeDialog=t},confirm:e.confirmNetworkFeeWariningDialog}})],1)},s=[],n=i(34563),r=i(70655),a=i(53545),d=i(8638),u=i(36930),l=i(82753),c=i(68850),m=i(2591),h=i(80710),v=i(16546),p=i(85530),f=i(74614);let k=class extends((0,a.Wr)(d.tA.NetworkFeeWarningMixin,d.tA.FormattedAmountMixin,d.tA.TransactionMixin,c.Z,m.Z)){constructor(...e){super(...e),(0,n.Z)(this,"XOR_SYMBOL",l.XOR.symbol),(0,n.Z)(this,"delimiters",u.FPNumber.DELIMITERS_CONFIG),(0,n.Z)(this,"liquidityAmount",void 0),(0,n.Z)(this,"focusedField",void 0),(0,n.Z)(this,"firstTokenAmount",void 0),(0,n.Z)(this,"secondTokenAmount",void 0),(0,n.Z)(this,"removePart",void 0),(0,n.Z)(this,"price",void 0),(0,n.Z)(this,"priceReversed",void 0),(0,n.Z)(this,"xor",void 0),(0,n.Z)(this,"liquidityBalance",void 0),(0,n.Z)(this,"liquidity",void 0),(0,n.Z)(this,"firstToken",void 0),(0,n.Z)(this,"secondToken",void 0),(0,n.Z)(this,"firstTokenBalance",void 0),(0,n.Z)(this,"secondTokenBalance",void 0),(0,n.Z)(this,"shareOfPool",void 0),(0,n.Z)(this,"setFocusedField",void 0),(0,n.Z)(this,"resetFocusedField",void 0),(0,n.Z)(this,"setRemovePart",void 0),(0,n.Z)(this,"setLiquidity",void 0),(0,n.Z)(this,"removeLiquidity",void 0),(0,n.Z)(this,"resetData",void 0),(0,n.Z)(this,"setFirstTokenAmount",void 0),(0,n.Z)(this,"setSecondTokenAmount",void 0),(0,n.Z)(this,"resetPrices",void 0),(0,n.Z)(this,"getPrices",void 0),(0,n.Z)(this,"removePartInput",0),(0,n.Z)(this,"sliderInput",void 0),(0,n.Z)(this,"sliderDragButton",void 0)}removePartChange(e){this.handleRemovePartChange(String(e))}liquidityChange(){switch(this.updatePrices(),this.focusedField){case"firstTokenAmount":case"secondTokenAmount":{const e="firstTokenAmount"===this.focusedField,t=Number(this.getTokenMaxAmount(e?this.firstTokenBalance:this.secondTokenBalance)),i=Number(e?this.firstTokenAmount:this.secondTokenAmount),o=e?this.setFirstTokenAmount:this.setSecondTokenAmount,s=String(Number.isFinite(t)?Math.min(t,i):i);o(s);break}default:this.handleRemovePartChange(String(this.removePart));break}}async mounted(){await this.withParentLoading((async()=>{if(await this.setLiquidity({firstAddress:this.firstTokenAddress,secondAddress:this.secondTokenAddress}),!this.liquidity)return this.handleBack();this.updatePrices(),this.addListenerToSliderDragButton()}))}beforeDestroy(){this.removeListenerFromSliderDragButton(),this.resetData(),this.resetPrices()}get firstTokenAddress(){return this.$route.params.firstAddress}get secondTokenAddress(){return this.$route.params.secondAddress}get isEmptyAmount(){return!this.removePart||!this.liquidityAmount||!this.firstTokenAmount||!this.secondTokenAmount}get isInsufficientBalance(){const e=this.getFPNumberFromCodec(this.liquidityBalance),t=this.getFPNumberFromCodec(this.firstTokenBalance),i=this.getFPNumberFromCodec(this.secondTokenBalance),o=this.getFPNumber(this.liquidityAmount),s=this.getFPNumber(this.firstTokenAmount),n=this.getFPNumber(this.secondTokenAmount);return u.FPNumber.gt(o,e)||u.FPNumber.gt(s,t)||u.FPNumber.gt(n,i)}get isInsufficientXorForFee(){return!!this.xor&&(0,p.LG)(this.xor,this.networkFee)}get removePartCharClass(){const e={3:"three",2:"two"}[this.removePartInput.toString().length]??"one";return`${e}-char`}get networkFee(){return this.networkFees[u.Operation.RemoveLiquidity]}get formattedFee(){return this.formatCodecNumber(this.networkFee)}get isXorSufficientForNextOperation(){return this.isXorSufficientForNextTx({type:u.Operation.RemoveLiquidity})}handleRemovePartChange(e){const t=parseFloat(e)||0;this.removePartInput=Math.min(Math.max(t,0),100),this.setRemovePart(this.removePartInput)}focusSliderInput(){this.setFocusedField("removePart"),this.sliderInput&&this.sliderInput.focus()}getTokenMaxAmount(e,t){if(e)return this.getStringFromCodec(e,t)}updatePrices(){const e=this.getFPNumberFromCodec(this.firstTokenBalance),t=this.getFPNumberFromCodec(this.secondTokenBalance);this.getPrices({assetAAddress:this.firstTokenAddress??this.firstToken.address,assetBAddress:this.secondTokenAddress??this.secondToken.address,amountA:e.toString(),amountB:t.toString()})}async handleTokenChange(e,t){await t(e)}async handleConfirmRemoveLiquidity(){await this.handleConfirmDialog((async()=>{await this.withNotifications(this.removeLiquidity),this.handleBack()}))}handleBack(){h.ZP.currentRoute.name===v.sn.RemoveLiquidity&&h.ZP.push({name:v.sn.Pool})}async handleRemoveLiquidity(){if(!this.isXorSufficientForNextOperation){if(this.openWarningFeeDialog(),await this.waitOnNextTxFailureConfirmation(),!this.isWarningFeeDialogConfirmed)return;this.isWarningFeeDialogConfirmed=!1}this.openConfirmDialog()}addListenerToSliderDragButton(){this.sliderDragButton=this.$el.querySelector(".slider-container .el-slider__button"),this.sliderInput=this.$el.querySelector(".s-input--remove-part .el-input__inner"),this.sliderDragButton&&this.sliderDragButton.addEventListener("mousedown",this.focusSliderInput)}removeListenerFromSliderDragButton(){this.sliderDragButton&&this.$el.removeEventListener("mousedown",this.sliderDragButton)}};(0,r.__decorate)([f.SB.removeLiquidity.liquidityAmount],k.prototype,"liquidityAmount",void 0),(0,r.__decorate)([f.SB.removeLiquidity.focusedField],k.prototype,"focusedField",void 0),(0,r.__decorate)([f.SB.removeLiquidity.firstTokenAmount],k.prototype,"firstTokenAmount",void 0),(0,r.__decorate)([f.SB.removeLiquidity.secondTokenAmount],k.prototype,"secondTokenAmount",void 0),(0,r.__decorate)([f.SB.removeLiquidity.removePart],k.prototype,"removePart",void 0),(0,r.__decorate)([f.SB.prices.price],k.prototype,"price",void 0),(0,r.__decorate)([f.SB.prices.priceReversed],k.prototype,"priceReversed",void 0),(0,r.__decorate)([f.Yn.assets.xor],k.prototype,"xor",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.liquidityBalance],k.prototype,"liquidityBalance",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.liquidity],k.prototype,"liquidity",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.firstToken],k.prototype,"firstToken",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.secondToken],k.prototype,"secondToken",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.firstTokenBalance],k.prototype,"firstTokenBalance",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.secondTokenBalance],k.prototype,"secondTokenBalance",void 0),(0,r.__decorate)([f.Yn.removeLiquidity.shareOfPool],k.prototype,"shareOfPool",void 0),(0,r.__decorate)([f.QF.removeLiquidity.setFocusedField],k.prototype,"setFocusedField",void 0),(0,r.__decorate)([f.QF.removeLiquidity.resetFocusedField],k.prototype,"resetFocusedField",void 0),(0,r.__decorate)([f.aD.removeLiquidity.setRemovePart],k.prototype,"setRemovePart",void 0),(0,r.__decorate)([f.aD.removeLiquidity.setLiquidity],k.prototype,"setLiquidity",void 0),(0,r.__decorate)([f.aD.removeLiquidity.removeLiquidity],k.prototype,"removeLiquidity",void 0),(0,r.__decorate)([f.aD.removeLiquidity.resetData],k.prototype,"resetData",void 0),(0,r.__decorate)([f.aD.removeLiquidity.setFirstTokenAmount],k.prototype,"setFirstTokenAmount",void 0),(0,r.__decorate)([f.aD.removeLiquidity.setSecondTokenAmount],k.prototype,"setSecondTokenAmount",void 0),(0,r.__decorate)([f.QF.prices.resetPrices],k.prototype,"resetPrices",void 0),(0,r.__decorate)([f.aD.prices.getPrices],k.prototype,"getPrices",void 0),(0,r.__decorate)([(0,a.RL)("removePart")],k.prototype,"removePartChange",null),(0,r.__decorate)([(0,a.RL)("liquidity")],k.prototype,"liquidityChange",null),k=(0,r.__decorate)([(0,a.wA)({components:{GenericPageHeader:(0,h.kF)(v.z8.GenericPageHeader),SlippageTolerance:(0,h.kF)(v.z8.SlippageTolerance),ConfirmRemoveLiquidity:(0,h.kF)(v.z8.ConfirmRemoveLiquidity),NetworkFeeWarningDialog:(0,h.kF)(v.z8.NetworkFeeWarningDialog),RemoveLiquidityTransactionDetails:(0,h.kF)(v.z8.RemoveLiquidityTransactionDetails),TokenSelectButton:(0,h.kF)(v.z8.TokenSelectButton),InfoLine:d.wx.InfoLine,TokenAddress:d.wx.TokenAddress}})],k);var y=k,g=y,F=i(1001),T=(0,F.Z)(g,o,s,!1,null,"23580c5c",null),_=T.exports}}]);