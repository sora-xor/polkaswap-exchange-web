"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[3304],{13304:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container"},[r("generic-page-header",{attrs:{"has-button-back":"",title:e.t("referralProgram."+(e.isBond?"bondTitle":"unbondTitle"))},on:{back:e.handleBack}}),r("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[r("s-float-input",{staticClass:"s-input--token-value",attrs:{size:"medium",value:e.amount,decimals:e.xorDecimals,"has-locale-string":"",delimiters:e.delimiters,max:e.xorMaxValue},on:{input:e.handleInputXor}},[r("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[r("div",{staticClass:"input-title"},[r("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(" "+e._s(e.t("referralProgram."+(e.isBond?"deposit":"action.unbond")))+" ")])]),e.xorBalance&&e.xorBalance.transferable?r("div",{staticClass:"input-value"},[r("span",{staticClass:"input-value--uppercase"},[e._v(e._s(e.t("referralProgram.balance")))]),r("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:e.xorFormattedBondedBalance,"fiat-value":e.xorFormattedFiatBalance}})],1):e._e()]),r("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[e.isMaxButtonAvailable?r("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini"},on:{click:e.handleMaxValue}},[e._v(" "+e._s(e.t("buttons.max"))+" ")]):e._e(),r("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.xor}})],1),r("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.xorPrice?r("formatted-amount",{attrs:{"is-fiat-value":"",value:e.formattedFiatAmount}}):e._e(),r("token-address",{staticClass:"input-value",attrs:{name:e.xorName,symbol:e.xorSymbol,address:e.xorAddress}})],1)]),r("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary",disabled:e.isConfirmBondDisabled},on:{click:e.handleConfirmBond}},[e.hasZeroAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("referralProgram.insufficientBalance",{tokenSymbol:e.xorSymbol}))+" ")]:e.isBondedBalance&&e.isInsufficientBondedXor?[e._v(" "+e._s(e.t("referralProgram.insufficientBondedBalance"))+" ")]:[e._v(" "+e._s(e.t("referralProgram.action."+(e.isBond?"bond":"unbond")))+" ")]],2),r("info-line",{attrs:{label:e.t("referralProgram.networkFee"),"label-tooltip":e.t("referralProgram.networkFeeTooltip"),value:e.formattedNetworkFee,"asset-symbol":e.xorSymbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}}),r("referrals-confirm-bonding",{attrs:{visible:e.showConfirmBondDialog},on:{"update:visible":function(t){e.showConfirmBondDialog=t},confirm:e.confirmBond}})],1)],1)},a=[],s=r(34563),n=r(70655),i=r(53545),l=r(8638),u=r(36930),d=r(82753),m=r(32806),c=r(85530),h=r(80710),f=r(16546),g=r(74614);let b=class extends((0,i.Wr)(l.tA.FormattedAmountMixin,m.Z,l.tA.LoadingMixin)){constructor(...e){super(...e),(0,s.Z)(this,"networkFees",void 0),(0,s.Z)(this,"amount",void 0),(0,s.Z)(this,"xor",void 0),(0,s.Z)(this,"setAmount",void 0),(0,s.Z)(this,"resetAmount",void 0),(0,s.Z)(this,"delimiters",u.FPNumber.DELIMITERS_CONFIG),(0,s.Z)(this,"showConfirmBondDialog",!1)}get xorSymbol(){return d.XOR.symbol}get xorDecimals(){return d.XOR.decimals}get xorAddress(){return d.XOR.address}get xorName(){return d.XOR.name}get xorMaxValue(){return this.getMax(this.xorAddress)}get xorPrice(){return this.getAssetFiatPrice(d.XOR)}get xorBalance(){return this.xor?.balance}get xorFormattedBondedBalance(){return(0,c.SL)(this.xor,{isBondedBalance:this.isBondedBalance})}get xorFormattedFiatBalance(){return this.isBond?this.getFiatBalance(this.xor):this.getFiatAmountByCodecString(this.xorBalance?.bonded??"0")}get isBond(){return this.$route.name===f.sn.ReferralBonding}get isBondedBalance(){return!this.isBond}get hasZeroAmount(){return(0,c.yA)(this.amount)}get formattedFiatAmount(){return this.amount?this.getFiatAmountByString(this.amount,d.XOR)??f.m8:f.m8}get isMaxButtonAvailable(){const e=this.getFPNumberFromCodec(this.xorBalance?.transferable??f.m8,this.xorDecimals),t=this.getFPNumber(this.amount,this.xorDecimals);if(this.fpNumberNetworkFee.isZero())return!1;if(this.isBondedBalance){const t=this.xorBalance?.bonded??f.m8,r=this.getFPNumberFromCodec(t,this.xorDecimals).isZero();return!r&&u.FPNumber.gt(e,this.fpNumberNetworkFee)}return!u.FPNumber.eq(this.fpNumberNetworkFee,e.sub(t))&&u.FPNumber.gt(e,this.fpNumberNetworkFee)}get isInsufficientBondedXor(){return!!this.xor&&(0,c.Vl)(this.xor,this.amount,this.networkFee,!1,this.isBondedBalance)}get isInsufficientXorForFee(){return this.isBondedBalance?u.FPNumber.gt(this.fpNumberNetworkFee,this.getFPNumberFromCodec(this.xorBalance?.transferable??f.m8,this.xorDecimals)):!!this.xor&&(0,c.Vl)(this.xor,this.amount,this.networkFee)}get networkFee(){return this.networkFees[this.isBond?u.Operation.ReferralReserveXor:u.Operation.ReferralUnreserveXor]}get fpNumberNetworkFee(){return this.getFPNumberFromCodec(this.networkFee)}get formattedNetworkFee(){return this.formatCodecNumber(this.networkFee)}get isConfirmBondDisabled(){return this.hasZeroAmount||this.isInsufficientXorForFee||this.isInsufficientBondedXor}handleInputXor(e){e!==this.amount&&this.setAmount(e)}handleMaxValue(){this.xor&&this.handleInputXor((0,c.MN)(this.xor,this.networkFee,!1,this.isBondedBalance))}handleConfirmBond(){this.showConfirmBondDialog=!0}async confirmBond(e){e&&(this.resetAmount(),this.handleBack())}handleBack(){h.ZP.push({name:f.sn.Referral})}destroyed(){this.resetAmount()}};(0,n.__decorate)([g.SB.wallet.settings.networkFees],b.prototype,"networkFees",void 0),(0,n.__decorate)([g.SB.referrals.amount],b.prototype,"amount",void 0),(0,n.__decorate)([g.Yn.assets.xor],b.prototype,"xor",void 0),(0,n.__decorate)([g.QF.referrals.setAmount],b.prototype,"setAmount",void 0),(0,n.__decorate)([g.QF.referrals.resetAmount],b.prototype,"resetAmount",void 0),b=(0,n.__decorate)([(0,i.wA)({components:{GenericPageHeader:(0,h.kF)(f.z8.GenericPageHeader),TokenSelectButton:(0,h.kF)(f.z8.TokenSelectButton),ReferralsConfirmBonding:(0,h.kF)(f.z8.ReferralsConfirmBonding),FormattedAmount:l.wx.FormattedAmount,FormattedAmountWithFiatValue:l.wx.FormattedAmountWithFiatValue,InfoLine:l.wx.InfoLine,TokenAddress:l.wx.TokenAddress}})],b);var p=b,B=p,F=r(1001),x=(0,F.Z)(B,o,a,!1,null,"0ed34b23",null),v=x.exports}}]);