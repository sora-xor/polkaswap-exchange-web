"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[2610],{2610:function(t,e,r){r.r(e),r.d(e,{default:function(){return F}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"history-container"},[r("s-card",{directives:[{name:"loading",rawName:"v-loading",value:t.parentLoading,expression:"parentLoading"}],staticClass:"history-content",attrs:{"border-radius":"medium",shadow:"always",primary:""}},[r("generic-page-header",{attrs:{"has-button-back":"",title:t.t("bridgeHistory.title")},on:{back:t.handleBack}}),r("s-form",{staticClass:"history-form",attrs:{"show-message":!1}},[t.history.length?r("search-input",{staticClass:"history--search",attrs:{placeholder:t.t("bridgeHistory.filterPlaceholder"),autofocus:""},on:{clear:t.handleResetSearch},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}):t._e(),r("div",{staticClass:"history-items"},[t.hasHistory?t._l(t.filteredHistoryItems,(function(e){return r("div",{key:"history-"+e.id,staticClass:"history-item",on:{click:function(r){return t.showHistory(e.id)}}},[r("div",{staticClass:"history-item-info"},[r("div",{staticClass:"history-item-title p4"},[r("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(e),"asset-symbol":e.symbol}}),r("i",{class:"s-icon--network s-icon-"+(t.isOutgoingType(e.type)?"sora":t.getEvmIcon(e.externalNetwork))}),r("span",{staticClass:"history-item-title-separator"},[t._v(" "+t._s(t.t("bridgeTransaction.for"))+" ")]),r("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(e),"asset-symbol":e.symbol}}),r("i",{class:"s-icon--network s-icon-"+(t.isOutgoingType(e.type)?t.getEvmIcon(e.externalNetwork):"sora")})],1),r("div",{staticClass:"history-item-date"},[t._v(t._s(t.formatHistoryDate(e)))])]),r("div",{class:t.historyStatusClasses(e)},[r("div",{staticClass:"history-item-status-text"},[t._v(t._s(t.historyStatusText(e)))]),r("s-icon",{staticClass:"history-item-status-icon",attrs:{name:t.historyStatusIconName(e),size:"16"}})],1)])})):r("p",{staticClass:"history-empty p4"},[t._v(t._s(t.t("bridgeHistory.empty")))])],2),t.hasHistory?r("s-pagination",{attrs:{layout:"total, prev, next","current-page":t.currentPage,"page-size":t.pageAmount,total:t.filteredHistory.length},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"prev-click":t.handlePrevClick,"next-click":t.handleNextClick}}):t._e()],1)],1)],1)},i=[],a=r(55005),n=r(33722),o=r(41067),u=r(1379),c=r(7178),l=r(46108),d=r(55427),h=r(34563),y=(r(35666),r(92222),r(2707),r(73210),r(4480),r(26699),r(32023),r(69826),r(69600),r(70655)),m=r(53545),g=r(8638),v=r(36930),f=r(32806),p=r(63280),k=r(12759),w=r(41468),x=r(80710),H=r(16546),b=r(74614),A=r(28335),C=function(t){(0,l.Z)(r,t);var e=(0,d.Z)(r);function r(){var t;(0,o.Z)(this,r);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i)),(0,h.Z)((0,c.Z)(t),"registeredAssets",void 0),(0,h.Z)((0,c.Z)(t),"updateHistory",void 0),(0,h.Z)((0,c.Z)(t),"pageAmount",8),t}return(0,u.Z)(r,[{key:"filteredHistory",get:function(){var t;if(null===(t=this.history)||void 0===t||!t.length)return[];var e=(0,n.Z)(this.history).sort((function(t,e){return t.startTime&&e.startTime?e.startTime-t.startTime:0}));return this.getFilteredHistory(e)}},{key:"hasHistory",get:function(){return this.filteredHistory&&this.filteredHistory.length>0}},{key:"filteredHistoryItems",get:function(){return this.getPageItems(this.filteredHistory)}},{key:"created",value:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.withParentLoading((0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setHistory(),t.next=3,e.updateHistory();case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFilteredHistory",value:function(t){var e=this;if(this.query){var r=this.query.toLowerCase().trim();return t.filter((function(t){var s;return"".concat(t.assetAddress).toLowerCase().includes(r)||"".concat(null===(s=e.registeredAssets.find((function(e){return e.address===t.assetAddress})))||void 0===s?void 0:s.externalAddress).toLowerCase().includes(r)||"".concat(t.symbol).toLowerCase().includes(r)}))}return t}},{key:"formatAmount",value:function(t){var e,r;if(!t.amount)return"";var s=null===(e=this.registeredAssets)||void 0===e||null===(r=e.find((function(e){return e.address===t.address})))||void 0===r?void 0:r.decimals;return this.formatStringValue(t.amount,s)}},{key:"formatHistoryDate",value:function(t){var e;return this.formatDate(null!==(e=null===t||void 0===t?void 0:t.startTime)&&void 0!==e?e:Date.now())}},{key:"isWaitingForAction",value:function(t){return t.status===v.BridgeTxStatus.Failed&&(0,A.rz)(t)}},{key:"historyStatusClasses",value:function(t){var e="history-item-status",r=[e];return this.isWaitingForAction(t)?r.push("".concat(e,"--warning")):t.status===v.BridgeTxStatus.Failed?r.push("".concat(e,"--error")):t.status===v.BridgeTxStatus.Done?r.push("".concat(e,"--success")):r.push("".concat(e,"--pending")),r.join(" ")}},{key:"historyStatusIconName",value:function(t){return this.isWaitingForAction(t)?"notifications-alert-triangle-24":t.status===v.BridgeTxStatus.Failed?"basic-clear-X-24":t.status===v.BridgeTxStatus.Done?"basic-check-marks-24":"time-time-24"}},{key:"historyStatusText",value:function(t){return this.isWaitingForAction(t)?this.t("bridgeHistory.statusAction"):""}},{key:"handleBack",value:function(){x.ZP.push({name:H.sn.Bridge})}},{key:"handleResetSearch",value:function(){this.resetPage(),this.resetSearch()}}]),r}((0,m.Wr)(f.Z,p.Z,k.Z,w.Z,g.tA.PaginationSearchMixin,g.tA.NumberFormatterMixin));(0,y.__decorate)([b.SB.assets.registeredAssets],C.prototype,"registeredAssets",void 0),(0,y.__decorate)([b.aD.bridge.updateHistory],C.prototype,"updateHistory",void 0),C=(0,y.__decorate)([(0,m.wA)({components:{GenericPageHeader:(0,x.kF)(H.z8.GenericPageHeader),SearchInput:g.wx.SearchInput,FormattedAmount:g.wx.FormattedAmount}})],C);var _=C,S=_,Z=r(1001),T=(0,Z.Z)(S,s,i,!1,null,"d4075d08",null),F=T.exports}}]);