"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[6],{90006:function(e,t,i){i.r(t),i.d(t,{default:function(){return L}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container container--remove-liquidity"},[i("generic-page-header",{attrs:{"has-button-back":"",title:e.t("removeLiquidity.title"),tooltip:e.t("removeLiquidity.description")},on:{back:e.handleBack}}),i("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[i("s-float-input",{ref:"removePart",class:["s-input--token-value","s-input--remove-part",e.removePartCharClass],attrs:{size:"medium",value:String(e.removePartInput),decimals:0,max:100},on:{input:e.handleRemovePartChange,focus:function(t){return e.setFocusedField("removePart")},blur:e.resetFocusedField}},[i("div",{staticClass:"amount",attrs:{slot:"top"},slot:"top"},[e._v(e._s(e.t("removeLiquidity.amount")))]),i("div",{attrs:{slot:"right"},slot:"right"},[i("span",{staticClass:"percent"},[e._v("%")])]),i("s-slider",{staticClass:"slider-container",attrs:{slot:"bottom",value:e.removePartInput,showTooltip:!1},on:{change:e.handleRemovePartChange},slot:"bottom"})],1),i("s-icon",{staticClass:"icon-divider",attrs:{name:"arrows-arrow-bottom-24"}}),i("s-float-input",{ref:"firstTokenAmount",staticClass:"s-input--token-value",attrs:{size:"medium",value:e.firstTokenAmount,decimals:(e.firstToken||{}).decimals,"has-locale-string":"",delimiters:e.delimiters,max:e.getTokenMaxAmount(e.firstTokenBalance)},on:{input:function(t){return e.handleTokenChange(t,e.setFirstTokenAmount)},focus:function(t){return e.setFocusedField("firstTokenAmount")},blur:e.resetFocusedField}},[i("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"input-title"},[i("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(e._s(e.t("removeLiquidity.output")))])]),e.liquidity?i("div",{staticClass:"input-title"},[e._v("-")]):e._e()]),i("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[i("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.firstToken}})],1),i("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.firstToken?i("token-address",{staticClass:"input-value",attrs:{name:e.firstToken.name,symbol:e.firstToken.symbol,address:e.firstToken.address}}):e._e()],1)]),i("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}),i("s-float-input",{ref:"secondTokenAmount",staticClass:"s-input--token-value",attrs:{size:"medium",value:e.secondTokenAmount,decimals:(e.secondToken||{}).decimals,"has-locale-string":"",delimiters:e.delimiters,max:e.getTokenMaxAmount(e.secondTokenBalance)},on:{input:function(t){return e.handleTokenChange(t,e.setSecondTokenAmount)},focus:function(t){return e.setFocusedField("secondTokenAmount")},blur:e.resetFocusedField}},[i("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"input-title"},[i("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(e._s(e.t("removeLiquidity.output")))])]),e.liquidity?i("div",{staticClass:"input-title"},[e._v("-")]):e._e()]),i("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[i("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.secondToken}})],1),i("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.secondToken?i("token-address",{staticClass:"input-value",attrs:{name:e.secondToken.name,symbol:e.secondToken.symbol,address:e.secondToken.address}}):e._e()],1)]),i("slippage-tolerance",{staticClass:"slippage-tolerance-settings"}),i("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary","border-radius":"small",disabled:e.isEmptyAmount||e.isInsufficientBalance||e.isInsufficientXorForFee},on:{click:e.handleRemoveLiquidity}},[e.isEmptyAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.t("removeLiquidity.liquidity")}))+" ")]:e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.XOR_SYMBOL}))+" ")]:[e._v(" "+e._s(e.t("removeLiquidity.remove"))+" ")]],2),e.price||e.priceReversed||e.networkFee||e.shareOfPool?i("remove-liquidity-transaction-details",{staticClass:"info-line-container",attrs:{"info-only":!1}}):e._e()],1),i("confirm-remove-liquidity",{attrs:{visible:e.showConfirmDialog,"parent-loading":e.parentLoading},on:{"update:visible":function(t){e.showConfirmDialog=t},confirm:e.handleConfirmRemoveLiquidity}}),i("network-fee-warning-dialog",{attrs:{visible:e.showWarningFeeDialog,fee:e.formattedFee},on:{"update:visible":function(t){e.showWarningFeeDialog=t},confirm:e.confirmNetworkFeeWariningDialog}})],1)},n=[],r=i(55005),s=i(41067),a=i(1379),u=i(7178),d=i(46108),c=i(55427),l=i(34563),m=(i(35666),i(92222),i(9653),i(35192),i(41539),i(39714),i(68309),i(70655)),v=i(53545),p=i(8638),h=i(36930),f=i(82753),k=i(68850),y=i(2591),g=i(80710),F=i(16546),T=i(85530),_=i(74614),Z=function(e){(0,d.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;(0,s.Z)(this,i);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n)),(0,l.Z)((0,u.Z)(e),"XOR_SYMBOL",f.XOR.symbol),(0,l.Z)((0,u.Z)(e),"delimiters",h.FPNumber.DELIMITERS_CONFIG),(0,l.Z)((0,u.Z)(e),"liquidityAmount",void 0),(0,l.Z)((0,u.Z)(e),"focusedField",void 0),(0,l.Z)((0,u.Z)(e),"firstTokenAmount",void 0),(0,l.Z)((0,u.Z)(e),"secondTokenAmount",void 0),(0,l.Z)((0,u.Z)(e),"removePart",void 0),(0,l.Z)((0,u.Z)(e),"price",void 0),(0,l.Z)((0,u.Z)(e),"priceReversed",void 0),(0,l.Z)((0,u.Z)(e),"xor",void 0),(0,l.Z)((0,u.Z)(e),"liquidityBalance",void 0),(0,l.Z)((0,u.Z)(e),"liquidity",void 0),(0,l.Z)((0,u.Z)(e),"firstToken",void 0),(0,l.Z)((0,u.Z)(e),"secondToken",void 0),(0,l.Z)((0,u.Z)(e),"firstTokenBalance",void 0),(0,l.Z)((0,u.Z)(e),"secondTokenBalance",void 0),(0,l.Z)((0,u.Z)(e),"shareOfPool",void 0),(0,l.Z)((0,u.Z)(e),"setFocusedField",void 0),(0,l.Z)((0,u.Z)(e),"resetFocusedField",void 0),(0,l.Z)((0,u.Z)(e),"setRemovePart",void 0),(0,l.Z)((0,u.Z)(e),"setLiquidity",void 0),(0,l.Z)((0,u.Z)(e),"removeLiquidity",void 0),(0,l.Z)((0,u.Z)(e),"resetData",void 0),(0,l.Z)((0,u.Z)(e),"setFirstTokenAmount",void 0),(0,l.Z)((0,u.Z)(e),"setSecondTokenAmount",void 0),(0,l.Z)((0,u.Z)(e),"resetPrices",void 0),(0,l.Z)((0,u.Z)(e),"getPrices",void 0),(0,l.Z)((0,u.Z)(e),"removePartInput",0),(0,l.Z)((0,u.Z)(e),"sliderInput",void 0),(0,l.Z)((0,u.Z)(e),"sliderDragButton",void 0),e}return(0,a.Z)(i,[{key:"removePartChange",value:function(e){this.handleRemovePartChange(String(e))}},{key:"liquidityChange",value:function(){switch(this.updatePrices(),this.focusedField){case"firstTokenAmount":case"secondTokenAmount":var e="firstTokenAmount"===this.focusedField,t=Number(this.getTokenMaxAmount(e?this.firstTokenBalance:this.secondTokenBalance)),i=Number(e?this.firstTokenAmount:this.secondTokenAmount),o=e?this.setFirstTokenAmount:this.setSecondTokenAmount,n=String(Number.isFinite(t)?Math.min(t,i):i);o(n);break;default:this.handleRemovePartChange(String(this.removePart));break}}},{key:"mounted",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.withParentLoading((0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.setLiquidity({firstAddress:t.firstTokenAddress,secondAddress:t.secondTokenAddress});case 2:if(t.liquidity){e.next=4;break}return e.abrupt("return",t.handleBack());case 4:t.updatePrices(),t.addListenerToSliderDragButton();case 6:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){this.removeListenerFromSliderDragButton(),this.resetData(),this.resetPrices()}},{key:"firstTokenAddress",get:function(){return this.$route.params.firstAddress}},{key:"secondTokenAddress",get:function(){return this.$route.params.secondAddress}},{key:"isEmptyAmount",get:function(){return!this.removePart||!this.liquidityAmount||!this.firstTokenAmount||!this.secondTokenAmount}},{key:"isInsufficientBalance",get:function(){var e=this.getFPNumberFromCodec(this.liquidityBalance),t=this.getFPNumberFromCodec(this.firstTokenBalance),i=this.getFPNumberFromCodec(this.secondTokenBalance),o=this.getFPNumber(this.liquidityAmount),n=this.getFPNumber(this.firstTokenAmount),r=this.getFPNumber(this.secondTokenAmount);return h.FPNumber.gt(o,e)||h.FPNumber.gt(n,t)||h.FPNumber.gt(r,i)}},{key:"isInsufficientXorForFee",get:function(){return!!this.xor&&(0,T.LG)(this.xor,this.networkFee)}},{key:"removePartCharClass",get:function(){var e,t=null!==(e={3:"three",2:"two"}[this.removePartInput.toString().length])&&void 0!==e?e:"one";return"".concat(t,"-char")}},{key:"networkFee",get:function(){return this.networkFees[h.Operation.RemoveLiquidity]}},{key:"formattedFee",get:function(){return this.formatCodecNumber(this.networkFee)}},{key:"isXorSufficientForNextOperation",get:function(){return this.isXorSufficientForNextTx({type:h.Operation.RemoveLiquidity})}},{key:"handleRemovePartChange",value:function(e){var t=parseFloat(e)||0;this.removePartInput=Math.min(Math.max(t,0),100),this.setRemovePart(this.removePartInput)}},{key:"focusSliderInput",value:function(){this.setFocusedField("removePart"),this.sliderInput&&this.sliderInput.focus()}},{key:"getTokenMaxAmount",value:function(e,t){if(e)return this.getStringFromCodec(e,t)}},{key:"updatePrices",value:function(){var e,t,i=this.getFPNumberFromCodec(this.firstTokenBalance),o=this.getFPNumberFromCodec(this.secondTokenBalance);this.getPrices({assetAAddress:null!==(e=this.firstTokenAddress)&&void 0!==e?e:this.firstToken.address,assetBAddress:null!==(t=this.secondTokenAddress)&&void 0!==t?t:this.secondToken.address,amountA:i.toString(),amountB:o.toString()})}},{key:"handleTokenChange",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"handleConfirmRemoveLiquidity",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleConfirmDialog((0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.withNotifications(t.removeLiquidity);case 2:t.handleBack();case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleBack",value:function(){g.ZP.currentRoute.name===F.sn.RemoveLiquidity&&g.ZP.push({name:F.sn.Pool})}},{key:"handleRemoveLiquidity",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isXorSufficientForNextOperation){e.next=7;break}return this.openWarningFeeDialog(),e.next=4,this.waitOnNextTxFailureConfirmation();case 4:if(this.isWarningFeeDialogConfirmed){e.next=6;break}return e.abrupt("return");case 6:this.isWarningFeeDialogConfirmed=!1;case 7:this.openConfirmDialog();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addListenerToSliderDragButton",value:function(){this.sliderDragButton=this.$el.querySelector(".slider-container .el-slider__button"),this.sliderInput=this.$el.querySelector(".s-input--remove-part .el-input__inner"),this.sliderDragButton&&this.sliderDragButton.addEventListener("mousedown",this.focusSliderInput)}},{key:"removeListenerFromSliderDragButton",value:function(){this.sliderDragButton&&this.$el.removeEventListener("mousedown",this.sliderDragButton)}}]),i}((0,v.Wr)(p.tA.NetworkFeeWarningMixin,p.tA.FormattedAmountMixin,p.tA.TransactionMixin,k.Z,y.Z));(0,m.__decorate)([_.SB.removeLiquidity.liquidityAmount],Z.prototype,"liquidityAmount",void 0),(0,m.__decorate)([_.SB.removeLiquidity.focusedField],Z.prototype,"focusedField",void 0),(0,m.__decorate)([_.SB.removeLiquidity.firstTokenAmount],Z.prototype,"firstTokenAmount",void 0),(0,m.__decorate)([_.SB.removeLiquidity.secondTokenAmount],Z.prototype,"secondTokenAmount",void 0),(0,m.__decorate)([_.SB.removeLiquidity.removePart],Z.prototype,"removePart",void 0),(0,m.__decorate)([_.SB.prices.price],Z.prototype,"price",void 0),(0,m.__decorate)([_.SB.prices.priceReversed],Z.prototype,"priceReversed",void 0),(0,m.__decorate)([_.Yn.assets.xor],Z.prototype,"xor",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.liquidityBalance],Z.prototype,"liquidityBalance",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.liquidity],Z.prototype,"liquidity",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.firstToken],Z.prototype,"firstToken",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.secondToken],Z.prototype,"secondToken",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.firstTokenBalance],Z.prototype,"firstTokenBalance",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.secondTokenBalance],Z.prototype,"secondTokenBalance",void 0),(0,m.__decorate)([_.Yn.removeLiquidity.shareOfPool],Z.prototype,"shareOfPool",void 0),(0,m.__decorate)([_.QF.removeLiquidity.setFocusedField],Z.prototype,"setFocusedField",void 0),(0,m.__decorate)([_.QF.removeLiquidity.resetFocusedField],Z.prototype,"resetFocusedField",void 0),(0,m.__decorate)([_.aD.removeLiquidity.setRemovePart],Z.prototype,"setRemovePart",void 0),(0,m.__decorate)([_.aD.removeLiquidity.setLiquidity],Z.prototype,"setLiquidity",void 0),(0,m.__decorate)([_.aD.removeLiquidity.removeLiquidity],Z.prototype,"removeLiquidity",void 0),(0,m.__decorate)([_.aD.removeLiquidity.resetData],Z.prototype,"resetData",void 0),(0,m.__decorate)([_.aD.removeLiquidity.setFirstTokenAmount],Z.prototype,"setFirstTokenAmount",void 0),(0,m.__decorate)([_.aD.removeLiquidity.setSecondTokenAmount],Z.prototype,"setSecondTokenAmount",void 0),(0,m.__decorate)([_.QF.prices.resetPrices],Z.prototype,"resetPrices",void 0),(0,m.__decorate)([_.aD.prices.getPrices],Z.prototype,"getPrices",void 0),(0,m.__decorate)([(0,v.RL)("removePart")],Z.prototype,"removePartChange",null),(0,m.__decorate)([(0,v.RL)("liquidity")],Z.prototype,"liquidityChange",null),Z=(0,m.__decorate)([(0,v.wA)({components:{GenericPageHeader:(0,g.kF)(F.z8.GenericPageHeader),SlippageTolerance:(0,g.kF)(F.z8.SlippageTolerance),ConfirmRemoveLiquidity:(0,g.kF)(F.z8.ConfirmRemoveLiquidity),NetworkFeeWarningDialog:(0,g.kF)(F.z8.NetworkFeeWarningDialog),RemoveLiquidityTransactionDetails:(0,g.kF)(F.z8.RemoveLiquidityTransactionDetails),TokenSelectButton:(0,g.kF)(F.z8.TokenSelectButton),InfoLine:p.wx.InfoLine,TokenAddress:p.wx.TokenAddress}})],Z);var q=Z,A=q,b=i(1001),C=(0,b.Z)(A,o,n,!1,null,"23580c5c",null),L=C.exports}}]);