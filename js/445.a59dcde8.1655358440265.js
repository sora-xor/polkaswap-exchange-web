"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[445],{30445:function(e,t,d){d.r(t),d.d(t,{default:function(){return L}});var o=function(){var e=this,t=e.$createElement,d=e._self._c||t;return d("dialog-base",{class:["select-node-dialog",e.dialogCustomClass],attrs:{visible:e.visibility,title:e.t("selectNodeDialog.title")},on:{"update:visible":function(t){e.visibility=t}}},[e.isNodeListView?d("select-node",{attrs:{nodes:e.formattedNodeList,"handle-node":e.navigateToNodeInfo,environment:e.soraNetwork,"disable-select":!e.nodeConnectionAllowance},model:{value:e.connectedNodeAddress,callback:function(t){e.connectedNodeAddress=t},expression:"connectedNodeAddress"}}):d("node-info",{attrs:{node:e.selectedNode,existing:e.existingNodeIsSelected,loading:e.isSelectedNodeLoading,removable:e.isSelectedNodeRemovable,connected:e.isSelectedNodeConnected,"handle-back":e.handleBack,"handle-node":e.handleNode,"remove-node":e.removeNode}})],1)},s=[],i=d(34563),n=d(70655),a=d(4588),r=d.n(a),c=d(53545),l=d(8638),N=d(80710),h=d(16546),u=d(14692),g=d(54643),v=d(74614),f=d(46621),m=d(44372);const p="NodeListView",C="NodeInfoView";let w=class extends((0,c.Wr)(f.Z,l.tA.LoadingMixin)){constructor(...e){super(...e),(0,i.Z)(this,"defaultNodes",void 0),(0,i.Z)(this,"nodeAddressConnecting",void 0),(0,i.Z)(this,"selectNodeDialogVisibility",void 0),(0,i.Z)(this,"nodeConnectionAllowance",void 0),(0,i.Z)(this,"soraNetwork",void 0),(0,i.Z)(this,"nodeList",void 0),(0,i.Z)(this,"connectToNode",void 0),(0,i.Z)(this,"addCustomNode",void 0),(0,i.Z)(this,"updateCustomNode",void 0),(0,i.Z)(this,"removeCustomNode",void 0),(0,i.Z)(this,"currentView",p),(0,i.Z)(this,"selectedNode",{})}get visibility(){return this.selectNodeDialogVisibility}set visibility(e){this.setSelectNodeDialogVisibility(e),e||this.handleBack()}get connectedNodeAddress(){return this.node?.address??""}set connectedNodeAddress(e){if(e===this.node.address)return;const t=this.findNodeInListByAddress(e);this.handleNode(t)}get isSelectedNodeRemovable(){return!this.defaultNodes.find((e=>e.address===this.selectedNode?.address))}get isSelectedNodeLoading(){return!this.nodeConnectionAllowance||this.isConnectingNode(this.selectedNode)}get isSelectedNodeConnected(){return this.isConnectedNodeAddress(this.selectedNode?.address)}get existingNodeIsSelected(){return!!this.findNodeInListByAddress(this.selectedNode?.address??"")}get isNodeListView(){return this.currentView===p}get formattedNodeList(){return this.nodeList.map((e=>this.formatNode(e)))}get dialogCustomClass(){return this.isNodeListView?"":"select-node-dialog--add-node"}async handleNode(e,t=!1){try{await this.setCurrentNode(e,t),this.selectedNode.address===e.address&&this.currentView===C&&this.handleBack()}catch(d){}}async removeNode(e){this.removeCustomNode(e),this.handleBack(),this.isConnectedNodeAddress(e.address)&&await this.setCurrentNode(this.defaultNodes[0])}navigateToNodeInfo(e){this.selectedNode=e||{},this.changeView(C)}handleBack(){this.changeView(p)}getNodePermittedData(e){return r()(Object.keys(u.X))(e)}async setCurrentNode(e,t=!1){const d=this.getNodePermittedData(e);if(t){const e=this.findInList(this.defaultNodes,d.address);if(e){const t=this.formatNode(e),d=new g.x({key:"node.errors.existing",payload:{title:t.title}});return this.handleNodeError(d)}}if(d.address!==this.connectedNodeAddress&&await this.connectToNode({node:d,onError:e=>this.handleNodeError(e,!t),onDisconnect:this.handleNodeDisconnect,onReconnect:this.handleNodeReconnect}),t){const e=this.findNodeInListByAddress(d.address),t=this.selectedNode.address||e?.address;t?this.updateCustomNode({address:t,node:d}):this.addCustomNode(d)}this.selectedNode=this.findNodeInListByAddress(d.address)}formatNode(e){return{...e,title:e.name&&e.chain?this.t("selectNodeDialog.nodeTitle",{chain:e.chain,name:e.name}):e.name||e.chain,connecting:this.isConnectingNode(e)}}changeView(e){this.currentView=e}findInList(e,t){return e.find((e=>e.address===t))}findNodeInListByAddress(e){return this.findInList(this.formattedNodeList,e)}isConnectedNodeAddress(e){return!!this.connectedNodeAddress&&this.connectedNodeAddress===e}isConnectingNode(e){return this.nodeAddressConnecting===e?.address}};(0,n.__decorate)([v.SB.settings.defaultNodes],w.prototype,"defaultNodes",void 0),(0,n.__decorate)([v.SB.settings.nodeAddressConnecting],w.prototype,"nodeAddressConnecting",void 0),(0,n.__decorate)([v.SB.settings.selectNodeDialogVisibility],w.prototype,"selectNodeDialogVisibility",void 0),(0,n.__decorate)([v.SB.settings.nodeConnectionAllowance],w.prototype,"nodeConnectionAllowance",void 0),(0,n.__decorate)([v.SB.wallet.settings.soraNetwork],w.prototype,"soraNetwork",void 0),(0,n.__decorate)([v.Yn.settings.nodeList],w.prototype,"nodeList",void 0),(0,n.__decorate)([v.aD.settings.connectToNode],w.prototype,"connectToNode",void 0),(0,n.__decorate)([v.aD.settings.addCustomNode],w.prototype,"addCustomNode",void 0),(0,n.__decorate)([v.aD.settings.updateCustomNode],w.prototype,"updateCustomNode",void 0),(0,n.__decorate)([v.aD.settings.removeCustomNode],w.prototype,"removeCustomNode",void 0),w=(0,n.__decorate)([(0,c.wA)({components:{DialogBase:m["default"],ExternalLink:(0,N.kF)(h.z8.ExternalLink),SelectNode:(0,N.kF)(h.z8.SelectNode),NodeInfo:(0,N.kF)(h.z8.NodeInfo)}})],w);var y=w,_=y,A=d(1001),k=(0,A.Z)(_,o,s,!1,null,null,null),L=k.exports}}]);