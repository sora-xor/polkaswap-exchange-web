"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[293],{70293:function(e,r,t){t.r(r),t.d(r,{default:function(){return Z}});var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"referral-program"},[e.isSoraAccountConnected?[t("div",{staticClass:"rewards-container"},[t("span",{staticClass:"rewards-title"},[e._v(e._s(e.t("referralProgram.receivedRewards")))]),t("token-logo",{attrs:{token:e.xor,size:e.LogoSize.BIGGER}}),t("formatted-amount",{staticClass:"rewards-value",attrs:{"value-can-be-hidden":"","font-size-rate":e.FontSizeRate.SMALL,"symbol-as-decimal":"",value:e.formattedRewards,"asset-symbol":e.xorSymbol}}),e.formattedRewardsFiatValue?t("formatted-amount",{attrs:{"is-fiat-value":"","fiat-default-rounding":"","value-can-be-hidden":"","font-size-rate":e.FontSizeRate.MEDIUM,value:e.formattedRewardsFiatValue,"is-formatted":""}}):e._e()],1),e.hasAccountWithBondedXor?[e.isInsufficientBondedAmount?t("div",{staticClass:"referral-insufficient-bonded-amount"},[e._v(" "+e._s(e.t("referralProgram.insufficientBondedAmount",{inviteUserFee:e.inviteUserFee}))+" ")]):t("s-card",{staticClass:"referral-link-container",attrs:{shadow:"always",size:"small","border-radius":"medium"}},[t("div",{staticClass:"referral-link-details"},[t("div",{staticClass:"referral-link-label"},[e._v(e._s(e.t("referralProgram.invitationLink")))]),t("div",{staticClass:"referral-link",domProps:{innerHTML:e._s(e.referralLink.label)}})]),t("s-button",{staticClass:"s-typography-button--mini",attrs:{size:"small",type:"primary",tooltip:e.copyTooltip(e.t("referralProgram.invitationLink"))},on:{click:function(r){return e.handleCopyAddress(e.referralLink.href,r)}}},[e._v(" "+e._s(e.t("referralProgram.action.copyLink"))+" "),t("s-icon",{attrs:{name:"copy-16",size:"16"}})],1)],1)]:e._e(),t("s-collapse",{attrs:{borders:!0}},[t("s-collapse-item",{class:e.bondedContainerClasses,attrs:{disabled:!e.hasAccountWithBondedXor,name:"bondedXOR"},scopedSlots:e._u([e.hasAccountWithBondedXor?{key:"title",fn:function(){return[t("token-logo",{attrs:{token:e.xor}}),t("h3",{staticClass:"bonded-collapse-title"},[e._v(e._s(e.t("referralProgram.bondedXOR")))])]},proxy:!0}:null],null,!0)},[e.hasAccountWithBondedXor?e._e():t("div",{staticClass:"unbonded-info"},[t("token-logo",{attrs:{token:e.xor}}),t("p",{staticClass:"referral-program-hint referral-program-hint--connected",domProps:{innerHTML:e._s(e.t("referralProgram.startInviting"))}})],1),t("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:e.t("referralProgram.bondedXOR"),value:e.formattedBondedXorBalance,"fiat-value":e.formattedBondedXorFiatValue}}),t("div",{staticClass:"bonded--buttons"},[t("s-button",{staticClass:"s-typography-button--medium",attrs:{type:e.bondButtonType},on:{click:function(r){return e.handleBonding(!0)}}},[e._v(" "+e._s(e.t("referralProgram.action.bondMore"))+" ")]),e.hasAccountWithBondedXor?t("s-button",{staticClass:"s-typography-button--medium",attrs:{type:"secondary"},on:{click:function(r){return e.handleBonding()}}},[e._v(" "+e._s(e.t("referralProgram.action.unbond"))+" ")]):e._e()],1)],1),e.invitedUsersCount?t("s-collapse-item",{staticClass:"invited-users-container",attrs:{name:"invitedUsers"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"invited-users-icon"}),t("h3",{staticClass:"invited-users-collapse-title"},[e._v(" "+e._s(e.t("referralProgram.referralsNumber",{number:e.invitedUsersCount}))+" ")])]},proxy:!0}],null,!1,1546159244)},[e.invitedUsersCount?[t("div",{class:e.invitedUsersClasses},e._l(e.filteredInvitedUsers,(function(r){return t("info-line",{key:r,attrs:{"value-can-be-hidden":"",value:e.getInvitedUserReward(r),"asset-symbol":e.xorSymbol,"is-formatted":""},scopedSlots:e._u([{key:"info-line-prefix",fn:function(){return[t("s-tooltip",{attrs:{content:e.copyTooltip(e.t("transaction.referral"))}},[t("span",{staticClass:"info-line-address",on:{click:function(t){return e.handleCopyAddress(r,t)}}},[e._v(" "+e._s(e.formatReferralAddress(r))+" ")])])]},proxy:!0}],null,!0)})})),1),e.hasMultipleInvitedUsersPages?t("s-pagination",{attrs:{layout:"total, prev, next","current-page":e.currentPage,"page-size":e.pageAmount,total:e.invitedUsersCount},on:{"update:currentPage":function(r){e.currentPage=r},"update:current-page":function(r){e.currentPage=r},"prev-click":e.handlePrevClick,"next-click":e.handleNextClick}}):e._e()]:e._e()],2):e._e(),t("s-collapse-item",{staticClass:"referrer-link-container",attrs:{name:"referrer"},scopedSlots:e._u([{key:"title",fn:function(){return[e.referrer?t("WalletAvatar",{staticClass:"referrer-icon",attrs:{size:32,address:e.referrer}}):e._e(),t("h3",{staticClass:"referrer-collapse-title"},[e._v(" "+e._s(e.t("referralProgram.referrer."+(e.referrer?"titleReferrer":"title")))+" ")])]},proxy:!0}],null,!1,3479973179)},[e.referrer?[t("h5",[e._v(e._s(e.t("referralProgram.referrer.referredBy",{referrer:e.referrerFormatted})))]),t("p",{staticClass:"referrer-description",domProps:{innerHTML:e._s(e.t("referralProgram.referrer.info"))}})]:[t("div",{staticClass:"referrer-link-details"},[t("s-input",{staticClass:"referrer-link-code",attrs:{placeholder:e.t("referralProgram.referrer."+(e.isReferrerLinkEmpty?"placeholder":"label"))},scopedSlots:e._u([{key:"right",fn:function(){return[e.isReferrerLinkEmpty?e._e():t("s-button",{staticClass:"s-typography-button--mini s-button--approve",attrs:{size:"small",type:"primary",disabled:!e.isValidReferrerLink||e.isReferrerApproved},on:{click:function(r){return r.stopPropagation(),e.handleSetReferrer.apply(null,arguments)}}},[e._v(" "+e._s(e.t("referralProgram.referrer."+(e.isReferrerApproved?"approved":"approve")))+" ")])]},proxy:!0}],null,!1,247624632),model:{value:e.referrerLinkOrCode,callback:function(r){e.referrerLinkOrCode=r},expression:"referrerLinkOrCode"}})],1),t("p",{staticClass:"referrer-description",domProps:{innerHTML:e._s(e.t("referralProgram.referrer.description"))}})],e.referrer?t("s-card",{attrs:{shadow:"always",size:"small","border-radius":"medium"}},[t("div",{staticClass:"referrer-link-details"},[t("div",{staticClass:"referral-link-label"},[e._v(e._s(e.t("referralProgram.referrer.referredLablel")))]),t("div",{staticClass:"referral-link",domProps:{innerHTML:e._s(e.referrerLink.label)}})])]):e._e()],2)],1)]:[t("p",{staticClass:"referral-program-hint",domProps:{innerHTML:e._s(e.t("referralProgram.connectAccount"))}}),e.loading||e.isSoraAccountConnected?e._e():t("s-button",{staticClass:"connect-button s-typography-button--large",attrs:{type:"primary"},on:{click:e.handleConnect}},[e._v(" "+e._s(e.t("referralProgram.action.connectWallet"))+" ")])]],2)},s=[],i=t(55005),a=t(41067),o=t(1379),d=t(7178),l=t(46108),c=t(55427),u=t(34563),f=(t(35666),t(92222),t(73210),t(74916),t(23123),t(70655)),p=t(52151),v=t.n(p),h=t(53545),m=t(8638),g=t(82753),b=t(36930),k=t(80710),y=t(16546),_=t(20439),C=t(85530),R=t(10909),A=t(74614),w=function(e){(0,l.Z)(t,e);var r=(0,c.Z)(t);function t(){var e;(0,a.Z)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e=r.call.apply(r,[this].concat(s)),(0,u.Z)((0,d.Z)(e),"LogoSize",y.eT),(0,u.Z)((0,d.Z)(e),"referrerLinkOrCode",""),(0,u.Z)((0,d.Z)(e),"referrerHasApproved",!1),(0,u.Z)((0,d.Z)(e),"pageAmount",5),(0,u.Z)((0,d.Z)(e),"invitedUsers",void 0),(0,u.Z)((0,d.Z)(e),"referrer",void 0),(0,u.Z)((0,d.Z)(e),"isReferrerApproved",void 0),(0,u.Z)((0,d.Z)(e),"xor",void 0),(0,u.Z)((0,d.Z)(e),"account",void 0),(0,u.Z)((0,d.Z)(e),"reset",void 0),(0,u.Z)((0,d.Z)(e),"unsubscribeFromInvitedUsers",void 0),(0,u.Z)((0,d.Z)(e),"setStorageReferrer",void 0),(0,u.Z)((0,d.Z)(e),"subscribeOnInvitedUsers",void 0),(0,u.Z)((0,d.Z)(e),"getReferrer",void 0),(0,u.Z)((0,d.Z)(e),"subscribeOnReferrer",void 0),(0,u.Z)((0,d.Z)(e),"resetReferrerSubscription",void 0),e}return(0,o.Z)(t,[{key:"updateSubscriptions",value:function(){var e=(0,i.Z)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}if(!this.isSoraAccountConnected){e.next=10;break}return e.next=4,this.subscribeOnInvitedUsers();case 4:return e.next=6,this.getAccountReferralRewards();case 6:return e.next=8,this.getReferrer();case 8:return e.next=10,this.subscribeOnReferrer();case 10:e.next=14;break;case 12:this.unsubscribeFromInvitedUsers(),this.resetReferrerSubscription();case 14:case"end":return e.stop()}}),e,this)})));function r(r){return e.apply(this,arguments)}return r}()},{key:"isPriceAvailable",get:function(){return!!this.getAssetFiatPrice(g.XOR)}},{key:"xorSymbol",get:function(){return g.XOR.symbol}},{key:"formattedRewards",get:function(){var e;return(null===(e=this.referralRewards)||void 0===e?void 0:e.rewards.toLocaleString())||y.m8}},{key:"formattedRewardsFiatValue",get:function(){var e;return null!==(e=this.referralRewards)&&void 0!==e&&e.rewards?this.getFiatAmountByFPNumber(this.referralRewards.rewards):null}},{key:"invitedUserRewards",get:function(){var e;return null===(e=this.referralRewards)||void 0===e?void 0:e.invitedUserRewards}},{key:"bondedXorCodecBalance",get:function(){var e,r,t;return null!==(e=null===(r=this.xor)||void 0===r||null===(t=r.balance)||void 0===t?void 0:t.bonded)&&void 0!==e?e:""}},{key:"inviteUserFee",get:function(){return this.formatCodecNumber(this.networkFees.ReferralSetInvitedUser)}},{key:"isInsufficientBondedAmount",get:function(){return!!this.bondedXorCodecBalance&&b.FPNumber.gt(this.getFPNumberFromCodec(this.networkFees.ReferralSetInvitedUser),this.getFPNumberFromCodec(this.bondedXorCodecBalance))}},{key:"formattedBondedXorBalance",get:function(){return this.bondedXorCodecBalance?this.formatCodecNumber(this.bondedXorCodecBalance):y.m8}},{key:"formattedBondedXorFiatValue",get:function(){return this.bondedXorCodecBalance?this.getFiatAmountByCodecString(this.bondedXorCodecBalance):null}},{key:"invitedUsersCount",get:function(){return this.invitedUsers.length}},{key:"invitedUsersClasses",get:function(){var e="invited-users-list",r=[e];return this.hasMultipleInvitedUsersPages&&r.push("".concat(e,"--multiple-pages")),r}},{key:"routerMode",get:function(){return"hash"===k.ZP.mode?"#/":""}},{key:"linkHrefBase",get:function(){return"".concat((0,_.Np)(k.ZP)).concat(this.routerMode,"referral/")}},{key:"referralLink",get:function(){return{href:"".concat(this.linkHrefBase).concat(this.account.address),label:this.getLinkLabel(this.account.address)}}},{key:"hasAccountWithBondedXor",get:function(){return this.account&&+this.bondedXorCodecBalance>0}},{key:"bondedContainerClasses",get:function(){var e="bonded-container",r=[e];return this.hasAccountWithBondedXor||(r.push("is-active"),r.push("".concat(e,"--visible-content"))),r}},{key:"isReferrerLinkEmpty",get:function(){return!this.referrerLinkOrCode.trim()}},{key:"referrerFormatted",get:function(){return this.referrer?(0,C.Tg)(this.referrer,8):""}},{key:"referrerAddress",get:function(){var e;return this.referrer?this.referrer:null!==(e=v()(this.referrerLinkOrCode.split("/")))&&void 0!==e?e:""}},{key:"isValidReferrerLink",get:function(){var e;return!this.isReferrerLinkEmpty&&(!(!m.hi.validateAddress(this.referrerAddress)||this.referrerAddress===(null===(e=this.account)||void 0===e?void 0:e.address))&&(this.referrerLinkOrCode===this.referrerAddress||this.referrerLinkOrCode===this.referrerLink.href))}},{key:"filteredInvitedUsers",get:function(){return this.getPageItems(this.invitedUsers)}},{key:"hasMultipleInvitedUsersPages",get:function(){return this.invitedUsers.length>this.pageAmount}},{key:"referrerLink",get:function(){return{href:"".concat(this.linkHrefBase).concat(this.referrerAddress),label:this.getLinkLabel(this.referrerAddress)}}},{key:"bondButtonType",get:function(){return this.hasAccountWithBondedXor?"secondary":"primary"}},{key:"destroyed",value:function(){this.reset()}},{key:"created",value:function(){var e=this;this.withApi((0,i.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.isSoraAccountConnected){r.next=9;break}return r.next=3,e.subscribeOnInvitedUsers();case 3:return r.next=5,e.getAccountReferralRewards();case 5:return r.next=7,e.getReferrer();case 7:return r.next=9,e.subscribeOnReferrer();case 9:case"end":return r.stop()}}),r)}))))}},{key:"formatReferralAddress",value:function(e){return this.formatAddress(e,12)}},{key:"getLinkLabel",value:function(e){return'<span class="referral-link-address">Polkaswap.io/</span>'.concat(this.routerMode,"referral/").concat(e)}},{key:"getInvitedUserReward",value:function(e){var r,t=null===(r=this.invitedUserRewards[e])||void 0===r?void 0:r.rewards;return"string"===typeof e&&t?this.formatCodecNumber(t.toCodecString()):y.m8}},{key:"handleConnect",value:function(){this.isSoraAccountConnected||this.connectInternalWallet()}},{key:"handleBonding",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k.ZP.push({name:e?y.sn.ReferralBonding:y.sn.ReferralUnbonding})}},{key:"handleSetReferrer",value:function(){this.setStorageReferrer(this.referrerAddress)}}]),t}((0,h.Wr)(m.tA.LoadingMixin,m.tA.FormattedAmountMixin,m.tA.ReferralRewardsMixin,m.tA.PaginationSearchMixin,m.tA.NetworkFeeWarningMixin,m.tA.CopyAddressMixin,R.Z));(0,f.__decorate)([A.SB.referrals.invitedUsers],w.prototype,"invitedUsers",void 0),(0,f.__decorate)([A.SB.referrals.referrer],w.prototype,"referrer",void 0),(0,f.__decorate)([A.SB.referrals.isReferrerApproved],w.prototype,"isReferrerApproved",void 0),(0,f.__decorate)([A.Yn.assets.xor],w.prototype,"xor",void 0),(0,f.__decorate)([A.Yn.wallet.account.account],w.prototype,"account",void 0),(0,f.__decorate)([A.QF.referrals.reset],w.prototype,"reset",void 0),(0,f.__decorate)([A.QF.referrals.unsubscribeFromInvitedUsers],w.prototype,"unsubscribeFromInvitedUsers",void 0),(0,f.__decorate)([A.QF.referrals.setStorageReferrer],w.prototype,"setStorageReferrer",void 0),(0,f.__decorate)([A.aD.referrals.subscribeOnInvitedUsers],w.prototype,"subscribeOnInvitedUsers",void 0),(0,f.__decorate)([A.aD.referrals.getReferrer],w.prototype,"getReferrer",void 0),(0,f.__decorate)([A.aD.referrals.subscribeOnReferrer],w.prototype,"subscribeOnReferrer",void 0),(0,f.__decorate)([A.QF.referrals.resetReferrerSubscription],w.prototype,"resetReferrerSubscription",void 0),(0,f.__decorate)([(0,h.RL)("isSoraAccountConnected")],w.prototype,"updateSubscriptions",null),w=(0,f.__decorate)([(0,h.wA)({components:{FormattedAmount:m.wx.FormattedAmount,InfoLine:m.wx.InfoLine,ReferralBonding:(0,k.JE)(y.sn.ReferralBonding),WalletAvatar:m.wx.WalletAvatar,TokenLogo:m.wx.TokenLogo}})],w);var x=w,L=x,P=t(1001),B=(0,P.Z)(L,n,s,!1,null,"25a9ef19",null),Z=B.exports}}]);