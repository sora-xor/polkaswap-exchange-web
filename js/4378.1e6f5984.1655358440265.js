"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[4378],{64378:function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container"},[i("generic-page-header",{attrs:{"has-button-back":"",title:e.t("addLiquidity.title"),tooltip:e.t("pool.description")},on:{back:e.handleBack}}),i("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[i("s-float-input",{staticClass:"s-input--token-value",attrs:{size:"medium",value:e.firstTokenValue,decimals:e.firstTokenDecimals,"has-locale-string":"",delimiters:e.delimiters,max:e.getMax(e.firstTokenAddress),disabled:!e.areTokensSelected},on:{input:function(t){return e.handleTokenChange(t,e.setFirstTokenValue)},focus:function(t){return e.setFocusedField("firstTokenValue")},blur:e.resetFocusedField}},[i("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"input-title"},[i("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(e._s(e.t("createPair.deposit")))])]),e.isLoggedIn&&e.firstToken?i("div",{staticClass:"input-value"},[i("span",{staticClass:"input-value--uppercase"},[e._v(e._s(e.t("createPair.balance")))]),i("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:e.getFormattedTokenBalance(e.firstToken),"fiat-value":e.getFiatBalance(e.firstToken)}})],1):e._e()]),i("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[e.isFirstMaxButtonAvailable?i("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini"},on:{click:function(t){return e.handleAddLiquidityMaxValue(e.firstToken,e.setFirstTokenValue)}}},[e._v(" "+e._s(e.t("buttons.max"))+" ")]):e._e(),i("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.firstToken}})],1),i("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.firstToken&&e.firstTokenPrice?i("formatted-amount",{attrs:{"is-fiat-value":"",value:e.fiatFirstAmount}}):e._e(),e.firstToken?i("token-address",{staticClass:"input-value",attrs:{name:e.firstToken.name,symbol:e.firstToken.symbol,address:e.firstToken.address}}):e._e()],1)]),i("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}),i("s-float-input",{staticClass:"s-input--token-value",attrs:{size:"medium",value:e.secondTokenValue,decimals:e.secondTokenDecimals,"has-locale-string":"",delimiters:e.delimiters,max:e.getMax(e.secondTokenAddress),disabled:!e.areTokensSelected},on:{input:function(t){return e.handleTokenChange(t,e.setSecondTokenValue)},focus:function(t){return e.setFocusedField("secondTokenValue")},blur:e.resetFocusedField}},[i("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"input-title"},[i("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(e._s(e.t("createPair.deposit")))])]),e.isLoggedIn&&e.secondToken?i("div",{staticClass:"input-value"},[i("span",{staticClass:"input-value--uppercase"},[e._v(e._s(e.t("createPair.balance")))]),i("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:e.getFormattedTokenBalance(e.secondToken),"fiat-value":e.getFiatBalance(e.secondToken)}})],1):e._e()]),i("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[e.isSecondMaxButtonAvailable?i("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini"},on:{click:function(t){return e.handleAddLiquidityMaxValue(e.secondToken,e.setSecondTokenValue)}}},[e._v(" "+e._s(e.t("buttons.max"))+" ")]):e._e(),i("token-select-button",{staticClass:"el-button--select-token",attrs:{icon:"chevron-down-rounded-16",token:e.secondToken},on:{click:e.openSelectSecondTokenDialog}})],1),i("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.secondToken&&e.secondTokenPrice?i("formatted-amount",{attrs:{"is-fiat-value":"",value:e.fiatSecondAmount}}):e._e(),e.secondToken?i("token-address",{staticClass:"input-value",attrs:{name:e.secondToken.name,symbol:e.secondToken.symbol,address:e.secondToken.address}}):e._e()],1)]),i("slippage-tolerance",{staticClass:"slippage-tolerance-settings"}),i("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary",disabled:!e.areTokensSelected||e.isEmptyBalance||e.isInsufficientBalance||!e.isAvailable,loading:e.isSelectAssetLoading},on:{click:e.handleAddLiquidity}},[e.areTokensSelected?e.isAvailable?e.isEmptyBalance?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.insufficientBalanceTokenSymbol}))+" ")]:[e._v(" "+e._s(e.t("createPair.supply"))+" ")]:[e._v(" "+e._s(e.t("addLiquidity.pairIsNotCreated"))+" ")]:[e._v(" "+e._s(e.t("buttons.chooseTokens"))+" ")]],2),e.areTokensSelected&&e.isAvailable&&(!e.emptyAssets||(e.liquidityInfo||{}).balance)?i("add-liquidity-transaction-details",{staticClass:"info-line-container",attrs:{"info-only":!1}}):e._e()],1),i("select-token",{attrs:{visible:e.showSelectSecondTokenDialog,connected:e.isLoggedIn,asset:e.firstToken},on:{"update:visible":function(t){e.showSelectSecondTokenDialog=t},select:function(t){return e.selectSecondTokenAddress(t.address)}}}),i("confirm-token-pair-dialog",{attrs:{visible:e.showConfirmDialog,"parent-loading":e.parentLoading,"share-of-pool":e.shareOfPool,"first-token":e.firstToken,"second-token":e.secondToken,"first-token-value":e.firstTokenValue,"second-token-value":e.secondTokenValue,price:e.price,"price-reversed":e.priceReversed,"slippage-tolerance":e.slippageTolerance},on:{"update:visible":function(t){e.showConfirmDialog=t},confirm:e.handleConfirmAddLiquidity}}),i("network-fee-warning-dialog",{attrs:{visible:e.showWarningFeeDialog,fee:e.removeLiquidityFormattedFee},on:{"update:visible":function(t){e.showWarningFeeDialog=t},confirm:e.confirmNetworkFeeWariningDialog}})],1)},a=[],o=i(34563),n=i(70655),d=i(53545),r=i(8638),l=i(36930),u=i(82753),c=i(14877),p=i(2591),f=i(80710),k=i(16546),m=i(74614),h=i(33312);const v=h.Q.AddLiquidity,g=(0,c.Z)(v);let T=class extends((0,d.Wr)(r.tA.NetworkFeeWarningMixin,g,p.Z)){constructor(...e){super(...e),(0,o.Z)(this,"delimiters",l.FPNumber.DELIMITERS_CONFIG),(0,o.Z)(this,"focusedField",void 0),(0,o.Z)(this,"shareOfPool",void 0),(0,o.Z)(this,"liquidityInfo",void 0),(0,o.Z)(this,"addLiquidity",void 0),(0,o.Z)(this,"setData",void 0),(0,o.Z)(this,"setFocusedField",void 0),(0,o.Z)(this,"resetFocusedField",void 0)}async mounted(){await this.withParentLoading((async()=>{if(this.firstAddress&&this.secondAddress){if(await this.setData({firstAddress:this.firstAddress,secondAddress:this.secondAddress}),!this.liquidityInfo)return this.handleBack()}else await this.setFirstTokenAddress(u.XOR.address)}))}get firstAddress(){return f.ZP.currentRoute.params.firstAddress}get secondAddress(){return f.ZP.currentRoute.params.secondAddress}get chooseTokenClasses(){const e="el-button",t=[e,e+"--choose-token"];return this.secondAddress&&t.push(`${e}--disabled`),t.join(" ")}get removeLiquidityFormattedFee(){return this.formatCodecNumber(this.networkFees.RemoveLiquidity)}get isXorSufficientForNextOperation(){return this.isXorSufficientForNextTx({type:l.Operation.AddLiquidity,amount:this.getFPNumber(this.firstTokenValue)})}handleAddLiquidityMaxValue(e,t){this.focusedField&&this.resetFocusedField(),this.handleMaxValue(e,t)}async handleAddLiquidity(){if(!this.isXorSufficientForNextOperation){if(this.openWarningFeeDialog(),await this.waitOnNextTxFailureConfirmation(),!this.isWarningFeeDialogConfirmed)return;this.isWarningFeeDialogConfirmed=!1}this.openConfirmDialog()}handleConfirmAddLiquidity(){return this.handleConfirm(this.addLiquidity)}};(0,n.__decorate)([m.SB.addLiquidity.focusedField],T.prototype,"focusedField",void 0),(0,n.__decorate)([m.Yn.addLiquidity.shareOfPool],T.prototype,"shareOfPool",void 0),(0,n.__decorate)([m.Yn.addLiquidity.liquidityInfo],T.prototype,"liquidityInfo",void 0),(0,n.__decorate)([m.aD.addLiquidity.addLiquidity],T.prototype,"addLiquidity",void 0),(0,n.__decorate)([m.aD.addLiquidity.setDataFromLiquidity],T.prototype,"setData",void 0),(0,n.__decorate)([m.QF.addLiquidity.setFocusedField],T.prototype,"setFocusedField",void 0),(0,n.__decorate)([m.QF.addLiquidity.resetFocusedField],T.prototype,"resetFocusedField",void 0),T=(0,n.__decorate)([(0,d.wA)({components:{GenericPageHeader:(0,f.kF)(k.z8.GenericPageHeader),SelectToken:(0,f.kF)(k.z8.SelectToken),SlippageTolerance:(0,f.kF)(k.z8.SlippageTolerance),ConfirmTokenPairDialog:(0,f.kF)(k.z8.ConfirmTokenPairDialog),NetworkFeeWarningDialog:(0,f.kF)(k.z8.NetworkFeeWarningDialog),TokenSelectButton:(0,f.kF)(k.z8.TokenSelectButton),AddLiquidityTransactionDetails:(0,f.kF)(k.z8.AddLiquidityTransactionDetails),FormattedAmount:r.wx.FormattedAmount,FormattedAmountWithFiatValue:r.wx.FormattedAmountWithFiatValue,InfoLine:r.wx.InfoLine,TokenAddress:r.wx.TokenAddress}})],T);var y=T,F=y,b=i(1001),_=(0,b.Z)(F,s,a,!1,null,"4bcf5408",null),C=_.exports}}]);