"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[3304],{13304:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container"},[n("generic-page-header",{attrs:{"has-button-back":"",title:e.t("referralProgram."+(e.isBond?"bondTitle":"unbondTitle"))},on:{back:e.handleBack}}),n("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[n("s-float-input",{staticClass:"s-input--token-value",attrs:{size:"medium",value:e.amount,decimals:e.xorDecimals,"has-locale-string":"",delimiters:e.delimiters,max:e.xorMaxValue},on:{input:e.handleInputXor}},[n("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[n("div",{staticClass:"input-title"},[n("span",{staticClass:"input-title--uppercase input-title--primary"},[e._v(" "+e._s(e.t("referralProgram."+(e.isBond?"deposit":"action.unbond")))+" ")])]),e.xorBalance&&e.xorBalance.transferable?n("div",{staticClass:"input-value"},[n("span",{staticClass:"input-value--uppercase"},[e._v(e._s(e.t("referralProgram.balance")))]),n("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:e.xorFormattedBondedBalance,"fiat-value":e.xorFormattedFiatBalance}})],1):e._e()]),n("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[e.isMaxButtonAvailable?n("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini"},on:{click:e.handleMaxValue}},[e._v(" "+e._s(e.t("buttons.max"))+" ")]):e._e(),n("token-select-button",{staticClass:"el-button--select-token",attrs:{token:e.xor}})],1),n("div",{staticClass:"input-line input-line--footer",attrs:{slot:"bottom"},slot:"bottom"},[e.xorPrice?n("formatted-amount",{attrs:{"is-fiat-value":"",value:e.formattedFiatAmount}}):e._e(),n("token-address",{staticClass:"input-value",attrs:{name:e.xorName,symbol:e.xorSymbol,address:e.xorAddress}})],1)]),n("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary",disabled:e.isConfirmBondDisabled},on:{click:e.handleConfirmBond}},[e.hasZeroAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("referralProgram.insufficientBalance",{tokenSymbol:e.xorSymbol}))+" ")]:e.isBondedBalance&&e.isInsufficientBondedXor?[e._v(" "+e._s(e.t("referralProgram.insufficientBondedBalance"))+" ")]:[e._v(" "+e._s(e.t("referralProgram.action."+(e.isBond?"bond":"unbond")))+" ")]],2),n("info-line",{attrs:{label:e.t("referralProgram.networkFee"),"label-tooltip":e.t("referralProgram.networkFeeTooltip"),value:e.formattedNetworkFee,"asset-symbol":e.xorSymbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}}),n("referrals-confirm-bonding",{attrs:{visible:e.showConfirmBondDialog},on:{"update:visible":function(t){e.showConfirmBondDialog=t},confirm:e.confirmBond}})],1)],1)},r=[],i=n(55005),a=n(41067),s=n(1379),u=n(7178),l=n(46108),d=n(55427),c=n(34563),m=(n(35666),n(92222),n(68309),n(60086),n(70655)),f=n(53545),h=n(8638),v=n(36930),p=n(82753),g=n(32806),k=n(85530),b=n(80710),B=n(16546),F=n(74614),x=function(e){(0,l.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),(0,c.Z)((0,u.Z)(e),"networkFees",void 0),(0,c.Z)((0,u.Z)(e),"amount",void 0),(0,c.Z)((0,u.Z)(e),"xor",void 0),(0,c.Z)((0,u.Z)(e),"setAmount",void 0),(0,c.Z)((0,u.Z)(e),"resetAmount",void 0),(0,c.Z)((0,u.Z)(e),"delimiters",v.FPNumber.DELIMITERS_CONFIG),(0,c.Z)((0,u.Z)(e),"showConfirmBondDialog",!1),e}return(0,s.Z)(n,[{key:"xorSymbol",get:function(){return p.XOR.symbol}},{key:"xorDecimals",get:function(){return p.XOR.decimals}},{key:"xorAddress",get:function(){return p.XOR.address}},{key:"xorName",get:function(){return p.XOR.name}},{key:"xorMaxValue",get:function(){return this.getMax(this.xorAddress)}},{key:"xorPrice",get:function(){return this.getAssetFiatPrice(p.XOR)}},{key:"xorBalance",get:function(){var e;return null===(e=this.xor)||void 0===e?void 0:e.balance}},{key:"xorFormattedBondedBalance",get:function(){return(0,k.SL)(this.xor,{isBondedBalance:this.isBondedBalance})}},{key:"xorFormattedFiatBalance",get:function(){var e,t;return this.isBond?this.getFiatBalance(this.xor):this.getFiatAmountByCodecString(null!==(e=null===(t=this.xorBalance)||void 0===t?void 0:t.bonded)&&void 0!==e?e:"0")}},{key:"isBond",get:function(){return this.$route.name===B.sn.ReferralBonding}},{key:"isBondedBalance",get:function(){return!this.isBond}},{key:"hasZeroAmount",get:function(){return(0,k.yA)(this.amount)}},{key:"formattedFiatAmount",get:function(){var e;return this.amount&&null!==(e=this.getFiatAmountByString(this.amount,p.XOR))&&void 0!==e?e:B.m8}},{key:"isMaxButtonAvailable",get:function(){var e,t,n=this.getFPNumberFromCodec(null!==(e=null===(t=this.xorBalance)||void 0===t?void 0:t.transferable)&&void 0!==e?e:B.m8,this.xorDecimals),o=this.getFPNumber(this.amount,this.xorDecimals);if(this.fpNumberNetworkFee.isZero())return!1;if(this.isBondedBalance){var r,i,a=null!==(r=null===(i=this.xorBalance)||void 0===i?void 0:i.bonded)&&void 0!==r?r:B.m8,s=this.getFPNumberFromCodec(a,this.xorDecimals).isZero();return!s&&v.FPNumber.gt(n,this.fpNumberNetworkFee)}return!v.FPNumber.eq(this.fpNumberNetworkFee,n.sub(o))&&v.FPNumber.gt(n,this.fpNumberNetworkFee)}},{key:"isInsufficientBondedXor",get:function(){return!!this.xor&&(0,k.Vl)(this.xor,this.amount,this.networkFee,!1,this.isBondedBalance)}},{key:"isInsufficientXorForFee",get:function(){var e,t;return this.isBondedBalance?v.FPNumber.gt(this.fpNumberNetworkFee,this.getFPNumberFromCodec(null!==(e=null===(t=this.xorBalance)||void 0===t?void 0:t.transferable)&&void 0!==e?e:B.m8,this.xorDecimals)):!!this.xor&&(0,k.Vl)(this.xor,this.amount,this.networkFee)}},{key:"networkFee",get:function(){return this.networkFees[this.isBond?v.Operation.ReferralReserveXor:v.Operation.ReferralUnreserveXor]}},{key:"fpNumberNetworkFee",get:function(){return this.getFPNumberFromCodec(this.networkFee)}},{key:"formattedNetworkFee",get:function(){return this.formatCodecNumber(this.networkFee)}},{key:"isConfirmBondDisabled",get:function(){return this.hasZeroAmount||this.isInsufficientXorForFee||this.isInsufficientBondedXor}},{key:"handleInputXor",value:function(e){e!==this.amount&&this.setAmount(e)}},{key:"handleMaxValue",value:function(){this.xor&&this.handleInputXor((0,k.MN)(this.xor,this.networkFee,!1,this.isBondedBalance))}},{key:"handleConfirmBond",value:function(){this.showConfirmBondDialog=!0}},{key:"confirmBond",value:function(){var e=(0,i.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&(this.resetAmount(),this.handleBack());case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleBack",value:function(){b.ZP.push({name:B.sn.Referral})}},{key:"destroyed",value:function(){this.resetAmount()}}]),n}((0,f.Wr)(h.tA.FormattedAmountMixin,g.Z,h.tA.LoadingMixin));(0,m.__decorate)([F.SB.wallet.settings.networkFees],x.prototype,"networkFees",void 0),(0,m.__decorate)([F.SB.referrals.amount],x.prototype,"amount",void 0),(0,m.__decorate)([F.Yn.assets.xor],x.prototype,"xor",void 0),(0,m.__decorate)([F.QF.referrals.setAmount],x.prototype,"setAmount",void 0),(0,m.__decorate)([F.QF.referrals.resetAmount],x.prototype,"resetAmount",void 0),x=(0,m.__decorate)([(0,f.wA)({components:{GenericPageHeader:(0,b.kF)(B.z8.GenericPageHeader),TokenSelectButton:(0,b.kF)(B.z8.TokenSelectButton),ReferralsConfirmBonding:(0,b.kF)(B.z8.ReferralsConfirmBonding),FormattedAmount:h.wx.FormattedAmount,FormattedAmountWithFiatValue:h.wx.FormattedAmountWithFiatValue,InfoLine:h.wx.InfoLine,TokenAddress:h.wx.TokenAddress}})],x);var y=x,w=y,A=n(1001),_=(0,A.Z)(w,o,r,!1,null,"0ed34b23",null),C=_.exports}}]);