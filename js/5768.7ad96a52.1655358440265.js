"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[5768],{95768:function(t,i,o){o.r(i),o.d(i,{default:function(){return w}});var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("dialog-base",{staticClass:"moonpay-dialog",attrs:{visible:t.visibility},on:{"update:visible":function(i){t.visibility=i}},scopedSlots:t._u([{key:"title",fn:function(){return[o("moonpay-logo",{attrs:{theme:t.libraryTheme}})]},proxy:!0}])},[o("moonpay-widget",{attrs:{src:t.widgetUrl}})],1)},a=[],n=o(34563),s=o(70655),l=o(53545),r=o(44372),p=o(1753),d=o(68006),g=o(85530),c=o(80710),h=o(16546),y=o(74614),u=o(42024),m=o(25108);let _=class extends((0,l.Wr)(d.Z)){constructor(...t){super(...t),(0,n.Z)(this,"widgetUrl",""),(0,n.Z)(this,"transactionsPolling",void 0),(0,n.Z)(this,"account",void 0),(0,n.Z)(this,"isLoggedIn",void 0),(0,n.Z)(this,"lastCompletedTransaction",void 0),(0,n.Z)(this,"libraryTheme",void 0),(0,n.Z)(this,"pollingTimestamp",void 0),(0,n.Z)(this,"dialogVisibility",void 0),(0,n.Z)(this,"setDialogVisibility",void 0),(0,n.Z)(this,"createTransactionsPolling",void 0)}handleLoggedInStateChange(t){t||this.stopPollingMoonpay()}handleVisibleStateChange(t){t&&!this.pollingTimestamp&&this.startPollingMoonpay()}handleLanguageChange(){this.pollingTimestamp||this.updateWidgetUrl()}async handleLastTransaction(t,i){!t||i&&i.id===t.id||await this.prepareBridgeForTransfer(t)}get visibility(){return this.dialogVisibility}set visibility(t){this.setDialogVisibility(t)}async created(){this.withApi((()=>{this.initMoonpayApi(),this.updateWidgetUrl()}))}beforeDestroy(){this.stopPollingMoonpay()}createMoonpayWidgetUrl(){return this.moonpayApi.createWidgetUrl({colorCode:(0,g.y_)("--s-color-theme-accent"),externalTransactionId:this.account.address,language:this.language})}updateWidgetUrl(){this.widgetUrl="";const t=this.createMoonpayWidgetUrl();setTimeout((()=>{this.widgetUrl=t}))}async startPollingMoonpay(){m.info("Moonpay: start polling to get user transactions"),this.transactionsPolling=await this.createTransactionsPolling()}stopPollingMoonpay(){m.info("Moonpay: stop polling"),"function"===typeof this.transactionsPolling&&this.transactionsPolling()}async prepareBridgeForTransfer(t){this.setDialogVisibility(!1),this.stopPollingMoonpay(),this.updateWidgetUrl(),await this.showNotification(u.u.Success),await this.prepareMoonpayTxForBridgeTransfer(t,!0)}};(0,s.__decorate)([y.Yn.wallet.account.account],_.prototype,"account",void 0),(0,s.__decorate)([y.Yn.wallet.account.isLoggedIn],_.prototype,"isLoggedIn",void 0),(0,s.__decorate)([y.Yn.moonpay.lastCompletedTransaction],_.prototype,"lastCompletedTransaction",void 0),(0,s.__decorate)([y.Yn.libraryTheme],_.prototype,"libraryTheme",void 0),(0,s.__decorate)([y.SB.moonpay.pollingTimestamp],_.prototype,"pollingTimestamp",void 0),(0,s.__decorate)([y.SB.moonpay.dialogVisibility],_.prototype,"dialogVisibility",void 0),(0,s.__decorate)([y.QF.moonpay.setDialogVisibility],_.prototype,"setDialogVisibility",void 0),(0,s.__decorate)([y.aD.moonpay.createTransactionsPolling],_.prototype,"createTransactionsPolling",void 0),(0,s.__decorate)([(0,l.RL)("isLoggedIn",{immediate:!0})],_.prototype,"handleLoggedInStateChange",null),(0,s.__decorate)([(0,l.RL)("visibility",{immediate:!0})],_.prototype,"handleVisibleStateChange",null),(0,s.__decorate)([(0,l.RL)("language"),(0,l.RL)("libraryTheme")],_.prototype,"handleLanguageChange",null),(0,s.__decorate)([(0,l.RL)("lastCompletedTransaction")],_.prototype,"handleLastTransaction",null),_=(0,s.__decorate)([(0,l.wA)({components:{DialogBase:r["default"],MoonpayLogo:p["default"],MoonpayWidget:(0,c.kF)(h.z8.MoonpayWidget)}})],_);var b=_,v=b,T=o(1001),f=(0,T.Z)(v,e,a,!1,null,null,null),w=f.exports}}]);