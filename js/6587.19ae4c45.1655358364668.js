"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[6587],{6587:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view",e._g(e._b({},"router-view",Object.assign({},{parentLoading:e.loading},e.$attrs),!1),e.$listeners))},a=[],s=r(55005),c=r(41067),o=r(1379),u=r(7178),i=r(46108),l=r(55427),d=r(34563),h=(r(35666),r(92222),r(41539),r(78783),r(33948),r(70655)),v=r(53545),p=r(8638),m=r(10909),g=r(63471),w=r(28335),k=r(74614),b=r(25108),f=function(e){(0,i.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,c.Z)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,d.Z)((0,u.Z)(e),"getEvmBalance",void 0),(0,d.Z)((0,u.Z)(e),"getEvmNetworkFee",void 0),(0,d.Z)((0,u.Z)(e),"updateEvmBlockNumber",void 0),(0,d.Z)((0,u.Z)(e),"getRegisteredAssets",void 0),(0,d.Z)((0,u.Z)(e),"updateRegisteredAssets",void 0),(0,d.Z)((0,u.Z)(e),"unwatchEthereum",void 0),(0,d.Z)((0,u.Z)(e),"blockHeadersSubscriber",void 0),e}return(0,o.Z)(r,[{key:"created",value:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.withLoading((0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.syncExternalAccountWithAppState();case 2:return e.next=4,t.withParentLoading((0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.setEvmNetwork(w.Zc.externalNetwork),e.next=3,t.onEvmNetworkTypeChange();case 3:return e.next=5,g.ZP.watchEthereum({onAccountChange:function(e){e.length?(t.switchExternalAccount(e[0]),t.updateExternalBalances()):t.disconnectExternalAccount()},onNetworkChange:function(e){t.onEvmNetworkTypeChange(e)},onDisconnect:function(){t.disconnectExternalAccount()}});case 5:t.unwatchEthereum=e.sent,t.subscribeToEvmBlockHeaders();case 7:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){"function"===typeof this.unwatchEthereum&&this.unwatchEthereum(),this.unsubscribeEvmBlockHeaders()}},{key:"updateExternalBalances",value:function(){this.getEvmBalance(),this.updateRegisteredAssets()}},{key:"onEvmNetworkTypeChange",value:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.setEvmNetworkType(t),this.getRegisteredAssets(),this.getEvmNetworkFee(),this.getEvmBalance()]);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"subscribeToEvmBlockHeaders",value:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.unsubscribeEvmBlockHeaders();case 3:return e.next=5,g.ZP.getEthersInstance();case 5:return t=e.sent,e.next=8,this.updateEvmBlockNumber();case 8:this.blockHeadersSubscriber=t.on("block",(function(e){r.updateEvmBlockNumber(e),r.updateExternalBalances(),r.getEvmNetworkFee()})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),b.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"unsubscribeEvmBlockHeaders",value:function(){var e=this;return new Promise((function(t,r){if(!e.blockHeadersSubscriber)return t();try{e.blockHeadersSubscriber.off("block"),t()}catch(n){r(n)}}))}}]),r}((0,v.Wr)(p.tA.LoadingMixin,m.Z));(0,h.__decorate)([k.aD.web3.getEvmBalance],f.prototype,"getEvmBalance",void 0),(0,h.__decorate)([k.aD.bridge.getEvmNetworkFee],f.prototype,"getEvmNetworkFee",void 0),(0,h.__decorate)([k.aD.bridge.updateEvmBlockNumber],f.prototype,"updateEvmBlockNumber",void 0),(0,h.__decorate)([k.aD.assets.getRegisteredAssets],f.prototype,"getRegisteredAssets",void 0),(0,h.__decorate)([k.aD.assets.updateRegisteredAssets],f.prototype,"updateRegisteredAssets",void 0),f=(0,h.__decorate)([v.wA],f);var E=f,Z=E,x=r(1001),y=(0,x.Z)(Z,n,a,!1,null,null,null),_=y.exports}}]);