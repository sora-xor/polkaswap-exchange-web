"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[8635],{48635:function(t,e,s){s.r(e),s.d(e,{default:function(){return N}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container transaction-container"},[s("generic-page-header",{attrs:{"has-button-back":"",title:t.t("bridgeTransaction.title")},on:{back:t.handleBack}},[s("s-button",{staticClass:"el-button--history",attrs:{type:"action",icon:"time-time-history-24",tooltip:t.t("bridgeHistory.showHistory"),"tooltip-placement":"bottom-end"},on:{click:t.handleViewTransactionsHistory}})],1),s("div",{staticClass:"transaction-content"},[[s("div",{staticClass:"header"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isTransactionFromPending||t.isTransactionToPending,expression:"isTransactionFromPending || isTransactionToPending"}],class:t.headerIconClasses}),s("h5",{staticClass:"header-details"},[s("formatted-amount",{staticClass:"info-line-value",attrs:{"value-can-be-hidden":"",value:t.formattedAmount,"asset-symbol":t.assetSymbol}},[s("i",{class:t.firstNetworkIcon})]),s("span",{staticClass:"header-details-separator"},[t._v(t._s(t.t("bridgeTransaction.for")))]),s("formatted-amount",{staticClass:"info-line-value",attrs:{"value-can-be-hidden":"",value:t.formattedAmount,"asset-symbol":t.assetSymbol}},[s("i",{class:t.secondNetworkIcon})])],1),s("p",{staticClass:"header-status"},[t._v(t._s(t.headerStatus))])]),s("s-collapse",{attrs:{borders:"",value:t.activeCollapseItems}},[s("s-collapse-item",{attrs:{name:t.collapseItems.from},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"network-info-title"},[s("h3",[t._v(" "+t._s(t.t("bridgeTransaction.steps.step",{step:"1"})+" "+t.t("bridgeTransaction.networkTitle",{network:t.formattedNetworkStep1}))+" ")]),s("span",{class:t.firstTxIconStatusClasses})])]},proxy:!0}])},[t.transactionFromHash?s("div",{class:t.firstTxHashContainerClasses},[s("s-input",{attrs:{placeholder:t.t("bridgeTransaction.transactionHash"),value:t.firstTxHash,readonly:""}}),s("s-button",{staticClass:"s-button--hash-copy",attrs:{type:"action",alternative:"",icon:"basic-copy-24",tooltip:t.copyTransactionHashTooltip},on:{click:function(e){return t.handleCopyAddress(t.transactionFromHash,e)}}}),t.isSoraToEvm&&t.soraExpolrerLinks.length||!t.isSoraToEvm?s("s-dropdown",{staticClass:"s-dropdown--hash-menu",attrs:{borderRadius:"mini",type:"ellipsis",icon:"basic-more-vertical-24",placement:"bottom-end"},on:{select:function(e){t.isSoraToEvm||t.handleOpenEtherscan()}}},[s("template",{slot:"menu"},[t.isSoraToEvm?t._l(t.soraExpolrerLinks,(function(e){return s("a",{key:e.type,staticClass:"transaction-link",attrs:{href:e.value,target:"_blank",rel:"nofollow noopener"}},[s("s-dropdown-item",{staticClass:"s-dropdown-menu__item",attrs:{disabled:!(t.soraTxId||t.soraTxBlockId)}},[t._v(" "+t._s(t.t("transaction.viewIn."+e.type))+" ")])],1)})):s("s-dropdown-item",{staticClass:"s-dropdown-menu__item"},[s("span",[t._v(t._s(t.t("bridgeTransaction.viewInEtherscan")))])])],2)],2):t._e()],1):t._e(),s("info-line",{class:t.failedClassStep1,attrs:{label:t.t("bridgeTransaction.networkInfo.status"),value:t.statusFrom}}),s("info-line",{attrs:{label:t.t("bridgeTransaction.networkInfo.date"),value:t.transactionFromDate}}),t.amount?s("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:t.t("bridgeTransaction.networkInfo.amount"),value:"-"+t.formattedAmount,"asset-symbol":t.assetSymbol,"fiat-value":t.firstAmountFiatValue}}):t._e(),s("info-line",{attrs:{"is-formatted":"",label:t.t("bridgeTransaction.networkInfo.transactionFee"),value:t.isSoraToEvm?t.formattedSoraNetworkFee:t.formattedEvmNetworkFee,"asset-symbol":t.isSoraToEvm?t.KnownSymbols.XOR:t.evmTokenSymbol,"fiat-value":t.soraFeeFiatValue},scopedSlots:t._u([!t.isSoraToEvm&&t.formattedEvmNetworkFee?{key:"info-line-value-prefix",fn:function(){return[s("span",{staticClass:"info-line-value-prefix"},[t._v("~")])]},proxy:!0}:null],null,!0)}),t.isTransactionFromCompleted?t._e():s("s-button",{staticClass:"s-typograhy-button--big",attrs:{type:"primary",disabled:t.isFirstConfirmationButtonDisabled},on:{click:function(e){return t.handleTransaction()}}},[t.isTransactionFromPending?s("span",{domProps:{innerHTML:t._s(t.t("bridgeTransaction.pending",{network:t.t("bridgeTransaction."+(t.isSoraToEvm?"sora":"ethereum"))}))}}):t.isSoraToEvm||t.isExternalAccountConnected?t.isSoraToEvm||t.isValidNetworkType?t.isInsufficientBalance?[t._v(t._s(t.t("confirmBridgeTransactionDialog.insufficientBalance",{tokenSymbol:t.assetSymbol})))]:t.isInsufficientXorForFee?[t._v(t._s(t.t("confirmBridgeTransactionDialog.insufficientBalance",{tokenSymbol:t.KnownSymbols.XOR})))]:t.isInsufficientEvmNativeTokenForFee?[t._v(t._s(t.t("confirmBridgeTransactionDialog.insufficientBalance",{tokenSymbol:t.evmTokenSymbol})))]:t.isTransactionFromFailed?[t._v(t._s(t.t("bridgeTransaction.retry")))]:t.txWaitingForApprove?[t._v(t._s(t.t("bridgeTransaction.allowToken",{tokenSymbol:t.assetSymbol})))]:[t._v(t._s(t.t("bridgeTransaction.confirm",{direction:t.t("bridgeTransaction."+(t.isSoraToEvm?"sora":"metamask"))})))]:[t._v(t._s(t.t("bridgeTransaction.changeNetwork")))]:[t._v(t._s(t.t("bridgeTransaction.connectWallet")))]],2),t.txWaitingForApprove?s("div",{staticClass:"transaction-approval-text"},[t._v(" "+t._s(t.t("bridgeTransaction.approveToken"))+" ")]):t._e()],1),s("s-collapse-item",{attrs:{name:t.collapseItems.to},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"network-info-title"},[s("h3",[t._v(" "+t._s(t.t("bridgeTransaction.steps.step",{step:"2"})+" "+t.t("bridgeTransaction.networkTitle",{network:t.formattedNetworkStep2}))+" ")]),t.isTransactionFromCompleted?s("span",{class:t.secondTxIconStatusClasses}):t._e()])]},proxy:!0}])},[!t.isSoraToEvm||t.isTxEvmAccount||t.isTransactionToCompleted?t._e():s("div",{staticClass:"transaction-error"},[s("span",{staticClass:"transaction-error__title"},[t._v(t._s(t.t("bridgeTransaction.expectedMetaMaskAddress")))]),s("span",{staticClass:"transaction-error__value"},[t._v(t._s(t.transactionEvmAddress))])]),t.isTransactionFromCompleted&&t.transactionToHash?s("div",{class:t.secondTxHashContainerClasses},[s("s-input",{attrs:{placeholder:t.t("bridgeTransaction.transactionHash"),value:t.secondTxHash,readonly:""}}),s("s-button",{staticClass:"s-button--hash-copy",attrs:{type:"action",alternative:"",icon:"basic-copy-24",tooltip:t.copyTransactionHashTooltip},on:{click:function(e){return t.handleCopyAddress(t.transactionToHash,e)}}}),!t.isSoraToEvm&&t.soraExpolrerLinks.length||t.isSoraToEvm?s("s-dropdown",{staticClass:"s-dropdown--hash-menu",attrs:{borderRadius:"mini",type:"ellipsis",icon:"basic-more-vertical-24",placement:"bottom-end"},on:{select:function(e){t.isSoraToEvm&&t.handleOpenEtherscan()}}},[s("template",{slot:"menu"},[t.isSoraToEvm?s("s-dropdown-item",{staticClass:"s-dropdown-menu__item"},[s("span",[t._v(t._s(t.t("bridgeTransaction.viewInEtherscan")))])]):t._l(t.soraExpolrerLinks,(function(e){return s("a",{key:e.type,staticClass:"transaction-link",attrs:{href:e.value,target:"_blank",rel:"nofollow noopener"}},[s("s-dropdown-item",{staticClass:"s-dropdown-menu__item",attrs:{disabled:!(t.soraTxId||t.soraTxBlockId)}},[t._v(" "+t._s(t.t("transaction.viewIn."+e.type))+" ")])],1)}))],2)],2):t._e()],1):t._e(),s("info-line",{class:t.failedClassStep2,attrs:{label:t.t("bridgeTransaction.networkInfo.status"),value:t.statusTo}}),s("info-line",{attrs:{label:t.t("bridgeTransaction.networkInfo.date"),value:t.transactionToDate}}),t.amount?s("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:t.t("bridgeTransaction.networkInfo.amount"),value:t.formattedAmount,"asset-symbol":t.assetSymbol,"fiat-value":t.secondAmountFiatValue}}):t._e(),s("info-line",{attrs:{label:t.t("bridgeTransaction.networkInfo.transactionFee"),value:t.isSoraToEvm?t.formattedEvmNetworkFee:t.formattedSoraNetworkFee,"asset-symbol":t.isSoraToEvm?t.evmTokenSymbol:t.KnownSymbols.XOR,"fiat-value":t.soraNetworkFeeFiatValue,"is-formatted":""},scopedSlots:t._u([t.isSoraToEvm&&t.formattedEvmNetworkFee?{key:"info-line-value-prefix",fn:function(){return[s("span",{staticClass:"info-line-value-prefix"},[t._v("~")])]},proxy:!0}:null],null,!0)}),t.isTransactionFromCompleted&&!t.isTransactionToCompleted?s("s-button",{staticClass:"s-typograhy-button--big",attrs:{type:"primary",disabled:t.isSecondConfirmationButtonDisabled},on:{click:function(e){return t.handleTransaction()}}},[t.isSoraToEvm&&!t.isExternalAccountConnected?[t._v(t._s(t.t("bridgeTransaction.connectWallet")))]:t.isSoraToEvm&&!t.isTxEvmAccount?[t._v(t._s(t.t("bridgeTransaction.changeAccount")))]:t.isSoraToEvm&&!t.isValidNetworkType?[t._v(t._s(t.t("bridgeTransaction.changeNetwork")))]:t.comfirmationBlocksLeft?[t._v(" "+t._s(t.t("bridgeTransaction.blocksLeft",{count:t.comfirmationBlocksLeft}))+" ")]:t.isTransactionToPending?s("span",{domProps:{innerHTML:t._s(t.t("bridgeTransaction.pending",{network:t.t("bridgeTransaction."+(t.isSoraToEvm?"ethereum":"sora"))}))}}):(t.isSoraToEvm?t.isInsufficientEvmNativeTokenForFee:t.isInsufficientXorForFee)?[t._v(t._s(t.t("confirmBridgeTransactionDialog.insufficientBalance",{tokenSymbol:t.isSoraToEvm?t.evmTokenSymbol:t.KnownSymbols.XOR})))]:t.isTransactionToFailed?[t._v(t._s(t.t("bridgeTransaction.retry")))]:[t._v(t._s(t.t("bridgeTransaction.confirm",{direction:t.t("bridgeTransaction."+(t.isSoraToEvm?"metamask":"sora"))})))]],2):t._e()],1)],1)]],2),t.isTransactionToCompleted?s("s-button",{staticClass:"s-typography-button--large",attrs:{type:"secondary"},on:{click:t.navigateToBridge}},[t._v(" "+t._s(t.t("bridgeTransaction.newTransaction"))+" ")]):t._e()],1)},i=[],o=s(83013),a=s(55005),r=s(41067),c=s(1379),l=s(7178),u=s(46108),d=s(55427),m=s(34563),h=(s(35666),s(92222),s(69600),s(21249),s(70655)),v=s(53545),T=s(8638),f=s(82753),p=s(63280),g=s(41468),y=s(80710),k=s(16546),b=s(74614),S=s(85530),F=s(28335),w=24,_=function(t){(0,u.Z)(s,t);var e=(0,d.Z)(s);function s(){var t;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),(0,m.Z)((0,l.Z)(t),"KnownSymbols",f.KnownSymbols),(0,m.Z)((0,l.Z)(t),"collapseItems",{from:"step-from",to:"step-to"}),(0,m.Z)((0,l.Z)(t),"waitingForApprove",void 0),(0,m.Z)((0,l.Z)(t),"inProgressIds",void 0),(0,m.Z)((0,l.Z)(t),"prevRoute",void 0),(0,m.Z)((0,l.Z)(t),"getAsset",void 0),(0,m.Z)((0,l.Z)(t),"historyItem",void 0),(0,m.Z)((0,l.Z)(t),"isTxEvmAccount",void 0),(0,m.Z)((0,l.Z)(t),"setHistory",void 0),(0,m.Z)((0,l.Z)(t),"setHistoryId",void 0),(0,m.Z)((0,l.Z)(t),"handleBridgeTx",void 0),t}return(0,c.Z)(s,[{key:"txInProcess",get:function(){var t;return!(null===(t=this.historyItem)||void 0===t||!t.id)&&this.historyItem.id in this.inProgressIds}},{key:"txWaitingForApprove",get:function(){var t;return!(null===(t=this.historyItem)||void 0===t||!t.id)&&this.historyItem.id in this.waitingForApprove}},{key:"amount",get:function(){var t,e;return null!==(t=null===(e=this.historyItem)||void 0===e?void 0:e.amount)&&void 0!==t?t:""}},{key:"asset",get:function(){var t;return null!==(t=this.historyItem)&&void 0!==t&&t.assetAddress?this.getAsset(this.historyItem.assetAddress):null}},{key:"isSoraToEvm",get:function(){return(0,F.mW)(this.historyItem)}},{key:"formattedAmount",get:function(){return this.amount&&this.asset?this.formatStringValue(this.amount,this.asset.decimals):""}},{key:"assetSymbol",get:function(){var t,e;return null!==(t=null===(e=this.asset)||void 0===e?void 0:e.symbol)&&void 0!==t?t:""}},{key:"evmIcon",get:function(){var t;return this.getEvmIcon(null===(t=this.historyItem)||void 0===t?void 0:t.externalNetwork)}},{key:"txSoraNetworkFee",get:function(){var t,e;return null!==(t=null===(e=this.historyItem)||void 0===e?void 0:e.soraNetworkFee)&&void 0!==t?t:this.soraNetworkFee}},{key:"txEvmNetworkFee",get:function(){var t,e;return null!==(t=null===(e=this.historyItem)||void 0===e?void 0:e.ethereumNetworkFee)&&void 0!==t?t:this.evmNetworkFee}},{key:"transactionFromHash",get:function(){var t,e,s;return null!==(t=this.isSoraToEvm?null===(e=this.historyItem)||void 0===e?void 0:e.hash:null===(s=this.historyItem)||void 0===s?void 0:s.ethereumHash)&&void 0!==t?t:""}},{key:"transactionToHash",get:function(){var t,e,s;return null!==(t=this.isSoraToEvm?null===(s=this.historyItem)||void 0===s?void 0:s.ethereumHash:null===(e=this.historyItem)||void 0===e?void 0:e.hash)&&void 0!==t?t:""}},{key:"transactionFromDate",get:function(){var t;return this.formatTransactionDate(null===(t=this.historyItem)||void 0===t?void 0:t.startTime)}},{key:"transactionToDate",get:function(){var t;return this.formatTransactionDate(null===(t=this.historyItem)||void 0===t?void 0:t.endTime)}},{key:"soraFeeFiatValue",get:function(){return this.isSoraToEvm?this.getFiatAmountByCodecString(this.txSoraNetworkFee):null}},{key:"firstAmountFiatValue",get:function(){return this.isSoraToEvm&&this.asset?this.getFiatAmountByString(this.amount,this.asset):null}},{key:"secondAmountFiatValue",get:function(){return!this.isSoraToEvm&&this.asset?this.getFiatAmountByString(this.amount,this.asset):null}},{key:"currentState",get:function(){var t,e;return null!==(t=null===(e=this.historyItem)||void 0===e?void 0:e.transactionState)&&void 0!==t?t:F.PO.INITIAL}},{key:"isTransferStarted",get:function(){return this.currentState!==F.PO.INITIAL}},{key:"isTransactionFromPending",get:function(){return this.currentState===(this.isSoraToEvm?F.PO.SORA_PENDING:F.PO.EVM_PENDING)}},{key:"isTransactionToPending",get:function(){return this.currentState===(this.isSoraToEvm?F.PO.EVM_PENDING:F.PO.SORA_PENDING)}},{key:"isTransactionFromFailed",get:function(){return this.currentState===(this.isSoraToEvm?F.PO.SORA_REJECTED:F.PO.EVM_REJECTED)}},{key:"isTransactionToFailed",get:function(){return this.currentState===(this.isSoraToEvm?F.PO.EVM_REJECTED:F.PO.SORA_REJECTED)}},{key:"isTransactionFromCompleted",get:function(){return this.isTransferStarted&&!this.isTransactionFromPending&&!this.isTransactionFromFailed}},{key:"isTransactionToCompleted",get:function(){return this.currentState===(this.isSoraToEvm?F.PO.EVM_COMMITED:F.PO.SORA_COMMITED)}},{key:"transactionStep",get:function(){var t,e;return null!==(t=null===(e=this.historyItem)||void 0===e?void 0:e.transactionStep)&&void 0!==t?t:1}},{key:"copyTransactionHashTooltip",get:function(){return this.copyTooltip(this.t("bridgeTransaction.transactionHash"))}},{key:"activeCollapseItems",get:function(){return this.isTransactionToCompleted?[]:this.isTransactionFromCompleted?[this.collapseItems.to]:[this.collapseItems.from,this.collapseItems.to]}},{key:"headerIconClasses",get:function(){var t="header-icon",e=[t];return this.isTransactionFromFailed||this.isTransactionToFailed?e.push("".concat(t,"--error")):this.isTransactionToCompleted?e.push("".concat(t,"--success")):this.isTransactionFromCompleted&&e.push("".concat(t,"--wait")),e.join(" ")}},{key:"headerStatus",get:function(){var t={step:this.t("bridgeTransaction.steps.step",{step:this.t("bridgeTransaction.steps.step".concat(this.transactionStep))})};return this.isTransactionFromPending||this.isTransactionToPending?this.t("bridgeTransaction.status.pending",t):this.isTransactionFromFailed||this.isTransactionToFailed?this.t("bridgeTransaction.status.failed",t):this.isTransactionToCompleted?this.t("bridgeTransaction.status.convertionComplete"):this.t("bridgeTransaction.status.confirm")}},{key:"statusFrom",get:function(){return this.isTransactionFromPending?this.isSoraToEvm||this.transactionFromHash?this.t("bridgeTransaction.statuses.pending")+"...":this.t("bridgeTransaction.statuses.waitingForConfirmation"):this.isTransactionFromFailed?this.t("bridgeTransaction.statuses.failed"):this.isTransactionFromCompleted?this.t("bridgeTransaction.statuses.done"):this.t("bridgeTransaction.statuses.waiting")+"..."}},{key:"statusTo",get:function(){return this.isTransactionToPending?this.isSoraToEvm&&!this.transactionToHash?this.t("bridgeTransaction.statuses.waitingForConfirmation"):this.t("bridgeTransaction.statuses.pending")+"...":this.isTransactionToFailed?this.t("bridgeTransaction.statuses.failed"):this.isTransactionToCompleted?this.t("bridgeTransaction.statuses.done"):this.t("bridgeTransaction.statuses.waiting")+"..."}},{key:"transactionEvmAddress",get:function(){var t,e;return null!==(t=null===(e=this.historyItem)||void 0===e?void 0:e.to)&&void 0!==t?t:""}},{key:"soraTxId",get:function(){var t;return null!==(t=this.historyItem)&&void 0!==t&&t.id?this.historyItem.txId:null}},{key:"soraTxBlockId",get:function(){var t;return null!==(t=this.historyItem)&&void 0!==t&&t.id?this.historyItem.blockId:null}},{key:"formattedSoraNetworkFee",get:function(){return this.getStringFromCodec(this.txSoraNetworkFee,this.xor.decimals)}},{key:"soraNetworkFeeFiatValue",get:function(){return this.isSoraToEvm?null:this.getFiatAmountByCodecString(this.txSoraNetworkFee)}},{key:"formattedEvmNetworkFee",get:function(){return this.formatCodecNumber(this.txEvmNetworkFee)}},{key:"isInsufficientBalance",get:function(){var t=this.isSoraToEvm?this.txSoraNetworkFee:this.txEvmNetworkFee;return!!(this.asset&&this.amount&&t)&&(0,S.Vl)(this.asset,this.amount,t,!this.isSoraToEvm)}},{key:"isInsufficientXorForFee",get:function(){return(0,S.LG)(this.xor,this.txSoraNetworkFee)}},{key:"isInsufficientEvmNativeTokenForFee",get:function(){return(0,S.lV)(this.evmBalance,this.txEvmNetworkFee)}},{key:"isFirstConfirmationButtonDisabled",get:function(){return!(this.isSoraToEvm||this.isValidNetworkType)||!this.isTransferStarted||this.isInsufficientBalance||this.isInsufficientXorForFee||this.isInsufficientEvmNativeTokenForFee||this.isTransactionFromPending}},{key:"isSecondConfirmationButtonDisabled",get:function(){return this.isSoraToEvm&&!(this.isValidNetworkType&&this.isTxEvmAccount)||(this.isSoraToEvm?this.isInsufficientEvmNativeTokenForFee:this.isInsufficientXorForFee)||this.isTransactionToPending}},{key:"firstNetworkIcon",get:function(){return"s-icon--network s-icon-".concat(this.isSoraToEvm?"sora":this.evmIcon)}},{key:"secondNetworkIcon",get:function(){return"s-icon--network s-icon-".concat(this.isSoraToEvm?this.evmIcon:"sora")}},{key:"handleOpenEtherscan",value:function(){var t=this.isSoraToEvm?this.transactionToHash:this.transactionFromHash,e=this.getEtherscanLink(t,!0),s=window.open(e,"_blank");s&&s.focus()}},{key:"soraExpolrerLinks",get:function(){if(!this.soraNetwork)return[];var t=(0,T.$_)(this.soraNetwork),e=this.soraTxId||this.soraTxBlockId;return e?this.soraTxId?t.map((function(t){var s=t.type,n=t.value,i={type:s};return s===T.it.ExplorerType.Sorascan?i.value="".concat(n,"/transaction/").concat(e):i.value="".concat(n,"/extrinsic/").concat(e),i})):t.map((function(t){var s=t.type,n=t.value;return{type:s,value:"".concat(n,"/block/").concat(e)}})):[]}},{key:"firstTxHash",get:function(){return this.formatAddress(this.transactionFromHash,w)}},{key:"secondTxHash",get:function(){return this.formatAddress(this.transactionToHash,w)}},{key:"handleViewTransactionsHistory",value:function(){y.ZP.push({name:k.sn.BridgeTransactionsHistory})}},{key:"navigateToBridge",value:function(){y.ZP.push({name:k.sn.Bridge})}},{key:"created",value:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.historyItem){t.next=3;break}return this.navigateToBridge(),t.abrupt("return");case 3:return t.next=5,this.withParentLoading((0,a.Z)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=!e.txInProcess&&(!e.isTransferStarted||e.isTransactionFromPending||e.isTransactionToPending),t.next=3,e.handleTransaction(s);case 3:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"beforeDestroy",value:function(){if(this.historyItem){var t=(0,o.Z)({},this.historyItem);t.id&&!this.txInProcess&&(0,F.gR)(t)&&(F.Zc.removeHistory(t.id),this.setHistory())}this.setHistoryId()}},{key:"getTxIconStatusClasses",value:function(t){var e="network-info-icon",s=[e],n=t?this.isTransactionToFailed:this.isTransactionFromFailed,i=t?this.isTransactionToCompleted:this.isTransactionFromCompleted;return n?s.push("".concat(e,"--error")):i?s.push("".concat(e,"--success")):s.push("".concat(e,"--pending")),s.join(" ")}},{key:"firstTxIconStatusClasses",get:function(){return this.getTxIconStatusClasses()}},{key:"secondTxIconStatusClasses",get:function(){return this.getTxIconStatusClasses(!0)}},{key:"getHashContainerClasses",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e="transaction-hash-container",s=[e];return t&&s.push("".concat(e,"--with-dropdown")),s.join(" ")}},{key:"firstTxHashContainerClasses",get:function(){return this.getHashContainerClasses()}},{key:"secondTxHashContainerClasses",get:function(){return this.getHashContainerClasses()}},{key:"formattedNetworkStep1",get:function(){return this.t(this.formatNetwork(this.isSoraToEvm,!0))}},{key:"formattedNetworkStep2",get:function(){return this.t(this.formatNetwork(!this.isSoraToEvm,!0))}},{key:"comfirmationBlocksLeft",get:function(){var t;if(this.isSoraToEvm||!this.isTransactionToPending||null===(t=this.historyItem)||void 0===t||!t.blockHeight||!this.evmBlockNumber)return 0;var e=+this.historyItem.blockHeight+30-this.evmBlockNumber;return Math.max(e,0)}},{key:"failedClassStep1",get:function(){return this.getFailedClass(this.isTransactionFromFailed)}},{key:"failedClassStep2",get:function(){return this.getFailedClass(this.isTransactionToFailed)}},{key:"getFailedClass",value:function(t){return t?"info-line--error":""}},{key:"formatTransactionDate",value:function(t){var e=t?new Date(t):new Date;return this.formatDate(e.getTime())}},{key:"handleTransaction",value:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(){var e,s=this,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],t.next=3,this.checkConnectionToExternalAccount((0,a.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e||null===(n=s.historyItem)||void 0===n||!n.id){t.next=3;break}return t.next=3,s.handleBridgeTx(s.historyItem.id);case 3:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleBack",value:function(){y.ZP.push({name:this.prevRoute})}}]),s}((0,v.Wr)(T.tA.FormattedAmountMixin,T.tA.CopyAddressMixin,p.Z,g.Z));(0,h.__decorate)([b.SB.bridge.waitingForApprove],_.prototype,"waitingForApprove",void 0),(0,h.__decorate)([b.SB.bridge.inProgressIds],_.prototype,"inProgressIds",void 0),(0,h.__decorate)([b.SB.router.prev],_.prototype,"prevRoute",void 0),(0,h.__decorate)([b.Yn.assets.assetDataByAddress],_.prototype,"getAsset",void 0),(0,h.__decorate)([b.Yn.bridge.historyItem],_.prototype,"historyItem",void 0),(0,h.__decorate)([b.Yn.bridge.isTxEvmAccount],_.prototype,"isTxEvmAccount",void 0),(0,h.__decorate)([b.QF.bridge.setHistory],_.prototype,"setHistory",void 0),(0,h.__decorate)([b.QF.bridge.setHistoryId],_.prototype,"setHistoryId",void 0),(0,h.__decorate)([b.aD.bridge.handleBridgeTx],_.prototype,"handleBridgeTx",void 0),_=(0,h.__decorate)([(0,v.wA)({components:{GenericPageHeader:(0,y.kF)(k.z8.GenericPageHeader),ConfirmBridgeTransactionDialog:(0,y.kF)(k.z8.ConfirmBridgeTransactionDialog),FormattedAmount:T.wx.FormattedAmount,InfoLine:T.wx.InfoLine}})],_);var I=_,E=I,C=s(1001),x=(0,C.Z)(E,n,i,!1,null,"f3ada680",null),N=x.exports}}]);