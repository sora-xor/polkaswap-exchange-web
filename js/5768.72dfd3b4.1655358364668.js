"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[5768],{95768:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog-base",{staticClass:"moonpay-dialog",attrs:{visible:e.visibility},on:{"update:visible":function(t){e.visibility=t}},scopedSlots:e._u([{key:"title",fn:function(){return[n("moonpay-logo",{attrs:{theme:e.libraryTheme}})]},proxy:!0}])},[n("moonpay-widget",{attrs:{src:e.widgetUrl}})],1)},o=[],a=n(55005),r=n(41067),s=n(1379),l=n(7178),c=n(46108),u=n(55427),p=n(34563),d=(n(35666),n(92222),n(70655)),g=n(53545),y=n(44372),h=n(1753),f=n(68006),v=n(85530),m=n(80710),_=n(16546),b=n(74614),Z=n(42024),w=n(25108),T=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,p.Z)((0,l.Z)(e),"widgetUrl",""),(0,p.Z)((0,l.Z)(e),"transactionsPolling",void 0),(0,p.Z)((0,l.Z)(e),"account",void 0),(0,p.Z)((0,l.Z)(e),"isLoggedIn",void 0),(0,p.Z)((0,l.Z)(e),"lastCompletedTransaction",void 0),(0,p.Z)((0,l.Z)(e),"libraryTheme",void 0),(0,p.Z)((0,l.Z)(e),"pollingTimestamp",void 0),(0,p.Z)((0,l.Z)(e),"dialogVisibility",void 0),(0,p.Z)((0,l.Z)(e),"setDialogVisibility",void 0),(0,p.Z)((0,l.Z)(e),"createTransactionsPolling",void 0),e}return(0,s.Z)(n,[{key:"handleLoggedInStateChange",value:function(e){e||this.stopPollingMoonpay()}},{key:"handleVisibleStateChange",value:function(e){e&&!this.pollingTimestamp&&this.startPollingMoonpay()}},{key:"handleLanguageChange",value:function(){this.pollingTimestamp||this.updateWidgetUrl()}},{key:"handleLastTransaction",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&(!n||n.id!==t.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.prepareBridgeForTransfer(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"visibility",get:function(){return this.dialogVisibility},set:function(e){this.setDialogVisibility(e)}},{key:"created",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.withApi((function(){t.initMoonpayApi(),t.updateWidgetUrl()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){this.stopPollingMoonpay()}},{key:"createMoonpayWidgetUrl",value:function(){return this.moonpayApi.createWidgetUrl({colorCode:(0,v.y_)("--s-color-theme-accent"),externalTransactionId:this.account.address,language:this.language})}},{key:"updateWidgetUrl",value:function(){var e=this;this.widgetUrl="";var t=this.createMoonpayWidgetUrl();setTimeout((function(){e.widgetUrl=t}))}},{key:"startPollingMoonpay",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return w.info("Moonpay: start polling to get user transactions"),e.next=3,this.createTransactionsPolling();case 3:this.transactionsPolling=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"stopPollingMoonpay",value:function(){w.info("Moonpay: stop polling"),"function"===typeof this.transactionsPolling&&this.transactionsPolling()}},{key:"prepareBridgeForTransfer",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setDialogVisibility(!1),this.stopPollingMoonpay(),this.updateWidgetUrl(),e.next=5,this.showNotification(Z.u.Success);case 5:return e.next=7,this.prepareMoonpayTxForBridgeTransfer(t,!0);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}((0,g.Wr)(f.Z));(0,d.__decorate)([b.Yn.wallet.account.account],T.prototype,"account",void 0),(0,d.__decorate)([b.Yn.wallet.account.isLoggedIn],T.prototype,"isLoggedIn",void 0),(0,d.__decorate)([b.Yn.moonpay.lastCompletedTransaction],T.prototype,"lastCompletedTransaction",void 0),(0,d.__decorate)([b.Yn.libraryTheme],T.prototype,"libraryTheme",void 0),(0,d.__decorate)([b.SB.moonpay.pollingTimestamp],T.prototype,"pollingTimestamp",void 0),(0,d.__decorate)([b.SB.moonpay.dialogVisibility],T.prototype,"dialogVisibility",void 0),(0,d.__decorate)([b.QF.moonpay.setDialogVisibility],T.prototype,"setDialogVisibility",void 0),(0,d.__decorate)([b.aD.moonpay.createTransactionsPolling],T.prototype,"createTransactionsPolling",void 0),(0,d.__decorate)([(0,g.RL)("isLoggedIn",{immediate:!0})],T.prototype,"handleLoggedInStateChange",null),(0,d.__decorate)([(0,g.RL)("visibility",{immediate:!0})],T.prototype,"handleVisibleStateChange",null),(0,d.__decorate)([(0,g.RL)("language"),(0,g.RL)("libraryTheme")],T.prototype,"handleLanguageChange",null),(0,d.__decorate)([(0,g.RL)("lastCompletedTransaction")],T.prototype,"handleLastTransaction",null),T=(0,d.__decorate)([(0,g.wA)({components:{DialogBase:y["default"],MoonpayLogo:h["default"],MoonpayWidget:(0,m.kF)(_.z8.MoonpayWidget)}})],T);var k=T,L=k,x=n(1001),M=(0,x.Z)(L,i,o,!1,null,null,null),C=M.exports}}]);