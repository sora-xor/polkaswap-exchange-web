var h=Object.defineProperty;var y=(n,e,t)=>e in n?h(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>y(n,typeof e!="symbol"?e+"":e,t);import{m as p,$ as c,X as g,b as f,Y as B,g as v,h as b,W as _,C as A,_ as m,l as F,j as L,P as l,n as k}from"./index-BHqySXo4.js";var w=Object.defineProperty,x=Object.getOwnPropertyDescriptor,r=(n,e,t,a)=>{for(var o=a>1?void 0:a?x(e,t):e,u=n.length-1,d;u>=0;u--)(d=n[u])&&(o=(a?d(e,t,o):d(o))||o);return a&&o&&w(e,t,o),o};let s=class extends p(c.TransactionMixin,c.DialogMixin,c.FormattedAmountMixin){constructor(){super(...arguments);i(this,"xor",g);i(this,"receivedAsset");i(this,"burnedAsset");i(this,"rate");i(this,"max");i(this,"min");i(this,"networkFees");i(this,"accountXor");i(this,"isLoggedIn");i(this,"value","")}async handleDialogVisibility(t){await this.$nextTick(),t&&(this.value="")}getKey(t){return this.isVisible?`${t}-opened`:`${t}-closed`}get willBeBurned(){return this.getFPNumber(+(this.value||"0")*this.rate)}get title(){return`Reserve ${this.receivedAsset.symbol} token`}get receivedPlaceholder(){return`HOW MUCH ${this.receivedAsset.symbol} DO YOU WANT?`}get toBeBurnedLabel(){return`${this.burnedAsset.symbol} TO BE BURNED`}get toBeBurnedKey(){return this.getKey(`${this.burnedAsset.symbol}-burned`)}get yourBalanceLeftLabel(){return`YOUR ${this.burnedAsset.symbol} BALANCE LEFT`}get yourBalanceLeftKey(){return this.getKey(`${this.burnedAsset.symbol}-left`)}get isAmountLessThanMin(){return+(this.value||"0")<this.min}get formattedWillBeBurned(){return this.willBeBurned.toLocaleString()}get formattedFiatWillBeBurned(){return this.getFiatAmountByFPNumber(this.willBeBurned,this.burnedAsset)}get networkFee(){return this.networkFees[f.Operation.Burn]}get networkFeeFormatted(){return this.formatCodecNumber(this.networkFee)}get xorBalance(){var t,a;return this.getFPNumberFromCodec(((a=(t=this.accountXor)==null?void 0:t.balance)==null?void 0:a.transferable)??"0")}get tokensLeft(){return this.xorBalance.gte(this.willBeBurned)?this.xorBalance.sub(this.willBeBurned):this.Zero}get formattedTokensLeft(){return this.tokensLeft.toLocaleString()}get formattedFiatTokensLeft(){return this.getFiatAmountByFPNumber(this.tokensLeft,this.burnedAsset)}get isZeroAmount(){return B(this.value)}get isInsufficientBalance(){return this.xorBalance.sub(this.willBeBurned).sub(this.getFPNumberFromCodec(this.networkFee)).isLtZero()}get isBurnDisabled(){return this.loading||this.isZeroAmount||this.isAmountLessThanMin||this.isInsufficientBalance}handleInputField(t){this.value!==t&&(this.value=t)}async handleConfirmBurn(){if(this.isInsufficientBalance)this.$alert(this.t("insufficientBalanceText",{tokenSymbol:this.burnedAsset.symbol}),{title:this.t("errorText")}),this.$emit("confirm");else try{await this.withNotifications(async()=>{await f.api.assets.burn(this.burnedAsset,this.willBeBurned.toString())}),this.$emit("confirm",!0)}catch{this.$emit("confirm")}this.isVisible=!1}};r([l({type:Object,required:!0})],s.prototype,"receivedAsset",2);r([l({type:Object,required:!0})],s.prototype,"burnedAsset",2);r([l({type:Number,default:1e6})],s.prototype,"rate",2);r([l({type:Number,default:1e4})],s.prototype,"max",2);r([l({type:Number,default:1})],s.prototype,"min",2);r([v.wallet.settings.networkFees],s.prototype,"networkFees",2);r([b.assets.xor],s.prototype,"accountXor",2);r([b.wallet.account.isLoggedIn],s.prototype,"isLoggedIn",2);r([_("visible")],s.prototype,"handleDialogVisibility",1);s=r([A({components:{DialogBase:m.DialogBase,TokenLogo:m.TokenLogo,InfoLine:m.InfoLine,TokenInput:F(L.TokenInput)}})],s);var T=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("dialog-base",{attrs:{visible:e.isVisible,title:e.title,"custom-class":"dialog--confirm-burn"},on:{"update:visible":function(a){e.isVisible=a}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("s-button",{staticClass:"s-typography-button--large",attrs:{type:"primary",disabled:e.isBurnDisabled},on:{click:e.handleConfirmBurn}},[e.isZeroAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isAmountLessThanMin?[e._v("NEED TO RESERVE MORE THAN "+e._s(e.min))]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.burnedAsset.symbol}))+" ")]:[e._v("RESERVE")]],2)]},proxy:!0}])},[t("token-input",{staticClass:"token-input",attrs:{max:e.max,title:e.receivedPlaceholder,"is-fiat-editable":!1,token:e.receivedAsset,value:e.value},on:{input:e.handleInputField}}),t("info-line",{key:e.toBeBurnedKey,attrs:{label:e.toBeBurnedLabel,value:e.formattedWillBeBurned,"asset-symbol":e.burnedAsset.symbol,"fiat-value":e.formattedFiatWillBeBurned,"is-formatted":""}}),t("info-line",{key:e.yourBalanceLeftKey,attrs:{label:e.yourBalanceLeftLabel,value:e.formattedTokensLeft,"asset-symbol":e.burnedAsset.symbol,"fiat-value":e.formattedFiatTokensLeft,"is-formatted":"","value-can-be-hidden":""}}),e.isLoggedIn?t("info-line",{attrs:{label:e.t("networkFeeText"),"label-tooltip":e.t("networkFeeTooltipText"),value:e.networkFeeFormatted,"asset-symbol":e.xor.symbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}}):e._e(),t("div",{staticClass:"disclaimer s-flex"},[t("p",{staticClass:"disclaimer__text p3"},[e._v(" Disclaimer: Burning your "+e._s(e.burnedAsset.symbol)+" tokens is an irreversible action that permanently removes them from your wallet. Please proceed with caution and ensure you fully understand the implications of this transaction ")]),t("div",{staticClass:"disclaimer__badge s-flex"},[t("s-icon",{staticClass:"disclaimer__icon",attrs:{name:"notifications-alert-triangle-24",size:"24"}})],1)])],1)},C=[],D=k(s,T,C,!1,null,"426dd3a7");const O=D.exports;export{O as default};
