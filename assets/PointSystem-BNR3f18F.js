var v=Object.defineProperty;var C=(r,t,e)=>t in r?v(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>C(r,typeof t!="symbol"?t+"":t,e);import{m as b,$ as g,a5 as x,f as w,X as y,aI as c,Z as d,g as m,h as p,k as S,W as F,C as k,_ as h,n as R}from"./index-BHqySXo4.js";import{f as D}from"./burnXor-Bp8P8SgZ.js";import{f as T,a as _,C as f}from"./pointSystem-CudlRcaU.js";var P=Object.defineProperty,L=Object.getOwnPropertyDescriptor,n=(r,t,e,a)=>{for(var o=a>1?void 0:a?L(t,e):t,l=r.length-1,u;l>=0;l--)(u=r[l])&&(o=(a?u(t,e,o):u(o))||o);return a&&o&&P(t,e,o),o};let i=class extends b(g.LoadingMixin,g.FormattedAmountMixin,x){constructor(){super(...arguments);s(this,"LogoSize",w.LogoSize);s(this,"referralRewards");s(this,"blockNumber");s(this,"networkFees");s(this,"libraryTheme");s(this,"account");s(this,"xor");s(this,"currencySymbol");s(this,"getAccountReferralRewards");s(this,"burnData",null);s(this,"bridgeData",[]);s(this,"poolDepositCount",0);s(this,"poolWithdrawCount",0);s(this,"totalSwapTxs",0)}updateSubscriptions(e){e?this.withLoading(this.initData):(this.burnData=null,this.bridgeData=[],this.poolDepositCount=0,this.poolWithdrawCount=0,this.totalSwapTxs=0)}get xorSymbol(){return y.symbol}get referralsCardStyles(){return{backgroundImage:`url('/points/${this.libraryTheme}/referrals.png')`}}get bridgeCardStyles(){return{backgroundImage:`url('/points/${this.libraryTheme}/bridge.png')`}}get totalReferrals(){return this.referralRewards?Object.keys(this.referralRewards.invitedUserRewards).length:0}get bridgeVolume(){return this.bridgeData.reduce((e,{amount:a,assetId:o})=>{const l=this.getFPNumberFiatAmountByFPNumber(a,{address:o});return l?e.add(l):e},this.Zero)}get totalBridgeVolume(){return c(this.bridgeVolume)}get xorBurned(){return c(this.burnData??this.Zero)}get xorBurnedFiat(){return this.burnData?this.getFiatAmountByFPNumber(this.burnData)||d:d}get totalOutgoingBridgeTxs(){return this.bridgeData.filter(({type:e})=>e==="outgoing").length}get totalBridgeTxs(){return this.bridgeData.length}get totalPoolTxs(){return this.poolDepositCount+this.poolWithdrawCount}get totalFees(){let e=this.Zero;return this.totalSwapTxs&&this.networkFees.Swap&&(e=e.add(this.getFPNumberFromCodec(this.networkFees.Swap).mul(this.totalSwapTxs))),this.totalOutgoingBridgeTxs&&this.networkFees.EthBridgeOutgoing&&(e=e.add(this.getFPNumberFromCodec(this.networkFees.EthBridgeOutgoing).mul(this.totalOutgoingBridgeTxs))),this.poolDepositCount&&this.networkFees.AddLiquidity&&(e=e.add(this.getFPNumberFromCodec(this.networkFees.AddLiquidity).mul(this.poolDepositCount))),this.poolWithdrawCount&&this.networkFees.RemoveLiquidity&&(e=e.add(this.getFPNumberFromCodec(this.networkFees.RemoveLiquidity).mul(this.poolWithdrawCount))),e}get feesSpent(){return c(this.totalFees)}get feesSpentFiat(){return this.getFiatAmountByFPNumber(this.totalFees)||d}get totalReferralRewards(){var e;return c(((e=this.referralRewards)==null?void 0:e.rewards)??this.Zero)}get totalReferralRewardsFiat(){var e;return(e=this.referralRewards)!=null&&e.rewards?this.getFiatAmountByFPNumber(this.referralRewards.rewards)||d:d}async initData(){if(this.isLoggedIn){await this.getAccountReferralRewards();const e=this.account.address,a=this.blockNumber;if(!(e&&a))return;const o=await D(0,a,e);this.burnData=o.reduce((l,{amount:u})=>l.add(u),this.Zero),this.bridgeData=await T(0,a,e),this.totalSwapTxs=await _(0,a,e,f.Swap),this.poolDepositCount=await _(0,a,e,f.PoolDeposit),this.poolWithdrawCount=await _(0,a,e,f.PoolWithdraw)}}created(){this.withApi(async()=>{await this.initData()})}};n([m.referrals.referralRewards],i.prototype,"referralRewards",2);n([m.wallet.settings.blockNumber],i.prototype,"blockNumber",2);n([m.wallet.settings.networkFees],i.prototype,"networkFees",2);n([p.libraryTheme],i.prototype,"libraryTheme",2);n([p.wallet.account.account],i.prototype,"account",2);n([p.assets.xor],i.prototype,"xor",2);n([p.wallet.settings.currencySymbol],i.prototype,"currencySymbol",2);n([S.referrals.getAccountReferralRewards],i.prototype,"getAccountReferralRewards",2);n([F("isLoggedIn")],i.prototype,"updateSubscriptions",1);i=n([k({components:{FormattedAmount:h.FormattedAmount,TokenLogo:h.TokenLogo}})],i);var B=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"points__container"},[e("s-card",{staticClass:"points",attrs:{"border-radius":"small",shadow:"always",size:"medium",pressed:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h3",{staticClass:"points__header"},[t._v(t._s(t.t("points.title")))])]},proxy:!0}])},[e("div",{staticClass:"points__main s-flex-column"},[t.isLoggedIn?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("div",{staticClass:"points__card points__card-bridge",style:t.bridgeCardStyles},[e("div",{staticClass:"points__card-header s-flex-column"},[e("span",{staticClass:"points__card-title"},[t._v(t._s(t.t("points.bridgeVolume")))]),e("formatted-amount",{staticClass:"points__card-value",attrs:{"font-weight-rate":t.FontWeightRate.MEDIUM,"font-size-rate":t.FontSizeRate.MEDIUM,value:t.totalBridgeVolume.amount,"asset-symbol":t.totalBridgeVolume.suffix,"symbol-as-decimal":""},scopedSlots:t._u([{key:"prefix",fn:function(){return[t._v(t._s(t.currencySymbol))]},proxy:!0}])})],1)]),e("div",{staticClass:"points__card points__card-xor"},[e("div",{staticClass:"item s-flex"},[e("span",{staticClass:"item-title"},[t._v(t._s(t.t("points.feesSpent")))]),e("div",{staticClass:"item-value s-flex"},[e("div",{staticClass:"s-flex-column"},[e("formatted-amount",{staticClass:"item-value__tokens",attrs:{value:t.feesSpent.amount},scopedSlots:t._u([{key:"prefix",fn:function(){return[t._v(t._s(t.xorSymbol))]},proxy:!0}])},[t._v(" "+t._s(t.feesSpent.suffix)+" ")]),e("formatted-amount",{staticClass:"item-value__fiat",attrs:{"is-fiat-value":"","fiat-default-rounding":"","value-can-be-hidden":"","font-size-rate":t.FontSizeRate.MEDIUM,value:t.feesSpentFiat,"is-formatted":""}})],1),e("token-logo",{staticClass:"item-value__icon",attrs:{token:t.xor,size:t.LogoSize.SMALL}})],1)]),e("s-divider",{staticClass:"points__card-divider"}),e("div",{staticClass:"item s-flex"},[e("span",{staticClass:"item-title"},[t._v(t._s(t.t("points.xorBurned")))]),e("div",{staticClass:"item-value s-flex"},[e("div",{staticClass:"s-flex-column"},[e("formatted-amount",{staticClass:"item-value__tokens",attrs:{value:t.xorBurned.amount},scopedSlots:t._u([{key:"prefix",fn:function(){return[t._v(t._s(t.xorSymbol))]},proxy:!0}])},[t._v(" "+t._s(t.xorBurned.suffix)+" ")]),e("formatted-amount",{staticClass:"item-value__fiat",attrs:{"is-fiat-value":"","fiat-default-rounding":"","value-can-be-hidden":"","font-size-rate":t.FontSizeRate.MEDIUM,value:t.xorBurnedFiat,"is-formatted":""}})],1),e("token-logo",{staticClass:"item-value__icon",attrs:{token:t.xor,size:t.LogoSize.SMALL}})],1)])],1),e("div",{staticClass:"points__txs s-flex"},[e("div",{staticClass:"points__block swap s-flex-column"},[e("span",{staticClass:"points__block-header"},[t._v("SWAP TXNS")]),e("span",{staticClass:"points__block-value"},[t._v(t._s(t.totalSwapTxs))])]),e("div",{staticClass:"points__block bridge s-flex-column"},[e("span",{staticClass:"points__block-header"},[t._v("BRIDGE TXNS")]),e("span",{staticClass:"points__block-value"},[t._v(t._s(t.totalBridgeTxs))])]),e("div",{staticClass:"points__block pool s-flex-column"},[e("span",{staticClass:"points__block-header"},[t._v("POOL TXNS")]),e("span",{staticClass:"points__block-value"},[t._v(t._s(t.totalPoolTxs))])])]),e("div",{staticClass:"points__card points__card-referrals",style:t.referralsCardStyles},[e("div",{staticClass:"points__card-header s-flex-column"},[e("span",{staticClass:"points__card-title"},[t._v(t._s(t.t("points.yourReferrals")))]),e("span",{staticClass:"points__card-value s-flex"},[e("span",{staticClass:"account-icon"}),t._v(" "+t._s(t.t("points.accountsText",{amount:t.totalReferrals}))+" ")])]),e("s-divider",{staticClass:"points__card-divider"}),e("div",{staticClass:"item s-flex"},[e("span",{staticClass:"item-title"},[t._v(t._s(t.t("points.yourRewards")))]),e("div",{staticClass:"item-value s-flex"},[e("div",{staticClass:"s-flex-column"},[e("formatted-amount",{staticClass:"item-value__tokens",attrs:{value:t.totalReferralRewards.amount},scopedSlots:t._u([{key:"prefix",fn:function(){return[t._v(t._s(t.xorSymbol))]},proxy:!0}])},[t._v(" "+t._s(t.totalReferralRewards.suffix)+" ")]),e("formatted-amount",{staticClass:"item-value__fiat",attrs:{"is-fiat-value":"","fiat-default-rounding":"","value-can-be-hidden":"","font-size-rate":t.FontSizeRate.MEDIUM,value:t.totalReferralRewardsFiat,"is-formatted":""}})],1),e("token-logo",{staticClass:"item-value__icon",attrs:{token:t.xor,size:t.LogoSize.SMALL}})],1)])],1)]):e("div",{staticClass:"points__connect s-flex-column"},[e("span",{staticClass:"points__connect-title d2"},[t._v(t._s(t.t("points.loginText")))]),e("s-button",{staticClass:"points__connect-action s-typography-button--medium",attrs:{type:"primary"},on:{click:t.connectSoraWallet}},[t._v(" "+t._s(t.t("connectWalletText"))+" ")])],1),e("a",{staticClass:"points__soratopia s-flex",attrs:{rel:"nofollow noopener",target:"_blank",href:"https://t.me/soratopia_bot/app"}},[e("div",{staticClass:"points__soratopia-container s-flex"},[e("button",{staticClass:"points__soratopia-action"},[t._v(t._s(t.t("points.openTelegram")))]),e("span",{staticClass:"points__soratopia-text"},[t._v(t._s(t.t("points.toEarnPoints")))])])])])])],1)},A=[],z=R(i,B,A,!1,null,"34a310e8");const E=z.exports;export{E as default};
