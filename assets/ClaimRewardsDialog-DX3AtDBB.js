var p=Object.defineProperty;var g=(i,e,t)=>e in i?p(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var o=(i,e,t)=>g(i,typeof e!="symbol"?e+"":e,t);import{m as h,$ as m,b as w,P as f,W as c,C as v,_ as n,n as y}from"./index-BHqySXo4.js";import{S as F}from"./StakingMixin-CnPsAVWR.js";var _=Object.defineProperty,b=Object.getOwnPropertyDescriptor,d=(i,e,t,a)=>{for(var s=a>1?void 0:a?b(e,t):e,l=i.length-1,u;l>=0;l--)(u=i[l])&&(s=(a?u(e,t,s):u(s))||s);return a&&s&&_(e,t,s),s};let r=class extends h(F,m.DialogMixin,m.TransactionMixin){constructor(){super(...arguments);o(this,"isAdding");o(this,"rewardsDestination","");o(this,"payoutNetworkFee",null)}setRewardsDestination(){this.visible&&(this.rewardsDestination=this.payeeAddress)}get payeeAddress(){switch(this.payee){case"Stash":return this.stash;case"Controller":return this.controller;default:return this.payee}}async handlePendingRewardsChange(){this.payoutNetworkFee=await this.getPayoutNetworkFee({payouts:this.pendingRewards?this.pendingRewards.map(t=>({era:t.era,validators:t.validators.map(a=>a.address)})):[],payee:this.rewardsDestination!==this.payeeAddress?this.rewardsDestination:void 0})}get networkFee(){return this.payoutNetworkFee??"0"}get title(){return this.t("soraStaking.claimRewardsDialog.title")}get inputTitle(){return this.title}get rewardedFundsCodec(){return this.rewardedFunds.toCodecString()}get part(){return this.rewardedFunds.div(w.FPNumber.HUNDRED)}get valueFundsEmpty(){return this.rewardedFunds.isZero()}get stakingBalance(){return this.availableFunds}get stakingBalanceCodec(){return this.stakingBalance.toCodecString()}get isInsufficientBalance(){return w.FPNumber.lt(this.rewardedFunds,this.rewardedFunds)}get selectedValidatorsFormatted(){return this.t("soraStaking.selectedValidators",{count:this.selectedValidators.length,max:this.validators.length})}get payouts(){return this.pendingRewards?this.pendingRewards.map(t=>({era:t.era,validators:t.validators.map(a=>a.address)})):[]}async handleConfirm(){await this.withNotifications(async()=>{await this.payout({payouts:this.payouts,payee:this.rewardsDestination!==this.payeeAddress?this.rewardsDestination:void 0}),await this.getPendingRewards(),this.closeDialog()})}checkPendingRewards(){this.$emit("show-rewards")}};d([f({default:()=>!0,type:Boolean})],r.prototype,"isAdding",2);d([c("visible",{immediate:!0}),c("payeeAddress",{immediate:!0})],r.prototype,"setRewardsDestination",1);d([c("pendingRewards",{immediate:!0})],r.prototype,"handlePendingRewardsChange",1);r=d([v({components:{FormattedAmount:n.FormattedAmount,DialogBase:n.DialogBase,InfoLine:n.InfoLine,TokenLogo:n.TokenLogo,FormattedAmountWithFiatValue:n.FormattedAmountWithFiatValue}})],r);var D=function(){var a;var e=this,t=e._self._c;return e._self._setupProxy,t("dialog-base",{attrs:{visible:e.isVisible,title:e.title},on:{"update:visible":function(s){e.isVisible=s}}},[t("div",{staticClass:"claim-rewards-dialog"},[t("div",{staticClass:"reward"},[t("formatted-amount-with-fiat-value",{staticClass:"reward-amount",attrs:{"symbol-as-decimal":"","value-can-be-hidden":"",value:e.rewardedFundsFormatted,"fiat-value":e.rewardedFundsFiat}}),e.rewardAsset?[t("token-logo",{staticClass:"reward-logo",attrs:{"token-symbol":e.rewardAsset.symbol}}),t("span",{staticClass:"reward-symbol"},[e._v(" "+e._s(e.rewardAsset.symbol)+" ")])]:e._e()],2),t("s-input",{attrs:{placeholder:e.t("soraStaking.claimRewardsDialog.rewardsDestination"),suffix:"s-icon-basic-user-24",disabled:!0},model:{value:e.rewardsDestination,callback:function(s){e.rewardsDestination=s},expression:"rewardsDestination"}}),t("div",{staticClass:"info"},[t("info-line",{attrs:{label:e.t("networkFeeText"),"label-tooltip":e.t("networkFeeTooltipText"),value:e.networkFeeFormatted,"asset-symbol":(a=e.xor)==null?void 0:a.symbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}})],1),e.xor&&e.rewardAsset?t("s-button",{staticClass:"s-typography-button--large action-button",attrs:{type:"primary",loading:e.parentLoading||e.loading,disabled:e.isInsufficientXorForFee||e.valueFundsEmpty||e.isInsufficientBalance},on:{click:e.handleConfirm}},[e.isInsufficientXorForFee||e.isInsufficientBalance?[e.isInsufficientBalance?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.rewardAsset.symbol}))+" ")]:e._e(),e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.xor.symbol}))+" ")]:e._e()]:e.valueFundsEmpty?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:[e._v(" "+e._s(e.t("confirmText"))+" ")]],2):e._e(),e.pendingRewards?t("div",{directives:[{name:"button",rawName:"v-button"}],staticClass:"check-pending-rewards",on:{click:e.checkPendingRewards}},[e._v(" "+e._s(e.t("soraStaking.claimRewardsDialog.checkRewards"))+" ("+e._s(e.pendingRewards.length??0)+") ")]):e._e()],1)])},k=[],C=y(r,D,k,!1,null,"da6ad506");const B=C.exports;export{B as default};
