var B=Object.defineProperty;var M=(r,t,e)=>t in r?B(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var _=(r,t,e)=>M(r,typeof t!="symbol"?t+"":t,e);import{m as N,b as c,s as R,aI as x,hw as T,hx as I,C as E,l as u,j as m,_ as d,n as z}from"./index-BHqySXo4.js";import{E as U}from"./ExplorePageMixin-CkKfV7ro.js";import"./ScrollableTableMixin-C9crfC47.js";var V=Object.defineProperty,L=Object.getOwnPropertyDescriptor,O=(r,t,e,a)=>{for(var s=a>1?void 0:a?L(t,e):t,o=r.length-1,n;o>=0;o--)(n=r[o])&&(s=(a?n(t,e,s):n(s))||s);return a&&s&&V(t,e,s),s};let f=class extends N(U){constructor(){super(...arguments);_(this,"orderBooks",[])}get prefilteredItems(){return[...this.orderBooks.reduce((a,s)=>{const{id:{base:o,quote:n},stats:{baseAssetReserves:y,quoteAssetReserves:C,price:p,priceChange:g,volume:h}}=s,i=this.getAsset(o),l=this.getAsset(n);if(!(i&&l))return a;const A=`${i.symbol}-${l.symbol}`,P=c.FPNumber.fromCodecValue(this.getAssetFiatPrice(i)??0),b=c.FPNumber.fromCodecValue(this.getAssetFiatPrice(l)??0),F=c.FPNumber.fromCodecValue(y??0,i.decimals),S=c.FPNumber.fromCodecValue(C??0,l.decimals),k=P.mul(F),D=b.mul(S),v=k.add(D),w=p.mul(b);return a.push({name:A,baseAsset:i,targetAsset:l,price:p.toNumber(),priceFormatted:R(p),priceUSDFormatted:w.toLocaleString(),priceChangeDay:g.toNumber(),priceChangeDayFP:g,volumeDay:h.toNumber(),volumeDayFormatted:x(h),tvl:v.toNumber(),tvlFormatted:x(v)}),a},[])].sort((a,s)=>T({baseAsset:a.baseAsset,poolAsset:a.targetAsset},{baseAsset:s.baseAsset,poolAsset:s.targetAsset}))}async updateExploreData(){await this.withLoading(async()=>{await this.withParentLoading(async()=>{this.orderBooks=Object.freeze(await I(this.allowedAssets)??[])})})}};f=O([E({components:{PairTokenLogo:u(m.PairTokenLogo),PriceChange:u(m.PriceChange),SortButton:u(m.SortButton),TokenAddress:d.TokenAddress,FormattedAmount:d.FormattedAmount,HistoryPagination:d.HistoryPagination}})],f);var W=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("s-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState,expression:"loadingState"}],ref:"table",staticClass:"explore-table",attrs:{data:t.tableItems,"highlight-current-row":!1,size:"small"}},[e("s-table-column",{attrs:{width:"240",label:"#"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"explore-table-item-index"},[e("span",{directives:[{name:"button",rawName:"v-button"}],class:["explore-table-item-index--head",{active:t.isDefaultSort}],on:{click:t.handleResetSort}},[t._v(" # ")])]),e("div",{staticClass:"explore-table-item-logo"},[e("s-icon",{staticClass:"explore-table-item-logo--head",attrs:{name:"various-bone-24",size:"14px"}})],1),e("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[e("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.t("nameText")))])])]},proxy:!0},{key:"default",fn:function({$index:a,row:s}){return[e("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[t._v(t._s(a+t.startIndex+1))]),e("pair-token-logo",{staticClass:"explore-table-item-logo",attrs:{"first-token":s.baseAsset,"second-token":s.targetAsset,size:"small"}}),e("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[e("div",{staticClass:"explore-table-item-name"},[t._v(t._s(s.baseAsset.symbol)+"-"+t._s(s.targetAsset.symbol))])])]}}])}),e("s-table-column",{key:"price",attrs:{"min-width":"130","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"price",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Price")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("formatted-amount",{staticClass:"explore-table-item-price",attrs:{"fiat-default-rounding":"","font-weight-rate":t.FontWeightRate.MEDIUM,value:a.priceFormatted}}),e("formatted-amount",{staticClass:"explore-table-item-price",attrs:{"is-fiat-value":"","fiat-default-rounding":"","font-weight-rate":t.FontWeightRate.MEDIUM,value:a.priceUSDFormatted}})]}}])}),e("s-table-column",{attrs:{"min-width":"104","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"priceChangeDay",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("1D %")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("price-change",{attrs:{value:a.priceChangeDayFP}})]}}])}),e("s-table-column",{attrs:{"min-width":"104","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"volumeDay",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("1D Vol.")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":t.FontWeightRate.MEDIUM,value:a.volumeDayFormatted.amount}},[t._v(" "+t._s(a.volumeDayFormatted.suffix)+" ")])]}}])}),e("s-table-column",{attrs:{"min-width":"104","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"tvl",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.TranslationConsts.TVL))]),e("s-tooltip",{attrs:{"border-radius":"mini",content:t.t("tooltips.tvl")}},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function({row:a}){return[e("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":t.FontWeightRate.MEDIUM,value:a.tvlFormatted.amount}},[t._v(" "+t._s(a.tvlFormatted.suffix)+" ")])]}}])})],1),e("history-pagination",{staticClass:"explore-table-pagination",attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,total:t.total,"last-page":t.lastPage,loading:t.loadingState},on:{"pagination-click":t.handlePaginationClick}})],1)},j=[],Q=z(f,W,j,!1,null,null);const J=Q.exports;export{J as default};
