var b=Object.defineProperty;var _=(n,e,t)=>e in n?b(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>_(n,typeof e!="symbol"?e+"":e,t);import{f as h,m as v,T as x,L as N,gZ as C,C as D,P as r,R as w,n as M}from"./index-BHqySXo4.js";import $ from"./GenericPageHeader-f7JSw7W0.js";import{N as c}from"./consts-lPM2p5U7.js";const T="wss?:\\/\\/",g="(?::([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5]))",R="(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)*[a-z0-9][a-z0-9-]{0,61}[a-z0-9]",m="\\/[a-z0-9-_]+",u="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)",A=`${u}(?:\\.${u}){3}`,y=n=>`^${n}`,P=n=>`^${n}$`,f=new RegExp(y(T)),L=new RegExp(y(`${R}${g}?(${m})*/?`)),z=new RegExp(P(`${A}${g}?(${m})*/?`));h.syntheticAssetRegexp;h.kensetsuAssetRegexp;var B=Object.defineProperty,F=Object.getOwnPropertyDescriptor,i=(n,e,t,o)=>{for(var d=o>1?void 0:o?F(e,t):e,l=n.length-1,p;l>=0;l--)(p=n[l])&&(d=(o?p(e,t,d):p(d))||d);return o&&d&&B(e,t,d),d};const I=n=>(e,t,o)=>{if(!t)return o(new Error(n("selectNodeDialog.messages.emptyAddress")));if(!f.test(t))return o(new Error(n("selectNodeDialog.messages.incorrectProtocol")));const d=t.replace(f,"");if(!L.test(d)&&!z.test(d))return o(new Error(n("selectNodeDialog.messages.incorrectAddress")));o()},O=n=>n.charAt(n.length-1)==="/"?n.slice(0,-1):n;let a=class extends v(x){constructor(){super(...arguments);s(this,"handleBack");s(this,"handleNode");s(this,"removeNode");s(this,"node");s(this,"existing");s(this,"removable");s(this,"connected");s(this,"showTutorial");s(this,"disabled");s(this,"nodeAddressConnecting");s(this,"nodeNameInput");s(this,"tutorialLink",N.nodes.tutorial);s(this,"validationRules",{name:[{required:!0,message:this.t("selectNodeDialog.messages.emptyName"),trigger:"blur"}],address:[{validator:I(this.t),trigger:"blur"}]});s(this,"nodeModel",{...c})}created(){this.nodeModel=Object.keys(c).reduce((t,o)=>({...t,[o]:this.node[o]??c[o]}),{})}async mounted(){var t,o;this.inputDisabled||(o=(t=this.nodeNameInput)==null?void 0:t.focus)==null||o.call(t)}get formattedLocation(){var t;return this.existing&&((t=this.node)!=null&&t.location)?C(this.node.location):null}get inputDisabled(){return this.existing&&!this.removable}get buttonText(){return this.existing?this.nodeDataChanged?this.t("selectNodeDialog.updateNode"):this.connected?this.t("selectNodeDialog.connected"):this.t("selectNodeDialog.select"):this.t("selectNodeDialog.addNode")}get buttonDisabled(){return this.disabled||this.connected&&!this.nodeDataChanged}get buttonType(){return this.nodeDataChanged||!this.existing?"primary":"tertiary"}get title(){const t=this.t("selectNodeDialog.customNode");return this.existing&&(this.node.chain||this.node.name)||t}get loading(){return this.nodeAddressConnecting?this.nodeModel.address===this.nodeAddressConnecting:!1}get nodeDataChanged(){return this.nodeModel.name!==this.node.name||this.nodeModel.address!==this.node.address}changeNodeAddress(t){this.nodeModel.address=t.trim().toLowerCase()}async submitForm(){try{await this.$refs.nodeForm.validate();const t={...this.nodeModel,address:O(this.nodeModel.address)};this.handleNode(t,!this.existing||this.nodeDataChanged)}catch(t){console.warn(t)}}};i([r({default:()=>{},type:Function})],a.prototype,"handleBack",2);i([r({default:()=>{},type:Function})],a.prototype,"handleNode",2);i([r({default:()=>{},type:Function})],a.prototype,"removeNode",2);i([r({default:()=>({}),type:Object})],a.prototype,"node",2);i([r({default:!1,type:Boolean})],a.prototype,"existing",2);i([r({default:!1,type:Boolean})],a.prototype,"removable",2);i([r({default:!1,type:Boolean})],a.prototype,"connected",2);i([r({default:!1,type:Boolean})],a.prototype,"showTutorial",2);i([r({default:!1,type:Boolean})],a.prototype,"disabled",2);i([r({default:"",type:String})],a.prototype,"nodeAddressConnecting",2);i([w("nodeNameInput")],a.prototype,"nodeNameInput",2);a=i([D({components:{GenericPageHeader:$}})],a);var E=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("s-form",{ref:"nodeForm",staticClass:"node-info s-flex",attrs:{model:e.nodeModel,rules:e.validationRules},nativeOn:{submit:function(o){return o.preventDefault(),e.submitForm.apply(null,arguments)}}},[t("generic-page-header",{staticClass:"node-info-title",attrs:{"has-button-back":"",title:e.title},on:{back:function(o){return o.stopPropagation(),e.handleBack.apply(null,arguments)}}},[e.existing&&e.removable?[t("s-button",{attrs:{type:"action",icon:"basic-trash-24"},on:{click:function(o){return e.removeNode(e.nodeModel)}}})]:e._e()],2),t("s-form-item",{attrs:{prop:"name"}},[t("s-input",{ref:"nodeNameInput",staticClass:"node-info-input s-typography-input-field",attrs:{placeholder:e.t("nameText"),maxlength:128,disabled:e.inputDisabled},model:{value:e.nodeModel.name,callback:function(o){e.$set(e.nodeModel,"name",o)},expression:"nodeModel.name"}})],1),t("s-form-item",{attrs:{prop:"address"}},[t("s-input",{staticClass:"node-info-input s-typography-input-field",attrs:{placeholder:e.t("addressText"),disabled:e.inputDisabled},on:{change:e.changeNodeAddress},model:{value:e.nodeModel.address,callback:function(o){e.$set(e.nodeModel,"address",o)},expression:"nodeModel.address"}})],1),e.formattedLocation?t("s-form-item",{attrs:{prop:"location"}},[t("div",{staticClass:"node-info-input location-input s-typography-input-field"},[t("span",{staticClass:"location-input__placeholder"},[e._v(e._s(e.t("locationText")))]),t("span",{staticClass:"location-input__value"},[e._v(" "+e._s(e.formattedLocation.name)+" "),t("span",{staticClass:"flag-emodji"},[e._v(e._s(e.formattedLocation.flag))])])])]):e._e(),t("s-button",{staticClass:"node-info-button s-typography-button--big",attrs:{"native-type":"submit",type:e.buttonType,disabled:e.buttonDisabled,loading:e.loading}},[e._v(" "+e._s(e.buttonText)+" ")]),e.showTutorial?t("a",{staticClass:"node-info-button",attrs:{href:e.tutorialLink,tabindex:"-1",target:"_blank",rel:"noreferrer noopener"}},[t("s-button",{staticClass:"node-info-tutorial-button s-typography-button--medium",attrs:{type:"tertiary"}},[e._v(" "+e._s(e.t("selectNodeDialog.howToSetupOwnNode"))+" ")])],1):e._e()],1)},j=[],k=M(a,E,j,!1,null,"8253b745");const J=k.exports;export{J as default};
