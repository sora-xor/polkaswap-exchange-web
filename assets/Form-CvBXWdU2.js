var v=Object.defineProperty;var L=(a,e,i)=>e in a?v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var s=(a,e,i)=>L(a,typeof e!="symbol"?e+"":e,i);import{m as q,$ as h,hF as _,b as k,X as T,am as y,ak as g,a3 as w,ai as x,hf as m,g as A,h as l,k as d,i as C,W as V,C as D,hd as F,he as S,l as c,j as u,_ as b,n as P}from"./index-BHqySXo4.js";import{C as B}from"./ConfirmDialogMixin-BYoYOPfg.js";import{N as I}from"./NetworkFeeDialogMixin-DEf8HRG3.js";import{T as M}from"./TokenSelectMixin-B1fkEMyI.js";import{B as N}from"./BaseTokenPair-BxwVJCxY.js";var O=Object.defineProperty,W=Object.getOwnPropertyDescriptor,o=(a,e,i,t)=>{for(var r=t>1?void 0:t?W(e,i):e,f=a.length-1,p;f>=0;f--)(p=a[f])&&(r=(t?p(e,i,r):p(r))||r);return t&&r&&O(e,i,r),r};let n=class extends q(h.TransactionMixin,h.NetworkFeeWarningMixin,N,I,B,M){constructor(){super(...arguments);s(this,"FocusedField",_);s(this,"slippageToleranceValue");s(this,"xor");s(this,"isLoggedIn");s(this,"shareOfPool");s(this,"liquidityInfo");s(this,"isNotFirstLiquidityProvider");s(this,"setFirstTokenAddress");s(this,"setSecondTokenAddress");s(this,"addLiquidity");s(this,"updateSubscriptions");s(this,"resetSubscriptions");s(this,"setFirstTokenValue");s(this,"setSecondTokenValue");s(this,"setFocusedField");s(this,"showSelectTokenDialog",!1);s(this,"isFirstTokenSelected",!1);s(this,"insufficientBalanceTokenSymbol","")}updateConnectionSubsriptions(e){e?this.updateSubscriptions():this.resetSubscriptions()}get areTokensSelected(){return!!(this.firstToken&&this.secondToken)}get removeLiquidityFormattedFee(){return this.formatCodecNumber(this.networkFees[k.Operation.RemoveLiquidity])}get isXorSufficientForNextOperation(){var i;const e={type:this.isAvailable?k.Operation.AddLiquidity:k.Operation.CreatePair};return((i=this.firstToken)==null?void 0:i.address)===T.address&&(e.amount=this.getFPNumber(this.firstTokenValue),e.isXor=!0),this.isXorSufficientForNextTx(e)}get isFirstMaxButtonAvailable(){return this.firstToken&&this.isLoggedIn?y(this.firstToken,this.firstTokenValue,this.networkFee,this.xor):!1}get isSecondMaxButtonAvailable(){return this.secondToken&&this.isLoggedIn?y(this.secondToken,this.secondTokenValue,this.networkFee,this.xor):!1}get isInsufficientBalance(){if(this.isLoggedIn&&this.areTokensSelected){if(g(this.firstToken,this.firstTokenValue,this.networkFee))return this.insufficientBalanceTokenSymbol=this.firstToken.symbol,!0;if(g(this.secondToken,this.secondTokenValue,this.networkFee))return this.insufficientBalanceTokenSymbol=this.secondToken.symbol,!0}return this.insufficientBalanceTokenSymbol="",!1}async handleAddLiquidityMaxValue(e,i){e&&await this.handleTokenChange(w(e,this.networkFee),i)}async handleAddLiquidity(){if(this.allowFeePopup&&!this.isXorSufficientForNextOperation){if(this.openWarningFeeDialog(),await this.waitOnFeeWarningConfirmation(),!this.isWarningFeeDialogConfirmed)return;this.isWarningFeeDialogConfirmed=!1}this.confirmOrExecute(this.depositLiquidity)}async handleTokenChange(e,i){await i(e)}getTokenBalance(e){return x(e)}openSelectTokenDialog(e){this.isFirstTokenSelected=e,this.showSelectTokenDialog=!0}async selectToken(e){const i=e==null?void 0:e.address;i&&await this.withSelectAssetLoading(async()=>{var t,r;this.isFirstTokenSelected?await this.setFirstTokenAddress(i):await this.setSecondTokenAddress(i),((t=this.firstToken)==null?void 0:t.address)===m.address&&((r=this.secondToken)==null?void 0:r.address)===T.address&&(await this.setFirstTokenAddress(T.address),await this.setSecondTokenAddress(m.address))})}async depositLiquidity(){await this.withNotifications(async()=>{await this.addLiquidity(),this.$emit("back")})}};o([A.settings.slippageTolerance],n.prototype,"slippageToleranceValue",2);o([l.assets.xor],n.prototype,"xor",2);o([l.wallet.account.isLoggedIn],n.prototype,"isLoggedIn",2);o([l.addLiquidity.shareOfPool],n.prototype,"shareOfPool",2);o([l.addLiquidity.liquidityInfo],n.prototype,"liquidityInfo",2);o([l.addLiquidity.isNotFirstLiquidityProvider],n.prototype,"isNotFirstLiquidityProvider",2);o([d.addLiquidity.setFirstTokenAddress],n.prototype,"setFirstTokenAddress",2);o([d.addLiquidity.setSecondTokenAddress],n.prototype,"setSecondTokenAddress",2);o([d.addLiquidity.addLiquidity],n.prototype,"addLiquidity",2);o([d.addLiquidity.updateSubscriptions],n.prototype,"updateSubscriptions",2);o([d.addLiquidity.resetSubscriptions],n.prototype,"resetSubscriptions",2);o([d.addLiquidity.setFirstTokenValue],n.prototype,"setFirstTokenValue",2);o([d.addLiquidity.setSecondTokenValue],n.prototype,"setSecondTokenValue",2);o([C.addLiquidity.setFocusedField],n.prototype,"setFocusedField",2);o([V("nodeIsConnected")],n.prototype,"updateConnectionSubsriptions",1);n=o([D({components:{AddLiquidityConfirm:F(S.AddLiquidityConfirm),AddLiquidityTransactionDetails:F(S.AddLiquidityTransactionDetails),SelectToken:c(u.SelectToken),SlippageTolerance:c(u.SlippageTolerance),NetworkFeeWarningDialog:c(u.NetworkFeeWarningDialog),TokenInput:c(u.TokenInput),InfoLine:b.InfoLine,DialogBase:b.DialogBase}})],n);var X=function(){var e=this,i=e._self._c;return e._self._setupProxy,i("div",[i("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[i("token-input",{attrs:{balance:e.getTokenBalance(e.firstToken),"is-select-available":"","is-max-available":e.isFirstMaxButtonAvailable,title:e.t("createPair.deposit"),token:e.firstToken,value:e.firstTokenValue,disabled:!e.areTokensSelected},on:{input:function(t){return e.handleTokenChange(t,e.setFirstTokenValue)},focus:function(t){return e.setFocusedField(e.FocusedField.First)},max:function(t){return e.handleAddLiquidityMaxValue(t,e.setFirstTokenValue)},select:function(t){return e.openSelectTokenDialog(!0)}}}),i("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}),i("token-input",{attrs:{balance:e.getTokenBalance(e.secondToken),"is-select-available":"","is-max-available":e.isSecondMaxButtonAvailable,title:e.t("createPair.deposit"),token:e.secondToken,value:e.secondTokenValue,disabled:!e.areTokensSelected},on:{input:function(t){return e.handleTokenChange(t,e.setSecondTokenValue)},focus:function(t){return e.setFocusedField(e.FocusedField.Second)},max:function(t){return e.handleAddLiquidityMaxValue(t,e.setSecondTokenValue)},select:function(t){return e.openSelectTokenDialog(!1)}}}),i("slippage-tolerance",{staticClass:"slippage-tolerance-settings"}),i("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary",disabled:!e.areTokensSelected||e.emptyAssets||e.isInsufficientBalance,loading:e.loading||e.isSelectAssetLoading},on:{click:e.handleAddLiquidity}},[e.areTokensSelected?e.emptyAssets?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.insufficientBalanceTokenSymbol}))+" ")]:[e._v(" "+e._s(e.t("createPair.supply"))+" ")]:[e._v(" "+e._s(e.t("buttons.chooseTokens"))+" ")]],2),e.areTokensSelected?[!(e.isAvailable&&e.isNotFirstLiquidityProvider)&&e.emptyAssets?i("div",{staticClass:"info-line-container"},[i("p",{staticClass:"info-line-container__title"},[e._v(e._s(e.t("createPair.firstLiquidityProvider")))]),i("info-line",{scopedSlots:e._u([{key:"info-line-prefix",fn:function(){return[i("p",{staticClass:"info-line--first-liquidity",domProps:{innerHTML:e._s(e.t("createPair.firstLiquidityProviderInfo"))}})]},proxy:!0}],null,!1,3709695096)})],1):e._e(),!e.emptyAssets||(e.liquidityInfo||{}).balance?i("add-liquidity-transaction-details",{staticClass:"info-line-container",attrs:{"info-only":!1}}):e._e()]:e._e()],2),i("select-token",{attrs:{"is-add-liquidity":"","append-to-body":"",visible:e.showSelectTokenDialog,connected:e.isLoggedIn,asset:e.isFirstTokenSelected?e.secondToken:e.firstToken,"is-first-token-selected":e.isFirstTokenSelected,"disabled-custom":e.isFirstTokenSelected},on:{"update:visible":function(t){e.showSelectTokenDialog=t},select:e.selectToken}}),i("add-liquidity-confirm",{attrs:{visible:e.confirmDialogVisibility,"parent-loading":e.parentLoading||e.loading,"share-of-pool":e.shareOfPool,"first-token":e.firstToken,"second-token":e.secondToken,"first-token-value":e.firstTokenValue,"second-token-value":e.secondTokenValue,price:e.price,"price-reversed":e.priceReversed,"slippage-tolerance":e.slippageToleranceValue,"insufficient-balance-token-symbol":e.insufficientBalanceTokenSymbol},on:{"update:visible":function(t){e.confirmDialogVisibility=t},confirm:e.depositLiquidity}}),i("network-fee-warning-dialog",{attrs:{visible:e.showWarningFeeDialog,fee:e.removeLiquidityFormattedFee},on:{"update:visible":function(t){e.showWarningFeeDialog=t},confirm:e.confirmNetworkFeeWariningDialog}})],1)},$=[],R=P(n,X,$,!1,null,"b22fbd40");const J=R.exports;export{J as default};
