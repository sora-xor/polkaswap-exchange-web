var A=Object.defineProperty;var w=(o,t,e)=>t in o?A(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>w(o,typeof t!="symbol"?t+"":t,e);import{m as D,b as c,d as h,s as k,U as C,ac as _,g as F,h as P,W as I,C as L,l as m,j as f,_ as d,n as z}from"./index-BHqySXo4.js";import{I as W}from"./IndexerDataFetchMixin-BNoOn5g-.js";import{S as N}from"./ScrollableTableMixin-C9crfC47.js";import{W as U}from"./WithTokenSelect-DGwbNI0S.js";var H=Object.defineProperty,M=Object.getOwnPropertyDescriptor,g=(o,t,e,s)=>{for(var a=s>1?void 0:s?M(t,e):t,n=o.length-1,r;n>=0;n--)(r=o[n])&&(a=(s?r(t,e,a):r(a))||a);return s&&a&&H(t,e,a),a};let u=class extends D(U,N,W){constructor(){super(...arguments);l(this,"soraNetwork");l(this,"assetsDataTable");l(this,"fetchAmount",100);l(this,"operations",[c.Operation.Swap]);l(this,"fromTimestamp",h().subtract(1,"week").startOf("day").unix())}resetData(t,e){this.checkTriggerUpdate(t,e)}get tableItems(){return this.visibleItems.map(t=>{const e=t.id??"",s=t.blockId??"",a=t.from??"",n=t.assetAddress?this.assetsDataTable[t.assetAddress]:null,r=(n==null?void 0:n.symbol)??"??",i=t.asset2Address?this.assetsDataTable[t.asset2Address]:null,p=(i==null?void 0:i.symbol)??"??",y=k(new c.FPNumber(t.amount??0)),v=new c.FPNumber(t.payload.amountUSD??0).toLocaleString(),x=k(new c.FPNumber(t.amount2??0)),S=new c.FPNumber(t.payload.amount2USD??0).toLocaleString(),b=h(t.startTime),T=C(this.soraNetwork,e,s);return{address:a,inputAsset:n,inputAssetSymbol:r,outputAsset:i,outputAssetSymbol:p,inputAmount:y,inputAmountUSD:v,outputAmount:x,outputAmountUSD:S,datetime:{date:b.format("M/DD"),time:b.format("HH:mm:ss")},links:T}})}get assetsAddresses(){return[this.selectedToken].filter(e=>!!e).map(e=>e.address).sort((e,s)=>e<s?-1:e>s?1:0)}createFilter(t){const e=_(),{operations:s,selectedToken:a}=this,n=a==null?void 0:a.address;return e.historyElementsFilter({operations:s,assetAddress:n,timestamp:t})}get dataVariables(){return{filter:this.createFilter(this.fromTimestamp),first:this.fetchAmount,offset:this.fetchAmount*(this.fetchPage-1)}}get updateVariables(){return{filter:this.createFilter(this.intervalTimestamp)}}getItemTimestamp(t){return(t==null?void 0:t.startTime)??0}async requestData(t){const e=_(),s=await e.services.explorer.account.getHistory(t);if(!s)return{items:[],totalCount:0};const{nodes:a,totalCount:n}=s,r=[];for(const i of a){const p=await e.services.dataParser.parseTransactionAsHistoryItem(i);p&&r.push(p)}return{items:r,totalCount:n}}};g([F.wallet.settings.soraNetwork],u.prototype,"soraNetwork",2);g([P.wallet.account.assetsDataTable],u.prototype,"assetsDataTable",2);g([I("assetsAddresses",{immediate:!0})],u.prototype,"resetData",1);u=g([L({components:{BaseWidget:m(f.BaseWidget),LinksDropdown:m(f.LinksDropdown),TokenSelectButton:m(f.TokenSelectButton),SelectToken:m(f.SelectToken),TokenLogo:d.TokenLogo,FormattedAmount:d.FormattedAmount,FormattedAmountWithFiatValue:d.FormattedAmountWithFiatValue,FormattedAddress:d.FormattedAddress,HistoryPagination:d.HistoryPagination}})],u);var O=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("base-widget",t._b({staticClass:"swap-transactions-widget",attrs:{title:t.tc("transactionText",2)},scopedSlots:t._u([{key:"types",fn:function(){return[e("token-select-button",{attrs:{icon:t.selectTokenIcon,token:t.selectedToken,tabindex:t.tokenTabIndex},on:{click:function(s){return s.stopPropagation(),t.handleSelectToken.apply(null,arguments)}}}),t.predefinedToken?t._e():e("select-token",{attrs:{"disabled-custom":"",visible:t.showSelectTokenDialog,asset:t.selectedToken},on:{"update:visible":function(s){t.showSelectTokenDialog=s},select:t.changeToken}})]},proxy:!0}])},"base-widget",t.$attrs,!1),[e("s-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticClass:"explore-table",attrs:{data:t.tableItems,"highlight-current-row":!1,size:"small"}},[e("s-table-column",{attrs:{width:"74"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.t("transaction.startTime")))])]},proxy:!0},{key:"default",fn:function({row:s}){return[e("div",{staticClass:"explore-table-item-date"},[e("div",[t._v(t._s(s.datetime.date))]),e("div",[t._v(t._s(s.datetime.time))])])]}}])}),e("s-table-column",{attrs:{"header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.t("removeLiquidity.input")))])]},proxy:!0},{key:"default",fn:function({row:s}){return[e("formatted-amount-with-fiat-value",{staticClass:"explore-table-item-token tx-amount",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:s.inputAmount,"fiat-value":s.inputAmountUSD}})]}}])}),e("s-table-column",{attrs:{"header-align":"left",align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.t("removeLiquidity.output")))])]},proxy:!0},{key:"default",fn:function({row:s}){return[e("formatted-amount-with-fiat-value",{staticClass:"explore-table-item-token tx-amount",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:s.outputAmount,"fiat-value":s.outputAmountUSD}})]}}])}),e("s-table-column",{attrs:{"header-align":"left",align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.t("transfers.from")))])]},proxy:!0},{key:"default",fn:function({row:s}){return[e("div",{staticClass:"explore-table-cell"},[e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:s.inputAsset}}),e("span",{staticClass:"explore-table-item-token"},[t._v(t._s(s.inputAssetSymbol))])],1)]}}])}),e("s-table-column",{attrs:{"header-align":"left",align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.t("transfers.to")))])]},proxy:!0},{key:"default",fn:function({row:s}){return[e("div",{staticClass:"explore-table-cell"},[e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:s.outputAsset}}),e("span",{staticClass:"explore-table-item-token"},[t._v(t._s(s.outputAssetSymbol))])],1)]}}])}),e("s-table-column",{attrs:{width:"94"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",[t._v(t._s(t.tc("accountText",1)))])]},proxy:!0},{key:"default",fn:function({row:s}){return[e("formatted-address",{attrs:{value:s.address,symbols:8}})]}}])}),e("s-table-column",{attrs:{width:"48","header-align":"center"},scopedSlots:t._u([{key:"header",fn:function(){return[e("s-icon",{attrs:{name:"basic-eye-no-24",size:"16px"}})]},proxy:!0},{key:"default",fn:function({row:s}){return[s.links.length?e("links-dropdown",{attrs:{links:s.links}}):t._e()]}}])})],1),e("history-pagination",{staticClass:"explore-table-pagination",attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,total:t.total,loading:t.loading,"last-page":t.lastPage},on:{"pagination-click":t.handlePaginationClick}})],1)},V=[],j=z(u,O,V,!1,null,"2f364f9d");const G=j.exports;export{G as default};
