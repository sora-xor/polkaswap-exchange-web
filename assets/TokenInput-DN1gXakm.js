var x=Object.defineProperty;var g=(o,t,e)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>g(o,typeof t!="symbol"?t+"":t,e);import{m as v,$ as m,T as _,b as u,Z as f,h as b,i as k,W as y,C as A,l as V,j as S,_ as c,P as r,R as F,n as C}from"./index-BHqySXo4.js";var P=Object.defineProperty,w=Object.getOwnPropertyDescriptor,s=(o,t,e,l)=>{for(var n=l>1?void 0:l?w(t,e):t,d=o.length-1,p;d>=0;d--)(p=o[d])&&(n=(l?p(t,e,n):p(n))||n);return l&&n&&P(t,e,n),n};const h=o=>typeof o=="string"?o:"";let a=class extends v(m.NumberFormatterMixin,m.FormattedAmountMixin,_){constructor(){super(...arguments);i(this,"currencySymbol");i(this,"exchangeRate");i(this,"setAmountSliderValue");i(this,"delimiters",u.FPNumber.DELIMITERS_CONFIG);i(this,"value");i(this,"max");i(this,"token");i(this,"balance");i(this,"title");i(this,"balanceText");i(this,"external");i(this,"loading");i(this,"disabled");i(this,"isMaxAvailable");i(this,"isSelectAvailable");i(this,"withSlider");i(this,"isFiatEditable");i(this,"sliderValue");i(this,"fiatDecimals");i(this,"withAddress");i(this,"withoutFiat");i(this,"floatInput");i(this,"fiatEl");i(this,"fiatValue","");i(this,"fiatFocus",!1)}updateFiatValue(){this.fiatFocus||(this.fiatValue=this.fiatAmount.isZero()?"":this.fiatAmount.toFixed(this.fiatDecimals))}reactToCurrencyChange(){this.setFiatValue(this.fiatValue)}recalcValue(e){const l=new u.FPNumber(e).div(this.exchangeRate),n=!this.tokenPrice.isZero()&&e?new u.FPNumber(l).div(this.tokenPrice).toString():"";this.$emit("input",n)}setFiatValue(e){this.fiatValue=e===this.maxFiatValueFormatted?this.maxFiatValue.toFixed(this.fiatDecimals):e,this.recalcValue(e)}handleFiatFocus(){this.fiatFocus=!0,this.$emit("focus")}handleFiatBlur(){this.fiatFocus=!1}get slideValue(){return this.sliderValue}set slideValue(e){this.setAmountSliderValue(e)}get isBalanceAvailable(){return!!this.balance&&!!this.token}get addressData(){return this.token?{...this.token,address:h(this.token.address),externalAddress:h(this.token.externalAddress)}:null}get hasFormattedAddress(){return this.addressData?!!(this.external?this.addressData.externalAddress:this.addressData.address):!1}get decimals(){var l,n;return(this.external?(l=this.token)==null?void 0:l.externalDecimals:(n=this.token)==null?void 0:n.decimals)??u.FPNumber.DEFAULT_PRECISION}get tokenPrice(){return this.token?u.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.token)??f):u.FPNumber.ZERO}get hasFiatValue(){return!(this.withoutFiat||this.tokenPrice.isZero())}get fpBalance(){return u.FPNumber.fromCodecValue(this.balance??f,this.decimals)}get formattedBalance(){return this.fpBalance.toLocaleString()}get formattedFiatBalance(){return this.fpBalance.mul(this.tokenPrice).toLocaleString()}get fiatAmount(){return this.calcFiatAmount(this.value)}get maxValue(){return this.max||this.MaxInputNumber}get maxFiatValue(){return this.calcFiatAmount(this.maxValue)}get maxFiatValueFormatted(){return this.maxFiatValue.toString()}calcFiatAmount(e){if(!e)return u.FPNumber.ZERO;const l=this.tokenPrice.mul(this.exchangeRate);return new u.FPNumber(e).mul(l)}handleMax(){this.$emit("max",this.token)}handleSelectToken(){this.$emit("select")}handleSlideInputChange(e){this.$emit("slide",e)}handleSlideClick(){var e,l,n,d;(d=(n=(l=(e=this.fiatEl)==null?void 0:e.$children)==null?void 0:l[0])==null?void 0:n.blur)==null||d.call(n)}focus(){var e,l,n;(n=(l=(e=this.floatInput)==null?void 0:e.inputComponent)==null?void 0:l.focus)==null||n.call(l)}};s([b.wallet.settings.currencySymbol],a.prototype,"currencySymbol",2);s([b.wallet.settings.exchangeRate],a.prototype,"exchangeRate",2);s([k.orderBook.setAmountSliderValue],a.prototype,"setAmountSliderValue",2);s([r({type:String})],a.prototype,"value",2);s([r({type:[String,Number]})],a.prototype,"max",2);s([r({default:()=>null,type:Object})],a.prototype,"token",2);s([r({default:()=>null,type:String})],a.prototype,"balance",2);s([r({default:"",type:String})],a.prototype,"title",2);s([r({default:"",type:String})],a.prototype,"balanceText",2);s([r({default:!1,type:Boolean})],a.prototype,"external",2);s([r({default:!1,type:Boolean})],a.prototype,"loading",2);s([r({default:!1,type:Boolean})],a.prototype,"disabled",2);s([r({default:!1,type:Boolean})],a.prototype,"isMaxAvailable",2);s([r({default:!1,type:Boolean})],a.prototype,"isSelectAvailable",2);s([r({default:!1,type:Boolean})],a.prototype,"withSlider",2);s([r({default:!0,type:Boolean})],a.prototype,"isFiatEditable",2);s([r({default:0,type:Number})],a.prototype,"sliderValue",2);s([r({default:2,type:Number})],a.prototype,"fiatDecimals",2);s([r({default:!1,type:Boolean})],a.prototype,"withAddress",2);s([r({default:!1,type:Boolean})],a.prototype,"withoutFiat",2);s([F("floatInput")],a.prototype,"floatInput",2);s([F("fiatEl")],a.prototype,"fiatEl",2);s([y("fiatAmount",{immediate:!0})],a.prototype,"updateFiatValue",1);s([y("currency",{immediate:!0})],a.prototype,"reactToCurrencyChange",1);a=s([A({components:{TokenSelectButton:V(S.TokenSelectButton),FormattedAmount:c.FormattedAmount,FormattedAmountWithFiatValue:c.FormattedAmountWithFiatValue,TokenAddress:c.TokenAddress}})],a);var B=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("s-float-input",t._g(t._b({ref:"floatInput",staticClass:"token-input",attrs:{size:"medium","has-locale-string":"",disabled:t.disabled,value:t.value,max:t.maxValue},scopedSlots:t._u([{key:"bottom",fn:function(){return[t._t("bottom",function(){return[e("div",{staticClass:"input-line input-line--footer"},[t.hasFiatValue?e("div",{staticClass:"s-flex"},[e("s-float-input",{ref:"fiatEl",staticClass:"token-input--fiat",attrs:{size:"mini","has-locale-string":"",decimals:2,delimiters:t.$attrs.delimiters,disabled:t.disabled,max:t.maxFiatValueFormatted,readonly:!t.isFiatEditable,value:t.fiatValue},on:{input:t.setFiatValue,focus:t.handleFiatFocus,blur:t.handleFiatBlur}},[e("span",{staticClass:"input-prefix",attrs:{slot:"left"},slot:"left"},[t._v(t._s(t.currencySymbol))])]),t._t("fiat-amount-append")],2):t._e(),t.withAddress&&t.hasFormattedAddress?e("token-address",t._b({staticClass:"input-value",attrs:{external:t.external}},"token-address",t.addressData,!1)):t._e()],1),t.withSlider?e("div",{staticClass:"input-line--footer-with-slider"},[e("div",{staticClass:"delimiter"}),e("s-slider",{staticClass:"slider-container",attrs:{value:t.slideValue,disabled:!t.withSlider||t.disabled,"show-tooltip":!1,marks:{0:"",25:"",50:"",75:"",100:""}},on:{input:t.handleSlideInputChange},nativeOn:{mousedown:function(l){return t.handleSlideClick.apply(null,arguments)}}})],1):t._e()]}),t._t("default")]},proxy:!0}],null,!0)},"s-float-input",{decimals:t.decimals,delimiters:t.delimiters,...t.$attrs},!1),t.$listeners),[e("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"input-title"},[e("span",{staticClass:"input-title--uppercase input-title--primary"},[t._v(t._s(t.title))]),t._t("title-append")],2),e("div",{staticClass:"input-value"},[t._t("balance",function(){return[t.isBalanceAvailable?[e("span",{staticClass:"input-value--uppercase"},[t._v(t._s(t.balanceText||t.t("balanceText")))]),e("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:t.formattedBalance,"has-fiat-value":t.hasFiatValue,"fiat-value":t.formattedFiatBalance}})]:t._e()]})],2)]),e("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[t.isMaxAvailable?e("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini",loading:t.loading,disabled:t.disabled},on:{click:function(l){return l.stopPropagation(),t.handleMax.apply(null,arguments)}}},[t._v(" "+t._s(t.t("buttons.max"))+" ")]):t._e(),t.token||t.isSelectAvailable?e("token-select-button",{attrs:{icon:"chevron-down-rounded-16",disabled:!t.isSelectAvailable,token:t.token},on:{click:function(l){return l.stopPropagation(),t.handleSelectToken.apply(null,arguments)}}}):t._e()],1)])},T=[],I=C(a,B,T,!1,null,"714978a7");const $=I.exports;export{$ as default};
