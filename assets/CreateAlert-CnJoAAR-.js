var g=Object.defineProperty;var v=(n,t,e)=>t in n?g(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var r=(n,t,e)=>v(n,typeof t!="symbol"?t+"":t,e);import{m as A,$ as d,F as l,Z as C,c as P,s as y,f as x,g as F,h as f,i as _,W as k,C as D,_ as m,l as b,j as T,P as S,R as E,n as $}from"./index-BHqySXo4.js";import{A as c,a as h}from"./tabs-Nr7W-OES.js";var w=Object.defineProperty,I=Object.getOwnPropertyDescriptor,o=(n,t,e,s)=>{for(var a=s>1?void 0:s?I(t,e):t,u=n.length-1,p;u>=0;u--)(p=n[u])&&(a=(s?p(t,e,a):p(a))||a);return s&&a&&w(t,e,a),a};let i=class extends A(d.CopyAddressMixin,d.TranslationMixin,d.TransactionMixin,d.LoadingMixin,d.FormattedAmountMixin){constructor(){super(...arguments);r(this,"alerts");r(this,"xor");r(this,"whitelistIdsBySymbol");r(this,"getAsset");r(this,"addPriceAlert");r(this,"editPriceAlert");r(this,"alertToEdit");r(this,"floatInput");r(this,"delimiters",l.DELIMITERS_CONFIG);r(this,"amount","");r(this,"asset",{});r(this,"autoChoice",!0);r(this,"currentTypeTab",c.Drop);r(this,"currentFrequencyTab",h.Once);r(this,"AlertFrequencyTabs",h);r(this,"AlertTypeTabs",c)}updateChoise(e){this.autoChoice&&(this.currentTypeTab=e?c.Drop:c.Raise),this.autoChoice=!0}get assetPrice(){return l.fromCodecValue(this.getAssetFiatPrice(this.asset)??C)}get priceChange(){const e=l.fromNatural(this.amount),s=e.isZero()?this.assetPrice:e;return P(s,this.assetPrice)}get negativeDelta(){return l.lt(this.priceChange,l.ZERO)}get deltaPercentage(){const e=this.negativeDelta?this.priceChange.negative():this.priceChange;return y(e)}get placeholder(){return y(this.assetPrice)}handleTabClick(){this.autoChoice=!1}get fiatAmountValue(){return this.assetPrice.toLocaleString()}get btnDisabled(){return!this.amount}get isEditMode(){return this.alertToEdit!==null}activeSignClass(e){return e==="+"&&this.negativeDelta||e==="-"&&!this.negativeDelta?"delta-percent--not-active":""}handleAlertCreation(){const e=l.fromNatural(this.amount),s=l.fromNatural(this.fiatAmountValue);let a=!1;if(this.currentTypeTab==="drop"?l.lt(s,e)&&(a=!0):this.currentTypeTab==="raise"&&l.gt(s,e)&&(a=!0),this.isEditMode){this.editPriceAlert({alert:{token:this.asset.symbol,price:this.amount,type:this.currentTypeTab,once:this.currentFrequencyTab==="once",wasNotified:a},position:this.alertToEdit.position}),this.$emit("back");return}this.alerts.length>x.MAX_ALERTS_NUMBER||(this.addPriceAlert({token:this.asset.symbol,price:this.amount,type:this.currentTypeTab,once:this.currentFrequencyTab==="once",wasNotified:a}),this.$emit("back"))}openSelectAssetDialog(){this.$emit("open-select-token")}selectAsset(e){e&&(this.asset=e)}async mounted(){var e,s,a,u;this.isEditMode?(this.amount=this.alertToEdit.price,this.currentTypeTab=this.alertToEdit.type==="drop"?c.Drop:c.Raise,this.currentFrequencyTab=this.alertToEdit.once?h.Once:h.Always,this.selectAsset(this.getAsset(this.whitelistIdsBySymbol[this.alertToEdit.token]))):(this.amount="",this.currentTypeTab=c.Drop,this.currentFrequencyTab=h.Once,this.selectAsset(this.xor)),(u=(a=(s=(e=this.floatInput)==null?void 0:e.$children)==null?void 0:s[0])==null?void 0:a.focus)==null||u.call(a),this.$root.$on("selectAlertAsset",p=>{this.selectAsset(p)})}};o([F.wallet.settings.alerts],i.prototype,"alerts",2);o([f.assets.xor],i.prototype,"xor",2);o([f.wallet.account.whitelistIdsBySymbol],i.prototype,"whitelistIdsBySymbol",2);o([f.assets.assetDataByAddress],i.prototype,"getAsset",2);o([_.wallet.settings.addPriceAlert],i.prototype,"addPriceAlert",2);o([_.wallet.settings.editPriceAlert],i.prototype,"editPriceAlert",2);o([S({default:null,type:Object})],i.prototype,"alertToEdit",2);o([E("floatInput")],i.prototype,"floatInput",2);o([k("negativeDelta")],i.prototype,"updateChoise",1);i=o([D({components:{TokenLogo:m.TokenLogo,FormattedAmount:m.FormattedAmount,FormattedAmountWithFiatValue:m.FormattedAmountWithFiatValue,TokenAddress:m.TokenAddress,AlertsSelectAsset:b(T.SelectToken),TokenSelectButton:b(T.TokenSelectButton)}})],i);var q=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"setup-price-alert"},[e("span",{staticClass:"setup-price-alert__title"},[t._v(t._s(t.t("alerts.alertTypeTitle")))]),e("s-tooltip",{attrs:{slot:"suffix","border-radius":"mini",content:t.t("alerts.typeTooltip"),placement:"top",tabindex:"-1"},slot:"suffix"},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1),e("s-tabs",{staticClass:"setup-price-alert__tab",attrs:{type:"rounded"},on:{click:t.handleTabClick},model:{value:t.currentTypeTab,callback:function(s){t.currentTypeTab=s},expression:"currentTypeTab"}},t._l(t.AlertTypeTabs,function(s){return e("s-tab",{key:s,attrs:{label:t.t(`alerts.${s}`),name:s}})}),1),e("s-float-input",{ref:"floatInput",staticClass:"price-input",attrs:{size:"medium","has-locale-string":"",delimiters:t.delimiters,decimals:t.asset.decimals,placeholder:`$${t.placeholder}`,maxlength:9},model:{value:t.amount,callback:function(s){t.amount=s},expression:"amount"}},[t.amount?e("div",{staticClass:"price-input__prefix",attrs:{slot:"left"},slot:"left"},[t._v("$")]):t._e(),e("div",{staticClass:"price-input-inner",attrs:{slot:"top"},slot:"top"},[e("div",[t._v(t._s(`${t.asset.symbol} ${t.t("priceText")}`))]),e("div",{staticClass:"price-input-inner-ratio"},[e("span",{staticClass:"price-input-current-title"},[t._v(t._s(t.t("alerts.currentPrice")))]),e("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","value-class":"input-value--primary",value:"1","asset-symbol":t.asset.symbol,"fiat-value":t.fiatAmountValue}})],1)]),e("token-select-button",{attrs:{slot:"right",icon:"chevron-down-rounded-16",token:t.asset},on:{click:function(s){return s.stopPropagation(),t.openSelectAssetDialog.apply(null,arguments)}},slot:"right"}),e("div",{staticClass:"info",attrs:{slot:"bottom"},slot:"bottom"},[e("span",{staticClass:"delta-percent"},[e("span",{class:t.activeSignClass("+")},[t._v(" + ")]),e("span",{staticClass:"slash"},[t._v("/")]),e("span",{class:t.activeSignClass("-")},[t._v(" - ")]),t._v(" "+t._s(t.deltaPercentage)+"% ")]),e("token-address",t._b({},"token-address",t.asset,!1))],1)],1),e("span",{staticClass:"setup-price-alert__title"},[t._v(t._s(t.t("alerts.alertFrequencyTitle")))]),e("s-tooltip",{attrs:{slot:"suffix","border-radius":"mini",content:t.t("alerts.frequencyTooltip"),placement:"top",tabindex:"-1"},slot:"suffix"},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1),e("s-tabs",{staticClass:"setup-price-alert__tab",attrs:{type:"rounded"},model:{value:t.currentFrequencyTab,callback:function(s){t.currentFrequencyTab=s},expression:"currentFrequencyTab"}},t._l(t.AlertFrequencyTabs,function(s){return e("s-tab",{key:s,attrs:{label:t.t(`alerts.${s}`),name:s}})}),1),e("s-button",{staticClass:"setup-price-alert__btn s-typography-button--large",attrs:{type:"primary",loading:t.loading,disabled:t.btnDisabled},on:{click:t.handleAlertCreation}},[t._v(" "+t._s(t.t("alerts.finishBtn"))+" ")])],1)},M=[],O=$(i,q,M,!1,null,null);const L=O.exports;export{L as default};
