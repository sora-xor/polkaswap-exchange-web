var m=Object.defineProperty;var v=(s,e,t)=>e in s?m(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>v(s,typeof e!="symbol"?e+"":e,t);import{m as g,$ as b,X as y,Z as d,b as p,am as _,hD as l,P as h,O as F,g as k,h as x,W as B,C as w,_ as f,l as I,j as C,R as N,n as T}from"./index-BHqySXo4.js";var O=Object.defineProperty,S=Object.getOwnPropertyDescriptor,o=(s,e,t,a)=>{for(var r=a>1?void 0:a?S(e,t):e,u=s.length-1,c;u>=0;u--)(c=s[u])&&(r=(a?c(e,t,r):c(r))||r);return a&&r&&O(e,t,r),r};let i=class extends g(b.TransactionMixin,b.DialogMixin,b.FormattedAmountMixin){constructor(){super(...arguments);n(this,"xorSymbol",y.symbol);n(this,"tokenInput");n(this,"balance");n(this,"editableFiat");n(this,"asset");n(this,"networkFees");n(this,"accountXor");n(this,"value","")}async handleDialogVisibility(t){var a;await this.$nextTick(),this.value="",(a=this.tokenInput)==null||a.focus()}get fpBalance(){return this.getFPNumberFromCodec(this.balance,this.asset.decimals)}get xorBalance(){var t,a;return this.getFPNumberFromCodec(((a=(t=this.accountXor)==null?void 0:t.balance)==null?void 0:a.transferable)??d)}get assetWithBalance(){return{...this.asset,balance:{transferable:this.balance}}}get title(){return`Burn ${this.tokenSymbol}`}get tokenSymbol(){return this.asset.symbol}get networkFee(){return this.networkFees[p.Operation.Burn]}get fpNetworkFee(){return this.getFPNumberFromCodec(this.networkFee)}get networkFeeFormatted(){return this.formatCodecNumber(this.networkFee)}get emptyValue(){return!+this.value}get isMaxAvailable(){return this.accountXor?_(this.assetWithBalance,this.value??0,this.networkFee,this.accountXor):!1}get isInsufficientBalance(){return this.fpBalance.sub(this.value||0).isLtZero()}get isInsufficientXorForFee(){return this.xorBalance.sub(this.fpNetworkFee).isLtZero()}get disabled(){return this.loading||this.isInsufficientXorForFee||this.emptyValue||this.isInsufficientBalance}get valuePercent(){if(!this.value)return 0;const t=this.getFPNumber(this.value,this.asset.decimals).div(this.fpBalance).mul(l).toNumber(0);return t>l?l:t}handlePercentChange(t){this.value=this.fpBalance.mul(t/l).toString()}handleMaxValue(){this.value=this.fpBalance.toString()}async handleBurn(){if(this.isInsufficientBalance)this.$alert(this.t("insufficientBalanceText",{tokenSymbol:this.tokenSymbol}),{title:this.t("errorText")});else try{await this.withNotifications(async()=>{await p.api.assets.burn(this.asset,this.value)})}catch(t){console.error(t)}this.isVisible=!1}};o([N("tokenInput")],i.prototype,"tokenInput",2);o([h({default:d,type:String})],i.prototype,"balance",2);o([h({default:!1,type:Boolean})],i.prototype,"editableFiat",2);o([h({default:F,type:Object})],i.prototype,"asset",2);o([k.wallet.settings.networkFees],i.prototype,"networkFees",2);o([x.assets.xor],i.prototype,"accountXor",2);o([B("visible")],i.prototype,"handleDialogVisibility",1);i=o([w({components:{DialogBase:f.DialogBase,InfoLine:f.InfoLine,TokenInput:I(C.TokenInput)}})],i);var P=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("dialog-base",{attrs:{title:e.title,visible:e.isVisible,tooltip:"COMING SOON..."},on:{"update:visible":function(a){e.isVisible=a}}},[t("div",{staticClass:"dashboard-burn"},[t("p",{staticClass:"p3 dashboard-burn__text"},[e._v("ENTER THE AMOUNT YOU WANT TO BURN")]),t("token-input",{ref:"tokenInput",staticClass:"dashboard-burn__token-input",attrs:{"with-slider":"",title:"AMOUNT","is-fiat-editable":e.editableFiat,"is-max-available":e.isMaxAvailable,token:e.asset,balance:e.balance,"slider-value":e.valuePercent,disabled:e.loading},on:{max:e.handleMaxValue,slide:e.handlePercentChange},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}}),t("s-button",{staticClass:"s-typography-button--large action-button dashboard-burn__button",attrs:{type:"primary",disabled:e.disabled},on:{click:e.handleBurn}},[e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.xorSymbol}))+" ")]:e.emptyValue?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.tokenSymbol}))+" ")]:[e._v(e._s(e.title))]],2),t("info-line",{attrs:{label:e.t("networkFeeText"),"label-tooltip":e.t("networkFeeTooltipText"),value:e.networkFeeFormatted,"asset-symbol":e.xorSymbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}})],1)])},D=[],M=T(i,P,D,!1,null,"911393d1");const R=M.exports;export{R as default};
