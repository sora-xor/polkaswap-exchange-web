var v=Object.defineProperty;var C=(i,a,e)=>a in i?v(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e;var r=(i,a,e)=>C(i,typeof a!="symbol"?a+"":a,e);import{m as k,T as h,hH as f,hI as _,K as S,g as w,C as P,l as D,j as b,hz as n,hA as c,hJ as A,hK as I,_ as y,n as x}from"./index-BHqySXo4.js";import{P as z}from"./PageMixin-BILi52dP.js";import"./BasePageMixin-Co7yDbqF.js";var L=Object.defineProperty,N=Object.getOwnPropertyDescriptor,m=(i,a,e,t)=>{for(var s=t>1?void 0:t?N(a,e):a,o=i.length-1,l;o>=0;o--)(l=i[o])&&(s=(t?l(a,e,s):l(s))||s);return t&&s&&L(a,e,s),s};let d=class extends k(z,h){constructor(){super(...arguments);r(this,"validators");r(this,"activeCollapseItems",[]);r(this,"soraStaking",f);r(this,"SoraStakingPageNames",_)}updateActiveCollapseItems(e){this.activeCollapseItems=e}get selectedDerivedPool(){return this.selectedPool?this.prepareDerivedPoolData(this.selectedPool,this.selectedAccountPool):null}get tokensData(){return[...Object.entries(this.pools).reduce((s,[o,l])=>{const g=this.demeterAssetsData[o];if(!g)return s;const p=this.getDerivedPools(l==null?void 0:l[o]).map(u=>this.prepareDerivedPoolData(u.pool,u.accountPool));return p.length&&s.push({asset:g,items:p}),s},[])].sort((s,o)=>S(s.asset,o.asset))}};m([w.staking.validatorsInfo],d.prototype,"validators",2);d=m([P({components:{GenericPageHeader:D(b.GenericPageHeader),PoolCard:n(c.PoolCard),DemeterStatusBadge:n(c.StatusBadge),SoraStatusBadge:A(I.StatusBadge),StakeDialog:n(c.StakeDialog),ClaimDialog:n(c.ClaimDialog),CalculatorDialog:n(c.CalculatorDialog),TokenLogo:y.TokenLogo}})],d);var O=function(){var a=this,e=a._self._c;return a._self._setupProxy,e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.parentLoading,expression:"parentLoading"}],staticClass:"container"},[e("generic-page-header",{attrs:{title:a.t("pageTitle.Staking")}}),!a.tokensData.length&&!a.soraStaking?e("s-card",{staticClass:"staking-empty-card",attrs:{shadow:"always",size:"big",primary:""}},[a._v(" "+a._s(a.t("demeterFarming.staking.stopped"))+" ")]):a._e(),e("router-link",{staticClass:"staking-sora-link",attrs:{to:{name:a.SoraStakingPageNames.Overview}}},[e("s-card",{staticClass:"staking-sora-card"},[e("token-logo",{staticClass:"token-logo",attrs:{token:a.soraStaking.asset,size:"medium"}}),e("div",[e("h5",{staticClass:"staking-info-subtitle"},[a._v("sora staking")]),e("h3",{staticClass:"staking-info-title"},[a._v(a._s(a.soraStaking.asset.symbol))]),e("div",{directives:[{name:"show",rawName:"v-show",value:!a.isActiveCollapseItem("sora",a.activeCollapseItems),expression:"!isActiveCollapseItem('sora', activeCollapseItems)"}],staticClass:"s-flex staking-info-badges"},[e("sora-status-badge")],1)]),e("s-icon",{staticClass:"staking-sora-arrow",attrs:{name:"arrows-chevron-right-rounded-24"}})],1)],1),a.tokensData.length?e("span",{staticClass:"staking-sora-separator"}):a._e(),e("s-collapse",{staticClass:"demeter-staking-list",on:{change:a.updateActiveCollapseItems}},a._l(a.tokensData,function(t){return e("s-collapse-item",{key:t.asset.address,staticClass:"staking-info",attrs:{name:t.asset.address},scopedSlots:a._u([{key:"title",fn:function(){return[e("token-logo",{staticClass:"token-logo",attrs:{token:t.asset,size:"medium"}}),e("div",[e("h3",{staticClass:"staking-info-title"},[a._v(a._s(t.asset.symbol))]),e("div",{directives:[{name:"show",rawName:"v-show",value:!a.isActiveCollapseItem(t.asset.address,a.activeCollapseItems),expression:"!isActiveCollapseItem(token.asset.address, activeCollapseItems)"}],staticClass:"s-flex staking-info-badges"},a._l(t.items,function(s){return e("demeter-status-badge",{key:s.pool.rewardAsset,staticClass:"staking-info-badge",attrs:{pool:s.pool,"account-pool":s.accountPool,"pool-asset":s.poolAsset,"reward-asset":s.rewardAsset,apr:s.apr},on:{add:function(o){return a.changePoolStake(o,!0)}}})}),1)])]},proxy:!0}],null,!0)},[a.isActiveCollapseItem(t.asset.address,a.activeCollapseItems)?a._l(t.items,function(s){return e("pool-card",{key:s.pool.rewardAsset,staticClass:"staking-info-card",attrs:{pool:s.pool,"account-pool":s.accountPool,"base-asset":s.baseAsset,"pool-asset":s.poolAsset,"reward-asset":s.rewardAsset,apr:s.apr,tvl:s.tvl,"show-balance":""},on:{add:function(o){return a.changePoolStake(o,!0)},remove:function(o){return a.changePoolStake(o,!1)},claim:a.claimPoolRewards,calculator:a.showPoolCalculator}})}):a._e()],2)}),1),e("stake-dialog",a._b({attrs:{visible:a.showStakeDialog,"is-adding":a.isAddingStake,"parent-loading":a.parentLoading||a.loading},on:{"update:visible":function(t){a.showStakeDialog=t},add:function(t){return a.handleStakeAction(t,a.deposit)},remove:function(t){return a.handleStakeAction(t,a.withdraw)}}},"stake-dialog",a.selectedDerivedPool,!1)),e("claim-dialog",a._b({attrs:{visible:a.showClaimDialog,"parent-loading":a.parentLoading||a.loading},on:{"update:visible":function(t){a.showClaimDialog=t},confirm:a.handleClaimRewards}},"claim-dialog",a.selectedDerivedPool,!1)),e("calculator-dialog",a._b({attrs:{visible:a.showCalculatorDialog},on:{"update:visible":function(t){a.showCalculatorDialog=t}}},"calculator-dialog",a.selectedDerivedPool,!1))],1)},T=[],j=x(d,O,T,!1,null,"8cb51bb9");const J=j.exports;export{J as default};
