var B=Object.defineProperty;var R=(s,t,e)=>t in s?B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var n=(s,t,e)=>R(s,typeof t!="symbol"?t+"":t,e);import{m as N,hD as C,g as b,C as V,l as d,j as m,_ as c,n as I}from"./index-BHqySXo4.js";import{E as M}from"./ExplorePageMixin-CkKfV7ro.js";import"./ScrollableTableMixin-C9crfC47.js";var E=Object.defineProperty,w=Object.getOwnPropertyDescriptor,p=(s,t,e,a)=>{for(var o=a>1?void 0:a?w(t,e):t,r=s.length-1,i;r>=0;r--)(i=s[r])&&(o=(a?i(t,e,o):i(o))||o);return a&&o&&E(t,e,o),o};let l=class extends N(M){constructor(){super(...arguments);n(this,"collaterals");n(this,"percentFormat");n(this,"collapsed");n(this,"property","totalDebtValue")}formatPercent(t){var a,o;const e=t/C;return((o=(a=this.percentFormat)==null?void 0:a.format)==null?void 0:o.call(a,e))??`${e*C}%`}get prefilteredItems(){return Object.values(this.collaterals).reduce((t,e)=>{const a=this.getAsset(e.lockedAssetId),o=this.getAsset(e.debtAssetId);if(!(a&&o))return t;const r=e.riskParams.stabilityFeeAnnual.toNumber(),i=this.formatPercent(r),g=e.riskParams.liquidationRatioReversed,S=this.formatPercent(g),F=e.totalLocked.toLocaleString(2),f=this.getFPNumberFiatAmountByFPNumber(e.totalLocked,a)??this.Zero,L=f.toNumber(),A=f.toLocaleString(2),P=e.debtSupply.toLocaleString(2),h=this.getFPNumberFiatAmountByFPNumber(e.debtSupply,o)??this.Zero,z=h.toNumber(),T=h.toLocaleString(2);let v=0,x="0",_="0",y=!1;const u=e.riskParams.hardCap.sub(e.debtSupply).dp(2);if(u.isGtZero()){y=!0,x=u.toLocaleString(2);const k=this.getFPNumberFiatAmountByFPNumber(u,o)??this.Zero;v=k.toNumber(),_=k.toLocaleString(2)}const D=`${o.symbol}/${a.symbol}`;return t.push({name:D,lockedAsset:a,debtAsset:o,stabilityFeeValue:r,stabilityFee:i,totalLockedValue:L,totalLocked:F,totalLockedFiat:A,totalDebtValue:z,totalDebt:P,totalDebtFiat:T,availableToBorrowValue:v,availableToBorrow:x,availableToBorrowFiat:_,isAvailable:y,maxLtv:S,maxLtvValue:g}),t},[])}async updateExploreData(){}openSelectedPosition(t){this.isLoggedIn&&t.isAvailable&&this.$emit("open",t.lockedAsset,t.debtAsset)}updateSearch(t){this.$emit("update-search",t)}resetSearch(){this.$emit("update-search","")}};p([b.vault.collaterals],l.prototype,"collaterals",2);p([b.settings.percentFormat],l.prototype,"percentFormat",2);p([b.settings.menuCollapsed],l.prototype,"collapsed",2);l=p([V({components:{PairTokenLogo:d(m.PairTokenLogo),SortButton:d(m.SortButton),DataRowSkeleton:d(m.DataRowSkeleton),TokenLogo:c.TokenLogo,FormattedAmount:c.FormattedAmount,HistoryPagination:c.HistoryPagination,SearchInput:c.SearchInput}})],l);var O=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"collaterals-container container",class:{"menu-collapsed":t.collapsed}},[e("div",{staticClass:"collaterals-search"},[e("search-input",{staticClass:"search",attrs:{autofocus:"",value:t.exploreQuery,placeholder:t.t("searchText")},on:{input:t.updateSearch,clear:t.resetSearch}})],1),e("s-table",{ref:"table",staticClass:"collaterals-table explore-table",attrs:{data:t.tableItems,"highlight-current-row":!1,size:"small"},on:{"cell-click":t.openSelectedPosition}},[e("s-table-column",{attrs:{width:"250",label:"#"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"explore-table-item-index"},[e("span",{directives:[{name:"button",rawName:"v-button"}],class:["explore-table-item-index--head",{active:t.isDefaultSort}],on:{click:t.handleResetSort}},[t._v(" # ")])]),e("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[e("span",{staticClass:"explore-table__primary"},[t._v("DEBT / COLLATERAL")])])]},proxy:!0},{key:"default",fn:function({$index:a,row:o}){return[e("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[t._v(t._s(a+t.startIndex+1))]),e("pair-token-logo",{staticClass:"explore-table-item-logo",attrs:{size:"small","first-token":o.debtAsset,"second-token":o.lockedAsset}}),e("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[e("div",{staticClass:"explore-table-item-name"},[t._v(t._s(o.debtAsset.symbol)+" / "+t._s(o.lockedAsset.symbol))])]),t.isLoggedIn&&o.isAvailable?e("s-icon",{attrs:{name:"plus-16",size:"12"}}):t._e()]}}])}),e("s-table-column",{attrs:{width:"140","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"stabilityFeeValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.t("kensetsu.interest")))]),e("s-tooltip",{attrs:{"border-radius":"mini",content:t.t("kensetsu.interestDescription")}},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function({row:a}){return[e("span",{staticClass:"explore-table__accent"},[t._v(t._s(a.stabilityFee))])]}}])}),e("s-table-column",{attrs:{width:"120","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"maxLtvValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("MAX LTV")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("span",{staticClass:"explore-table__accent"},[t._v(t._s(a.maxLtv))])]}}])}),e("s-table-column",{attrs:{"min-width":"180","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"totalLockedValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Total locked")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("div",{staticClass:"explore-table-item-tokens"},[e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:a.totalLocked}}),e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:a.lockedAsset}})],1),a.totalLockedFiat?e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"is-fiat-value":"","font-size-rate":t.FontSizeRate.SMALL,value:a.totalLockedFiat}})],1):t._e()])]}}])}),e("s-table-column",{attrs:{"min-width":"180","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"totalDebtValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Total debt")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("div",{staticClass:"explore-table-item-tokens"},[e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:a.totalDebt}}),e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:a.debtAsset}})],1),a.totalDebtFiat?e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"is-fiat-value":"","font-size-rate":t.FontSizeRate.SMALL,value:a.totalDebtFiat}})],1):t._e()])]}}])}),e("s-table-column",{attrs:{"min-width":"180","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"availableToBorrowValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Available")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("div",{staticClass:"explore-table-item-tokens"},[e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:a.availableToBorrow}}),e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:a.debtAsset}})],1),a.availableToBorrowFiat?e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"is-fiat-value":"","font-size-rate":t.FontSizeRate.SMALL,value:a.availableToBorrowFiat}})],1):t._e()])]}}])})],1),e("history-pagination",{staticClass:"explore-table-pagination",attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,total:t.total,"last-page":t.lastPage,loading:t.loadingState},on:{"pagination-click":t.handlePaginationClick}})],1)},$=[],j=I(l,O,$,!1,null,"e2f9a6f0");const Q=j.exports;export{Q as default};
