var m=Object.defineProperty;var v=(n,t,e)=>t in n?m(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>v(n,typeof t!="symbol"?t+"":t,e);import{m as _,N as y,B as T,Q as k,z as w,g as x,h as b,i as A,C as N,_ as d,n as L}from"./index-BHqySXo4.js";import{B as D}from"./BridgeTransactionMixin-C_ITN4YO.js";import"./NetworkFormatterMixin-DdB_9in4.js";var B=Object.defineProperty,E=Object.getOwnPropertyDescriptor,a=(n,t,e,s)=>{for(var i=s>1?void 0:s?E(t,e):t,l=n.length-1,c;l>=0;l--)(c=n[l])&&(i=(s?c(t,e,i):c(i))||i);return s&&i&&B(t,e,i),i};let r=class extends _(D){constructor(){super(...arguments);o(this,"notificationData");o(this,"subBridgeConnector");o(this,"whitelist");o(this,"getAsset");o(this,"setNotificationData")}get tx(){return this.notificationData}get visibility(){return!!this.tx}set visibility(t){t||this.setNotificationData()}get asset(){var t;return(t=this.tx)!=null&&t.assetAddress?this.getAsset(this.tx.assetAddress):null}get assetSymbol(){var t;return((t=this.asset)==null?void 0:t.symbol)??""}get isSubEvm(){var t;return y.isEvmAccount((t=this.tx)==null?void 0:t.externalNetwork)}get isEvmNetwork(){var t;return!(!((t=this.tx)!=null&&t.externalNetworkType)||this.tx.externalNetworkType===T.Sub&&!this.isSubEvm)}get addTokenBtnVisibility(){var e;if(!this.isEvmNetwork)return!1;const t=(e=this.asset)==null?void 0:e.externalAddress;return!!t&&!k.isNativeEvmTokenAddress(t)&&w(this.tx)}get txLink(){const t=this.isOutgoing?this.externalExplorerLinks[0]:this.internalExplorerLinks[0],e=this.isOutgoing?this.externalNetworkId:void 0;return this.prepareLink(t,e)}get txAccountLink(){const t=this.isOutgoing?this.externalAccountLinks[0]:this.internalAccountLinks[0],e=this.isOutgoing?this.externalNetworkId:void 0;return this.prepareLink(t,e,!1)}prepareLink(t,e,s=!0){if(!t)return null;const i=s?this.tc("transactionText",1):this.tc("accountText",1);return{href:t.value,title:this.getNetworkText(i,e)}}close(){this.visibility=!1}async addToken(){var t;if(this.asset)try{const{externalAddress:e,externalDecimals:s,symbol:i,address:l}=this.asset,c=(t=this.whitelist[l])==null?void 0:t.icon;let p=e,h=i,g=+s;if(this.isSubEvm){const u=this.subBridgeConnector.parachain;if(!u)throw new Error("Adapter not found");const f=u.getAssetMeta(this.asset);if(!f)throw new Error("Asset metadata not found");p=u.assetIdToEvmContractAddress(e),h=f.symbol,g=f.decimals}await k.addToken(p,h,g,c)}catch(e){console.error(e)}finally{this.visibility=!1}}};a([x.bridge.notificationData],r.prototype,"notificationData",2);a([x.bridge.subBridgeConnector],r.prototype,"subBridgeConnector",2);a([b.wallet.account.whitelist],r.prototype,"whitelist",2);a([b.assets.assetDataByAddress],r.prototype,"getAsset",2);a([A.bridge.setNotificationData],r.prototype,"setNotificationData",2);r=a([N({components:{SimpleNotification:d.SimpleNotification,DialogBase:d.DialogBase,TokenLogo:d.TokenLogo,ExternalLink:d.ExternalLink}})],r);var C=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("dialog-base",{staticClass:"bridge-transfer-notification",attrs:{visible:t.visibility},on:{"update:visible":function(s){t.visibility=s}}},[e("simple-notification",{attrs:{"modal-content":"",success:""},nativeOn:{submit:function(s){return s.preventDefault(),t.close.apply(null,arguments)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.t("bridgeTransferNotification.title")))]},proxy:!0}])},[t.txLink?e("external-link",t._b({},"external-link",t.txLink,!1)):t._e(),t.txAccountLink?e("external-link",t._b({},"external-link",t.txAccountLink,!1)):t._e(),t.addTokenBtnVisibility?e("s-button",{staticClass:"add-token-btn s-typography-button--big",on:{click:t.addToken}},[e("span",[t._v(t._s(t.t("bridgeTransferNotification.addToken",{symbol:t.assetSymbol})))]),e("div",{staticClass:"token-icons"},[e("token-logo",{attrs:{size:"small",token:t.asset}})],1),e("span",[t._v(t._s(t.t("operations.andText"))+" "+t._s(t.t("closeText")))])]):t._e()],1)],1)},O=[],S=L(r,C,O,!1,null,"543e2cc5");const j=S.exports;export{j as default};
