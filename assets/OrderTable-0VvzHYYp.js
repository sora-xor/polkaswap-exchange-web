var A=Object.defineProperty;var N=(s,e,t)=>e in s?A(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>N(s,typeof e!="symbol"?e+"":e,t);import{m as E,T as H,ae as R,f as j,h1 as M,d as S,b as k,g as V,h as q,W as z,C as K,_ as L,P as m,n as W}from"./index-BHqySXo4.js";import{S as Z}from"./ScrollableTableMixin-C9crfC47.js";import{O as c}from"./orderBook-BNMMkkrL.js";var G=Object.defineProperty,J=Object.getOwnPropertyDescriptor,i=(s,e,t,a)=>{for(var r=a>1?void 0:a?J(e,t):e,l=s.length-1,d;l>=0;l--)(d=s[l])&&(r=(a?d(e,t,r):d(r))||r);return a&&r&&G(e,t,r),r};let o=class extends E(H,Z){constructor(){super(...arguments);n(this,"PriceVariant",R.PriceVariant);n(this,"percentFormat");n(this,"assetsDataTable");n(this,"orders");n(this,"selectable");n(this,"isOpenOrders");n(this,"syncTableItemsDebounced",M(this.syncTableItems,250))}async syncTableItems(){var t;if(this.currentPage!==1&&!((t=this.tableItems)!=null&&t.length)){await this.handlePagination(j.PaginationButton.Prev);return}this.$emit("sync",this.tableItems)}get shouldEmptyStateBeShown(){var t;return!(this.loadingState||(t=this.orders)!=null&&t.length)}get rowKey(){return this.selectable?"id":void 0}get preparedItems(){return this.orders.map(t=>{var p,v;const{originalAmount:a,amount:r,price:l,side:d,id:x,orderBookId:h,time:P,status:w,lifespan:T}=t,{base:B,quote:C}=h,_=this.assetsDataTable[B]||{},u=this.assetsDataTable[C]||{},f=_==null?void 0:_.symbol,b=u==null?void 0:u.symbol,O=`${f}-${b}`,y=S(P),D=S.duration(T),I=r.div(a),g=k.FPNumber.ONE.sub(I).toNumber(2),$=((v=(p=this.percentFormat)==null?void 0:p.format)==null?void 0:v.call(p,g))??`${g*100}%`,F=this.getFPNumberFiatAmountByFPNumber(a.mul(l),u)??k.FPNumber.ZERO;return{id:x,orderBookId:h,originalAmount:a.dp(2),amount:a.sub(r).dp(2),filled:$,baseAssetSymbol:f,quoteAssetSymbol:b,pair:O,price:l.dp(2),total:F.dp(2).toLocaleString(),side:d,status:this.getStatusTranslation(w),created:{date:y.format("M/DD"),time:y.format("HH:mm:ss")},expires:D.format("D[D]")}})}getStatusTranslation(t){switch(t){case c.Active:return this.t("orderBook.orderStatus.active");case c.Aligned:case c.Canceled:return this.t("orderBook.orderStatus.canceled");case c.Expired:return this.t("orderBook.orderStatus.expired");case c.Filled:return this.t("orderBook.orderStatus.filled");default:return this.t("orderBook.orderStatus.active")}}getString(t){return t.toLocaleString()}handleSelect(t){this.selectable&&this.$emit("select",t)}handleSelectRow(t){this.selectable&&this.$emit("cell-click",t)}handleSelectionChange(t){this.selectable&&this.$emit("selection-change",t)}async handlePagination(t){this.handlePaginationClick(t),await this.$nextTick(),this.$emit("page-updated",this.currentPage,this.tableItems)}};i([V.settings.percentFormat],o.prototype,"percentFormat",2);i([q.wallet.account.assetsDataTable],o.prototype,"assetsDataTable",2);i([m({default:()=>[],type:Array})],o.prototype,"orders",2);i([m({default:!1,type:Boolean})],o.prototype,"selectable",2);i([m({default:!1,type:Boolean})],o.prototype,"isOpenOrders",2);i([z("tableItems",{deep:!0,immediate:!0})],o.prototype,"syncTableItemsDebounced",2);o=i([K({components:{HistoryPagination:L.HistoryPagination}})],o);var Q=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"s-flex-column order-table__main"},[e.shouldEmptyStateBeShown?t("span",{staticClass:"h4 order-table__empty"},[e._v(e._s(e.t("orderBook.orderTable.noOrders")))]):e._e(),t("s-table",{directives:[{name:"show",rawName:"v-show",value:!e.shouldEmptyStateBeShown,expression:"!shouldEmptyStateBeShown /* v-show cuz SScrollbar is set during the mounting */"},{name:"loading",rawName:"v-loading",value:e.loadingState,expression:"loadingState"}],ref:"table",staticClass:"order-table",attrs:{"row-key":e.rowKey,"empty-text":e.t("orderBook.orderTable.noOrders"),data:e.tableItems,"highlight-current-row":!1},on:{"cell-click":e.handleSelectRow,"selection-change":e.handleSelectionChange,select:e.handleSelect}},[e.selectable?t("s-table-column",{attrs:{type:"selection"}}):e._e(),t("s-table-column",{attrs:{width:"88"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.orderTable.time")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("div",{staticClass:"order-table__date"},[t("div",[e._v(e._s(a.created.date))]),t("div",[e._v(e._s(a.created.time))])])]}}])}),t("s-table-column",{attrs:{width:"126"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.orderTable.pair")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("span",{staticClass:"order-table__pair"},[e._v(e._s(a.pair))])]}}])}),t("s-table-column",{attrs:{width:"62"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.orderTable.side")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("span",{staticClass:"order-table__side",class:[{buy:a.side===e.PriceVariant.Buy}]},[e._v(e._s(a.side))])]}}])}),t("s-table-column",{attrs:{width:"126"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("priceText")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("div",{staticClass:"order-table__price"},[t("span",{staticClass:"price"},[e._v(e._s(e.getString(a.price)))]),t("span",[e._v(e._s(a.quoteAssetSymbol))])])]}}])}),t("s-table-column",{attrs:{width:"180"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.amount")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("div",{staticClass:"order-table__amount"},[t("span",{staticClass:"amount"},[e._v(e._s(e.getString(a.amount))+"/"+e._s(e.getString(a.originalAmount)))]),t("span",[e._v(e._s(a.baseAssetSymbol))])])]}}])}),t("s-table-column",{attrs:{width:"84"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v("% "+e._s(e.t("orderBook.orderTable.filled")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[e._v(e._s(a.filled))]}}])}),t("s-table-column",{attrs:{width:"94"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.orderTable.lifetime")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("div",{staticClass:"order-table__date"},[t("div",[e._v(e._s(a.expires))])])]}}])}),e.isOpenOrders?e._e():t("s-table-column",{attrs:{width:"93"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.tradingPair.status")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("span",{staticClass:"order-table__status"},[e._v(e._s(a.status))])]}}],null,!1,3485752557)}),t("s-table-column",{scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.t("orderBook.total")))])]},proxy:!0},{key:"default",fn:function({row:a}){return[t("span",{staticClass:"order-table__total"},[e._v("$"+e._s(a.total))])]}}])})],1),t("div",{staticClass:"order-table__pagination"},[e.total?t("history-pagination",{attrs:{"current-page":e.currentPage,"page-amount":e.pageAmount,total:e.total,"last-page":e.lastPage,loading:e.loadingState},on:{"pagination-click":e.handlePagination}}):e._e()],1)],1)},U=[],X=W(o,Q,U,!1,null,null);const oe=X.exports;export{oe as default};
