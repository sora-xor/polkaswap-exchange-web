var w=Object.defineProperty;var A=(a,o,t)=>o in a?w(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t;var c=(a,o,t)=>A(a,typeof o!="symbol"?o+"":o,t);import{m as L,T as I,$ as S,ae as s,ah as $,b as m,g as y,h as F,i as N,C as z,l as g,j as x,_ as C,n as D}from"./index-BHqySXo4.js";var E=Object.defineProperty,j=Object.getOwnPropertyDescriptor,p=(a,o,t,e)=>{for(var r=e>1?void 0:e?j(o,t):o,l=a.length-1,d;l>=0;l--)(d=a[l])&&(r=(e?d(o,t,r):d(r))||r);return e&&r&&E(o,t,r),r};let i=class extends L(I,S.LoadingMixin,S.FormattedAmountMixin){constructor(){super(...arguments);c(this,"orderBooks");c(this,"orderBooksStats");c(this,"getAsset");c(this,"setCurrentOrderBook")}getTooltipText(t){switch(t){case s.OrderBookStatus.Trade:return this.t("orderBook.tooltip.bookStatus.active");case s.OrderBookStatus.PlaceAndCancel:return this.t("orderBook.tooltip.bookStatus.placeable");case s.OrderBookStatus.OnlyCancel:return this.t("orderBook.tooltip.bookStatus.cancelable");case s.OrderBookStatus.Stop:return this.t("orderBook.tooltip.bookStatus.inactive");default:return this.t("unknownErrorText")}}chooseBook(t){this.setCurrentOrderBook(t.id),this.$emit("close")}get tableItems(){return this.orderBooks?Object.entries(this.orderBooks).reduce((t,[e,r])=>{var v,_,b;if(!e)return t;const{base:l,quote:d}=r.orderBookId,O=$(r),P=(((v=this.orderBooksStats[e])==null?void 0:v.price)??m.FPNumber.ZERO).dp(O),T=((_=this.orderBooksStats[e])==null?void 0:_.priceChange)??m.FPNumber.ZERO,h=((b=this.orderBooksStats[e])==null?void 0:b.volume)??m.FPNumber.ZERO,k=this.getAsset(l),f=this.getAsset(d),n={id:r.orderBookId,baseAsset:k,targetAsset:f,pair:`${k==null?void 0:k.symbol}-${f==null?void 0:f.symbol}`,status:r.status,price:P.toLocaleString(),priceChange:T,volumeNumber:h.toNumber(),volume:h.toLocaleString()},B=t.findIndex(u=>n.status>u.status||n.status===u.status&&n.id.dexId>u.id.dexId||n.status===u.status&&n.id.dexId===u.id.dexId&&n.volumeNumber>u.volumeNumber);return B!==-1?t.splice(B,0,n):t.push(n),t},[]):[]}calculateColor(t){if([s.OrderBookStatus.Trade,s.OrderBookStatus.PlaceAndCancel].includes(t))return"status-live";if([s.OrderBookStatus.OnlyCancel,s.OrderBookStatus.Stop].includes(t))return"status-stop"}mapBookStatus(t){switch(t){case s.OrderBookStatus.Trade:return this.t("orderBook.bookStatus.active");case s.OrderBookStatus.PlaceAndCancel:return this.t("orderBook.bookStatus.placeable");case s.OrderBookStatus.OnlyCancel:return this.t("orderBook.bookStatus.cancelable");case s.OrderBookStatus.Stop:return this.t("orderBook.bookStatus.inactive");default:return this.t("unknownErrorText")}}handleClickStatusTooltip(t){t==null||t.stopPropagation()}};p([y.orderBook.orderBooks],i.prototype,"orderBooks",2);p([y.orderBook.orderBooksStats],i.prototype,"orderBooksStats",2);p([F.assets.assetDataByAddress],i.prototype,"getAsset",2);p([N.orderBook.setCurrentOrderBook],i.prototype,"setCurrentOrderBook",2);i=p([z({components:{PairTokenLogo:g(x.PairTokenLogo),PriceChange:g(x.PriceChange),TokenLogo:C.TokenLogo,FormattedAmount:C.FormattedAmount}})],i);var R=function(){var o=this,t=o._self._c;return o._self._setupProxy,t("div",{staticClass:"order-book-popover"},[t("div",{staticClass:"order-book-popover__title"},[t("span",[o._v(o._s(o.t("orderBook.tradingPair.choosePair")))]),t("s-tooltip",{attrs:{slot:"suffix","border-radius":"mini",content:o.t("orderBook.tooltip.pairsList"),placement:"top",tabindex:"-1"},slot:"suffix"},[t("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1),t("s-table",{staticClass:"orderbook-whitelist-table",attrs:{data:o.tableItems,"highlight-current-row":!1},on:{"row-click":o.chooseBook}},[t("s-table-column",{attrs:{width:"184"},scopedSlots:o._u([{key:"header",fn:function(){return[t("span",[o._v(o._s(o.t("orderBook.tokenPair")))])]},proxy:!0},{key:"default",fn:function({row:e}){return[t("pair-token-logo",{attrs:{"first-token":e.baseAsset,"second-token":e.targetAsset,size:"small"}}),t("div",{staticClass:"book-pair"},[t("div",[o._v(o._s(e.pair))])])]}}])}),t("s-table-column",{attrs:{width:"130"},scopedSlots:o._u([{key:"header",fn:function(){return[t("span",[o._v(o._s(o.t("priceText")))])]},proxy:!0},{key:"default",fn:function({row:e}){return[t("formatted-amount",{attrs:{value:e.price,"fiat-sign":""}})]}}])}),t("s-table-column",{attrs:{width:"110"},scopedSlots:o._u([{key:"header",fn:function(){return[t("span",[o._v(o._s(o.t("orderBook.tradingPair.volume")))])]},proxy:!0},{key:"default",fn:function({row:e}){return[t("formatted-amount",{attrs:{value:e.volume,"is-fiat-value":""}})]}}])}),t("s-table-column",{attrs:{width:"100"},scopedSlots:o._u([{key:"header",fn:function(){return[t("span",[o._v("1D %")])]},proxy:!0},{key:"default",fn:function({row:e}){return[t("price-change",{attrs:{value:e.priceChange}})]}}])}),t("s-table-column",{attrs:{width:"176"},scopedSlots:o._u([{key:"header",fn:function(){return[t("span",[o._v(o._s(o.t("orderBook.tradingPair.status")))])]},proxy:!0},{key:"default",fn:function({row:e}){return[t("span",{class:o.calculateColor(e.status)},[o._v(o._s(o.mapBookStatus(e.status)))]),t("s-tooltip",{staticClass:"status-tooltip",attrs:{slot:"suffix","border-radius":"mini",content:o.getTooltipText(e.status),placement:"top",tabindex:"-1"},slot:"suffix"},[t("s-icon",{attrs:{name:"info-16",size:"14px"},nativeOn:{click:function(r){return o.handleClickStatusTooltip.apply(null,arguments)}}})],1)]}}])})],1)],1)},M=[],Z=D(i,R,M,!1,null,null);const J=Z.exports;export{J as default};
