var h=Object.defineProperty;var L=(i,t,e)=>t in i?h(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var n=(i,t,e)=>L(i,typeof t!="symbol"?t+"":t,e);import{m as b,$ as m,a5 as _,f as y,hw as C,X as F,g as P,h as S,k as B,i as k,C as x,l as p,j as u,hd as A,he as v,_ as g,n as q}from"./index-BHqySXo4.js";import{P as R}from"./PoolApy-B01OGt9r.js";var T=Object.defineProperty,D=Object.getOwnPropertyDescriptor,l=(i,t,e,s)=>{for(var o=s>1?void 0:s?D(t,e):t,a=i.length-1,d;a>=0;a--)(d=i[a])&&(o=(s?d(t,e,o):d(o))||o);return s&&o&&T(t,e,o),o};let r=class extends b(m.FormattedAmountMixin,m.LoadingMixin,_,R){constructor(){super(...arguments);n(this,"FontSizeRate",y.FontSizeRate);n(this,"FontWeightRate",y.FontWeightRate);n(this,"accountLiquidity");n(this,"getAsset");n(this,"setAddressesToAdd");n(this,"setAddressesToRemove");n(this,"activeCollapseItems",[]);n(this,"addLiquidityVisibility",!1);n(this,"removeLiquidityVisibility",!1)}get hasAccountLiquidities(){return this.accountLiquidity.length!==0}get accountLiquidityData(){return[...this.accountLiquidity.map(o=>{const a=this.getAsset(o.firstAddress),d=this.getAssetSymbol(a),c=this.getAsset(o.secondAddress),f=this.getAssetSymbol(c);return{...o,firstAsset:a,firstAssetSymbol:d,firstBalanceFormatted:this.formatCodecNumber(o.firstBalance,o.decimals),firstBalanceFiat:a?this.getFiatAmountByCodecString(o.firstBalance,a):"0",secondAsset:c,secondAssetSymbol:f,secondBalanceFormatted:this.formatCodecNumber(o.secondBalance,o.decimals),secondBalanceFiat:c?this.getFiatAmountByCodecString(o.secondBalance,c):"0",poolShareFormatted:`${this.formatStringValue(o.poolShare)}%`,apyFormatted:this.getStrategicBonusApy(o.firstAddress,o.secondAddress),title:this.getPairTitle(d,f)}})].sort((o,a)=>C({baseAsset:o.firstAsset,poolAsset:o.secondAsset},{baseAsset:a.firstAsset,poolAsset:a.secondAsset}))}updateActiveCollapseItems(e){this.activeCollapseItems=e}handleAddLiquidity(e){const s=(e==null?void 0:e.firstAsset.address)??F.address,o=(e==null?void 0:e.secondAsset.address)??"";this.setAddressesToAdd({firstAddress:s,secondAddress:o}),this.addLiquidityVisibility=!0}handleRemoveLiquidity(e){const s=e.firstAsset.address,o=e.secondAsset.address;this.setAddressesToRemove({firstAddress:s,secondAddress:o}),this.removeLiquidityVisibility=!0}getAssetSymbol(e){return(e==null?void 0:e.symbol)??this.t("unknownAssetText")}getPairTitle(e,s){return e&&s?`${e}-${s}`:""}getStrategicBonusApy(e,s){const o=this.getPoolApy(e,s);return o?`${this.getFPNumberFromCodec(o).mul(this.Hundred).toLocaleString()}%`:""}};l([P.pool.accountLiquidity],r.prototype,"accountLiquidity",2);l([S.assets.assetDataByAddress],r.prototype,"getAsset",2);l([B.addLiquidity.setDataFromLiquidity],r.prototype,"setAddressesToAdd",2);l([k.removeLiquidity.setAddresses],r.prototype,"setAddressesToRemove",2);r=l([x({components:{GenericPageHeader:p(u.GenericPageHeader),PairTokenLogo:p(u.PairTokenLogo),PoolInfo:p(u.PoolInfo),AddLiquidityDialog:A(v.AddLiquidityDialog),RemoveLiquidityDialog:A(v.RemoveLiquidityDialog),FormattedAmount:g.FormattedAmount,InfoLine:g.InfoLine}})],r);var $=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.parentLoading,expression:"parentLoading"}],staticClass:"container el-form--pool"},[e("generic-page-header",{staticClass:"page-header--pool",attrs:{title:t.t("exchange.Pool"),tooltip:t.t("pool.description")}}),e("div",{staticClass:"pool-wrapper",attrs:{"data-test-name":"Pools"}},[t.isLoggedIn?t.hasAccountLiquidities?e("s-collapse",{key:"has-pools",staticClass:"pool-list",attrs:{borders:!0},on:{change:t.updateActiveCollapseItems}},t._l(t.accountLiquidityData,function(s){return e("s-collapse-item",{key:s.address,staticClass:"pool-info-container",attrs:{name:s.address},scopedSlots:t._u([{key:"title",fn:function(){return[e("pair-token-logo",{attrs:{"first-token":s.firstAsset,"second-token":s.secondAsset,size:"small"}}),e("div",{staticClass:"pool-info-container-block"},[e("h3",{staticClass:"pool-info-container__title"},[t._v(" "+t._s(s.title)+" ")]),t._t("title-append",null,null,{liquidity:s,activeCollapseItems:t.activeCollapseItems})],2)]},proxy:!0}],null,!0)},[e("pool-info",{scopedSlots:t._u([{key:"buttons",fn:function(){return[e("s-button",{staticClass:"s-typography-button--medium",attrs:{type:"secondary","data-test-name":"addLiquidity"},on:{click:function(o){return t.handleAddLiquidity(s)}}},[t._v(" "+t._s(t.t("pool.addLiquidity"))+" ")]),e("s-button",{staticClass:"s-typography-button--medium",attrs:{type:"secondary","data-test-name":"removeLiquidity"},on:{click:function(o){return t.handleRemoveLiquidity(s)}}},[t._v(" "+t._s(t.t("pool.removeLiquidity"))+" ")])]},proxy:!0}],null,!0)},[e("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:t.t("pool.pooledToken",{tokenSymbol:s.firstAssetSymbol}),value:s.firstBalanceFormatted,"fiat-value":s.firstBalanceFiat}}),e("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:t.t("pool.pooledToken",{tokenSymbol:s.secondAssetSymbol}),value:s.secondBalanceFormatted,"fiat-value":s.secondBalanceFiat}}),e("info-line",{attrs:{"value-can-be-hidden":"",label:t.t("pool.poolShare"),value:s.poolShareFormatted}}),s.apyFormatted?e("info-line",{attrs:{label:t.t("pool.strategicBonusApy"),value:s.apyFormatted}}):t._e()],1),t._t("append",null,null,{liquidity:s,activeCollapseItems:t.activeCollapseItems})],2)}),1):e("p",{key:"pools-empty",staticClass:"pool-info-container pool-info-container--empty"},[t._v(" "+t._s(t.t("pool.liquidityNotFound"))+" ")]):e("p",{key:"not-logged",staticClass:"pool-info-container pool-info-container--empty"},[t._v(" "+t._s(t.t("pool.connectToWallet"))+" ")])],1),t.isLoggedIn?e("s-button",{staticClass:"el-button--add-liquidity s-typography-button--large",attrs:{"data-test-name":"addLiquidity",type:"primary"},on:{click:function(s){return t.handleAddLiquidity()}}},[t._v(" "+t._s(t.t("pool.addLiquidity"))+" ")]):e("s-button",{staticClass:"s-typography-button--large",attrs:{type:"primary"},on:{click:t.connectSoraWallet}},[t._v(" "+t._s(t.t("connectWalletText"))+" ")]),e("add-liquidity-dialog",{attrs:{visible:t.addLiquidityVisibility},on:{"update:visible":function(s){t.addLiquidityVisibility=s}}}),e("remove-liquidity-dialog",{attrs:{visible:t.removeLiquidityVisibility},on:{"update:visible":function(s){t.removeLiquidityVisibility=s}}})],1)},V=[],w=q(r,$,V,!1,null,"38f28c7e");const M=w.exports;export{M as default};
