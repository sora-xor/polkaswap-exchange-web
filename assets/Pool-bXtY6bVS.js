var g=Object.defineProperty;var f=(i,e,a)=>e in i?g(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a;var u=(i,e,a)=>f(i,typeof e!="symbol"?e+"":e,a);import{m as P,$ as h,g as v,C as m,hM as A,as as _,hz as n,hA as d,n as y}from"./index-BHqySXo4.js";import{P as C}from"./PageMixin-BILi52dP.js";import"./BasePageMixin-Co7yDbqF.js";var D=Object.defineProperty,w=Object.getOwnPropertyDescriptor,p=(i,e,a,o)=>{for(var s=o>1?void 0:o?w(e,a):e,t=i.length-1,l;t>=0;t--)(l=i[t])&&(s=(o?l(e,a,s):l(s))||s);return o&&s&&D(e,a,s),s};let c=class extends P(C,h.TransactionMixin){constructor(){super(...arguments);u(this,"accountLiquidity")}get selectedAccountLiquidity(){return this.accountLiquidity.find(e=>e.firstAddress===this.baseAsset&&e.secondAddress===this.poolAsset)??null}get selectedDerivedPool(){return this.selectedPool?this.prepareDerivedPoolData(this.selectedPool,this.selectedAccountPool,this.selectedAccountLiquidity):null}get farmingPoolsByLiquidities(){return this.accountLiquidity.reduce((e,a)=>{var t;const o=this.getLiquidityKey(a),s=this.getDerivedPools((t=this.pools[a.firstAddress])==null?void 0:t[a.secondAddress]);return e[o]=s.map(l=>this.prepareDerivedPoolData(l.pool,l.accountPool,a)),e},{})}getLiquidityFarmingPools(e){return this.farmingPoolsByLiquidities[this.getLiquidityKey(e)]??[]}getLiquidityKey(e){return[e.firstAddress,e.secondAddress].join(";")}};p([v.pool.accountLiquidity],c.prototype,"accountLiquidity",2);c=p([m({inheritAttrs:!1,components:{PoolBase:A(_.Pool),PoolCard:n(d.PoolCard),StatusBadge:n(d.StatusBadge),StakeDialog:n(d.StakeDialog),ClaimDialog:n(d.ClaimDialog),CalculatorDialog:n(d.CalculatorDialog)}})],c);var L=function(){var e=this,a=e._self._c;return e._self._setupProxy,a("div",[a("pool-base",e._g(e._b({scopedSlots:e._u([{key:"title-append",fn:function({liquidity:o,activeCollapseItems:s}){return[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isActiveCollapseItem(o.address,s),expression:"!isActiveCollapseItem(liquidity.address, activeCollapseItems)"}],staticClass:"s-flex farming-pool-badges"},e._l(e.getLiquidityFarmingPools(o),function(t,l){return a("status-badge",{key:`${t.pool.poolAsset}-${t.pool.rewardAsset}-${l}`,staticClass:"farming-pool-badge",attrs:{liquidity:o,pool:t.pool,"account-pool":t.accountPool,"pool-asset":t.poolAsset,"reward-asset":t.rewardAsset,apr:t.apr},on:{add:function(r){return e.changePoolStake(r,!0)}}})}),1)]}},{key:"append",fn:function({liquidity:o,activeCollapseItems:s}){return[e.isActiveCollapseItem(o.address,s)?e._l(e.getLiquidityFarmingPools(o),function(t,l){return a("pool-card",{key:`${t.pool.poolAsset}-${t.pool.rewardAsset}-${l}`,staticClass:"demeter-pool",attrs:{liquidity:o,pool:t.pool,"account-pool":t.accountPool,"base-asset":t.baseAsset,"pool-asset":t.poolAsset,"reward-asset":t.rewardAsset,apr:t.apr,tvl:t.tvl,border:""},on:{add:function(r){return e.changePoolStake(r,!0)},remove:function(r){return e.changePoolStake(r,!1)},claim:e.claimPoolRewards,calculator:e.showPoolCalculator}})}):e._e()]}}])},"pool-base",{parentLoading:e.parentLoading,...e.$attrs},!1),e.$listeners)),a("stake-dialog",e._b({attrs:{visible:e.showStakeDialog,"is-adding":e.isAddingStake,liquidity:e.selectedAccountLiquidity,"parent-loading":e.parentLoading||e.loading},on:{"update:visible":function(o){e.showStakeDialog=o},add:function(o){return e.handleStakeAction(o,e.deposit)},remove:function(o){return e.handleStakeAction(o,e.withdraw)}}},"stake-dialog",e.selectedDerivedPool,!1)),a("claim-dialog",e._b({attrs:{visible:e.showClaimDialog,"parent-loading":e.parentLoading||e.loading},on:{"update:visible":function(o){e.showClaimDialog=o},confirm:e.handleClaimRewards}},"claim-dialog",e.selectedDerivedPool,!1)),a("calculator-dialog",e._b({attrs:{visible:e.showCalculatorDialog,liquidity:e.selectedAccountLiquidity},on:{"update:visible":function(o){e.showCalculatorDialog=o}}},"calculator-dialog",e.selectedDerivedPool,!1))],1)},b=[],S=y(c,L,b,!1,null,"cb1eccd1");const B=S.exports;export{B as default};
