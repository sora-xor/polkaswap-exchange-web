var d=Object.defineProperty;var p=(r,t,e)=>t in r?d(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var c=(r,t,e)=>p(r,typeof t!="symbol"?t+"":t,e);import{m as _,T as h,$ as C,h8 as f,h9 as m,g as y,W as g,C as v,_ as u,n as b}from"./index-BHqySXo4.js";import{S as x}from"./SearchInputMixin-BPi4nX0e.js";var S=Object.defineProperty,N=Object.getOwnPropertyDescriptor,l=(r,t,e,s)=>{for(var a=s>1?void 0:s?N(t,e):t,n=r.length-1,i;n>=0;n--)(i=r[n])&&(a=(s?i(t,e,a):i(a))||a);return s&&a&&S(t,e,a),a};let o=class extends _(h,C.DialogMixin,x){constructor(){super(...arguments);c(this,"displayRegions");c(this,"countriesObject",{})}get countries(){return Object.entries(this.countriesObject).map(([e,s])=>{const a=this.getFlag(e),n=this.formatCountryName(e,s.name);return{key:e,name:s.name,dialCode:s.dial_code,flag:a,translatedName:n}}).sort((e,s)=>e.translatedName<s.translatedName?-1:e.translatedName>s.translatedName?1:0)}get filteredCountries(){const e=this.countries;if(this.query){const s=this.query.toLowerCase().trim();return e.filter(a=>a.dialCode.includes(s)||a.name.toLowerCase().includes(s)||a.translatedName.toLowerCase().includes(s))}return e}getFlag(e){try{return f(e)}catch{return""}}formatCountryName(e,s){try{const a=e.toUpperCase();return this.displayRegions?this.displayRegions.of(a)??s:s}catch(a){return console.warn("Unsupported format of SORA Card Phone Country",a),s}}async mounted(){this.countriesObject=await m()}async handleVisibleChangeToFocusSearch(e){await this.$nextTick(),e&&this.clearAndFocusSearch()}selectCountry(e){this.handleClearSearch(),this.$emit("select",e),this.closeDialog()}};l([y.settings.displayRegions],o.prototype,"displayRegions",2);l([g("visible")],o.prototype,"handleVisibleChangeToFocusSearch",1);o=l([v({components:{DialogBase:u.DialogBase,SearchInput:u.SearchInput}})],o);var w=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("dialog-base",{staticClass:"select-country-dialog",attrs:{visible:t.isVisible,title:t.t("card.selectCountryText")},on:{"update:visible":function(s){t.isVisible=s}}},[e("search-input",{ref:"search",staticClass:"select-country__search",attrs:{autofocus:"",placeholder:t.t("card.filterCountries")},on:{clear:t.handleClearSearch},model:{value:t.query,callback:function(s){t.query=s},expression:"query"}}),e("s-scrollbar",{staticClass:"select-country__scrollbar"},[e("div",{staticClass:"select-country__list"},t._l(t.filteredCountries,function(s){return e("div",{directives:[{name:"button",rawName:"v-button"}],key:s.key,staticClass:"p1 select-country__item s-flex",on:{click:function(a){return t.selectCountry(s)}}},[e("span",{staticClass:"flags flag-emodji"},[t._v(t._s(s.flag))]),e("span",{staticClass:"text"},[e("p",{staticClass:"p1 text__name"},[t._v(t._s(s.translatedName))]),e("p",{staticClass:"p3 text__name"},[t._v(t._s(s.name))])]),e("span",{staticClass:"p1 code"},[t._v(t._s(s.dialCode))])])}),0)])],1)},D=[],O=b(o,w,D,!1,null,"6d556fe1");const F=O.exports;export{F as default};
